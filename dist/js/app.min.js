!function(){function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return i(n||t)},h,h.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return t}()({1:[function(require,module,exports){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}var e=require("./cax"),n=t(e),r=require("./tpler"),i=(t(r),document.documentElement),o=i.clientWidth,a=i.clientHeight,s=new n["default"].Stage(o,a,"#renderTo"),u=new n["default"].Graphics;s.add(u);var c=function(t,e){u.beginPath(),t.forEach(function(t,e){u[0===e?"moveTo":"lineTo"](t.x,t.y)}),u.closePath().strokeStyle(e).stroke()},h=function(t,e){t.forEach(function(t){c(t,e)})},l=function(t){var e=t.vs,n=[e],r=function i(e){var r=t.invertices(e);r&&(n.push(r),e.forEach(function(t,e){var n=[t,r[e],r[0===e?r.length-1:e-1]];i(n)}))};return r(e),n},f={x:o/2,y:a/2,vx:1*(2*Math.random()-1),vy:1*(2*Math.random()-1)},p={r:100,a:45,num:4,x:f.x,y:f.y},d=0,v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;_.extend(p,{a:d++,num:e,r:n,x:t.x,y:t.y});var r=_.color.circle(e);_.vertex(p).vs.forEach(function(t,e){var n=_.vertex(_.extend(p,{x:t.x,y:t.y}));h(l(n),r[e])}),s.update()},y=function(t){t.x+=t.vx,t.y+=t.vy,t.x>=o&&(t.vx*=-1),t.x<=0&&(t.vx*=-1),t.y>=a&&(t.vy*=-1),t.y<=0&&(t.vy*=-1)},g=function m(){requestAnimationFrame(m),y(f),u.fillStyle("rgba(0,0,0,0.05)").fillRect(0,0,o,a),v(f,4,60)};_.vertex(p).vs.forEach(function(t,e){return v(t,e+3)}),setTimeout(g,2e3)},{"./cax":2,"./tpler":3}],2:[function(require,module,exports){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e,n){"object"===("undefined"==typeof exports?"undefined":t(exports))&&"object"===("undefined"==typeof module?"undefined":t(module))?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"===("undefined"==typeof exports?"undefined":t(exports))?exports.cax=n():e.cax=n()}("undefined"!=typeof self?self:void 0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var module=n[r]={i:r,l:!1,exports:{}};return t[r].call(module.exports,module,module.exports,e),module.l=!0,module.exports}var n={};return e.m=t,e.c=n,e.d=function(exports,t,n){e.o(exports,t)||Object.defineProperty(exports,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(module){var t=module&&module.__esModule?function(){return module["default"]}:function(){return module};return e.d(t,"a",t),t},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function l(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:l(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=e(3),c=n(u),h=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"draw",value:function(){}},{key:"render",value:function(t){this.clear(),this.draw(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t)}},{key:"cache",value:function(t,e,n,r,i){t=t||0,e=e||0,n=n||this.width,r=r||this.height,"undefined"!=typeof wx&&wx.createCanvas?this.cacheCanvas=wx.createCanvas():this.cacheCanvas=document.createElement("canvas"),this.cacheCanvas.width=n,this.cacheCanvas.height=r,this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCtx.setTransform(1,0,0,1,t,e),i&&(this.cacheCtx.save(),this.cacheCtx.fillStyle="red",this.cacheCtx.fillRect(0,0,n,r),this.cacheCtx.restore()),this.render(this.cacheCtx)}},{key:"uncache",value:function(){this.cacheCanvas=null}}]),e}(c["default"]);exports["default"]=h},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function l(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:l(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=e(2),c=n(u),h=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.children=[],n}return o(e,t),a(e,[{key:"add",value:function(t){for(var e=arguments.length,n=0;n<e;n++)this.children.push(arguments[n]),arguments[n].parent=this}},{key:"addChildAt",value:function(t,e){var n=t.parent;n&&n.removeChildAt(n.children.indexOf(t)),t.parent=this,this.children.splice(e,0,t)}},{key:"removeChildAt",value:function(t){var e=this.children[t];e&&(e.parent=null),this.children.splice(t,1)}},{key:"replace",value:function(t,e){var n=e.parent.children.indexOf(e);this.removeChildAt(n),this.addChildAt(t,n)}},{key:"remove",value:function(t){for(var e=arguments.length,n=this.children.length,r=0;r<e;r++)for(var i=0;i<n;i++)t.id===this.children[i].id&&(t.parent=null,this.children.splice(i,1),i--,n--)}},{key:"empty",value:function(){this.children.forEach(function(t){t.parent=null}),this.children.length=0}},{key:"destroy",value:function(){this.empty(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);exports["default"]=h},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(20),u=n(s),c=e(21),h=n(c),l=e(22),f=n(l),p=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.alpha=t.complexAlpha=t.scaleX=t.scaleY=1,t.x=t.y=t.rotation=t.skewX=t.skewY=t.originX=t.originY=0,t.cursor=null,t.visible=!0,t._matrix=new u["default"],t._hitMatrix=new u["default"],t.id=f["default"].get(),t.clipGraphics=null,t.clipRuleNonzero=!0,t}return o(e,t),a(e,[{key:"isVisible",value:function(){return this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY}},{key:"initAABB",value:function(){if(void 0!==this.width&&void 0!==this.height){var t=void 0,e=void 0,n=this.width,r=this.height,i=this._matrix,o=n*i.a,a=n*i.b,s=r*i.c,u=r*i.d,c=i.tx,h=i.ty,l=c,f=c,p=h,d=h;(t=o+c)<l?l=t:t>f&&(f=t),(t=o+s+c)<l?l=t:t>f&&(f=t),(t=s+c)<l?l=t:t>f&&(f=t),(e=a+h)<p?p=e:e>d&&(d=e),(e=a+u+h)<p?p=e:e>d&&(d=e),(e=u+h)<p?p=e:e>d&&(d=e),this.AABB=[l,p,f-l,d-p],this.rectPoints=[{x:c,y:h},{x:o+c,y:a+h},{x:o+s+c,y:a+u+h},{x:s+c,y:u+h}]}}},{key:"destroy",value:function(){this.parent.remove(this)}},{key:"hover",value:function(t,e,n){this.on("mouseover",t),this.on("mouseout",e),n&&this.on("mousemove",n)}},{key:"clip",value:function(t,e){this.clipGraphics=t,this.clipRuleNonzero=!e}},{key:"unclip",value:function(){this.clipGraphics=null}}]),e}(h["default"]);exports["default"]=p},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(2),u=n(s),c={fillStyle:!0,strokeStyle:!0,lineWidth:!0,lineCap:!0,lineDashOffset:!0,lineJoin:!0,miterLimit:!0},h=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.cmds=[],t.currentGradient=null,t}return o(e,t),a(e,[{key:"clearRect",value:function(){return this.cmds.push(["clearRect",arguments]),this}},{key:"rect",value:function(){return this.cmds.push(["rect",arguments]),this}},{key:"clear",value:function(){return this.cmds.length=0,this}},{key:"setLineDash",value:function(){return this.cmds.push(["setLineDash",arguments]),this}},{key:"strokeRect",value:function(){return this.cmds.push(["strokeRect",arguments]),this}},{key:"fillRect",value:function(){return this.cmds.push(["fillRect",arguments]),this}},{key:"beginPath",value:function(){return this.cmds.push(["beginPath",arguments]),this}},{key:"arc",value:function(){return this.cmds.push(["arc",arguments]),this}},{key:"closePath",value:function(){return this.cmds.push(["closePath",arguments]),this}},{key:"fillStyle",value:function(){return this.cmds.push(["fillStyle",arguments]),this}},{key:"fill",value:function(){return this.cmds.push(["fill",arguments]),this}},{key:"strokeStyle",value:function(){return this.cmds.push(["strokeStyle",arguments]),this}},{key:"lineWidth",value:function(){return this.cmds.push(["lineWidth",arguments]),this}},{key:"lineCap",value:function(){return this.cmds.push(["lineCap",arguments]),this}},{key:"lineDashOffset",value:function(){return this.cmds.push(["lineDashOffset",arguments]),this}},{key:"lineJoin",value:function(){return this.cmds.push(["lineJoin",arguments]),this}},{key:"miterLimit",value:function(){return this.cmds.push(["miterLimit",arguments]),this}},{key:"stroke",value:function(){return this.cmds.push(["stroke",arguments]),this}},{key:"moveTo",value:function(){return this.cmds.push(["moveTo",arguments]),this}},{key:"lineTo",value:function(){return this.cmds.push(["lineTo",arguments]),this}},{key:"bezierCurveTo",value:function(){return this.cmds.push(["bezierCurveTo",arguments]),this}},{key:"quadraticCurveTo",value:function(){return this.cmds.push(["quadraticCurveTo",arguments]),this}},{key:"createRadialGradient",value:function(){return this.cmds.push(["createRadialGradient",arguments]),this}},{key:"createLinearGradient",value:function(){return this.cmds.push(["createLinearGradient",arguments]),this}},{key:"addColorStop",value:function(){return this.cmds.push(["addColorStop",arguments]),this}},{key:"fillGradient",value:function(){return this.cmds.push(["fillGradient"]),this}},{key:"arcTo",value:function(){return this.cmds.push(["arcTo",arguments]),this}},{key:"render",value:function(t){var e=this;this.cmds.forEach(function(n){var r=n[0];if(c[r])t[r]=n[1][0];else if("addColorStop"===r)e.currentGradient&&e.currentGradient.addColorStop(n[1][0],n[1][1]);else if("fillGradient"===r)t.fillStyle=e.currentGradient;else{var i=t[r].apply(t,Array.prototype.slice.call(n[1]));"createRadialGradient"!==r&&"createLinearGradient"!==r||(e.currentGradient=i)}})}}]),e}(u["default"]);exports["default"]=h},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(2),u=n(s),c=e(9),h=n(c),l=h["default"].isWeapp||h["default"].isWegame?null:document.createElement("canvas").getContext("2d"),f=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.text=t,n=n||{},o.font=n.font,o.color=n.color,o.baseline=n.baseline||"top",o}return o(e,t),a(e,[{key:"getWidth",value:function(){return l.font=this.font,l.measureText(this.text).width}},{key:"cache",value:function(t,e,n,r,i){t=t||0,e=e||0,n=n||this.width,r=r||this.height,"undefined"!=typeof wx&&wx.createCanvas?this.cacheCanvas=wx.createCanvas():this.cacheCanvas=document.createElement("canvas"),this.cacheCanvas.width=n,this.cacheCanvas.height=r,this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCtx.setTransform(1,0,0,1,t,e),this.cacheCtx.fillStyle=this.color,this.cacheCtx.font=this.font,this.cacheCtx.textBaseline=this.baseline,i&&(this.cacheCtx.save(),this.cacheCtx.fillStyle="red",this.cacheCtx.fillRect(0,0,n,r),this.cacheCtx.restore()),this.cacheCtx.fillText(this.text,0,0)}},{key:"uncache",value:function(){this.cacheCanvas=null}}]),e}(u["default"]);exports["default"]=f},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(2),u=n(s),c=e(9),h=n(c),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.option=t;var o=n.option.imgs.length,a=0;if(n.imgMap={},h["default"].isWeapp)n.option.imgs.forEach(function(t){h["default"].getImageInWx(t,function(e){n.imgMap[t]=e.img,a++,a===o&&(n.img=n.imgMap[n.option.imgs[0]],n.rect=[0,0,e.width,e.height])})});else if("string"==typeof n.option.imgs[0]){var s=n.option.imgs.length,u=0;n.option.imgs.forEach(function(t){var e=h["default"].isWegame?wx.createImage():new window.Image;e.onload=function(){n.imgMap[t]=e,u++,u===s&&(n.img=n.imgMap[n.option.imgs[0]],n.rect=[0,0,n.img.width,n.img.height])},e.src=t})}else n.rect=[0,0,0,0],n.img=n.option.imgs[0];return n.x=t.x||0,n.y=t.y||0,n.currentFrameIndex=0,n.animationFrameIndex=0,n.currentAnimation=t.currentAnimation||null,n.interval=1e3/t.framerate,n.paused=!1,n.animationEnd=t.animationEnd||function(){},n.currentAnimation&&(t.playOnce?n.gotoAndPlayOnce(n.currentAnimation):n.gotoAndPlay(n.currentAnimation)),n}return o(e,t),a(e,[{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"reset",value:function(){this.currentFrameIndex=0,this.animationFrameIndex=0}},{key:"updateFrame",value:function(){if(!this.paused){var t=this.option;this.dt=Date.now()-this.startTime;var e=t.animations[this.currentAnimation].frames,n=e.length,r=Math.floor(this.dt/this.interval%n);this.rect=t.frames[e[r]];var i=this.rect.length;i>4&&(this.originX=this.rect[2]*this.rect[4]),i>5&&(this.originY=this.rect[3]*this.rect[5]),i>6&&(this.img=this.imgMap[this.option.imgs[this.rect[6]]]),r===n-1&&(!this.endTime||Date.now()-this.endTime>this.interval)&&(this.endTime=Date.now(),this.animationEnd(),this._willDestroy&&this.destroy())}}},{key:"gotoAndPlay",value:function(t){this.paused=!1,this.reset(),this.currentAnimation=t,this.startTime=Date.now()}},{key:"gotoAndStop",value:function(t){this.reset(),this.paused=!0,this.currentAnimation=t;var e=this.option,n=e.animations[this.currentAnimation].frames;this.rect=e.frames[n[this.animationFrameIndex]];var r=this.rect;this.width=r[2],this.height=r[3];var i=r.length;i>4&&(this.originX=r[2]*r[4]),i>5&&(this.originY=r[3]*r[5]),i>6&&(this.img=this.imgMap[this.option.imgs[r[6]]])}},{key:"gotoAndPlayOnce",value:function(t){this.gotoAndPlay(t),this._willDestroy=!0}}]),e}(u["default"]);exports["default"]=l},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(2),u=n(s),c=e(9),h=n(c),l=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return"string"==typeof t?e.cache[t]?(o.img=e.cache[t],o.rect=[0,0,o.img.width,o.img.height],n&&n.call(o),o.width=o.img.width,o.height=o.img.height):h["default"].isWeapp?h["default"].getImageInWx(t,function(r){o.img=r.img,o.rect||(o.rect=[0,0,r.width,r.height]),n&&n.call(o),e.cache[t]=r.img}):(o.img=h["default"].isWegame?wx.createImage():new window.Image,o.visible=!1,o.img.onload=function(){o.visible=!0,o.rect||(o.rect=[0,0,o.img.width,o.img.height]),o.width=o.img.width,o.height=o.img.height,n&&n.call(o),e.cache[t]=o.img},o.img.src=t):(o.img=t,o.rect=[0,0,t.width,t.height],o.width=t.width,o.height=t.height,e.cache[t.src]=t),o}return o(e,t),a(e,[{key:"clone",value:function(){var t=new e(this.img);return t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.skewX=this.skewX,t.skewY=this.skewY,t.originX=this.originX,t.originY=this.originY,t.width=this.width,t.height=this.height,t}}]),e}(u["default"]);l.cache={},exports["default"]=l},function(module,exports,t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(){function t(){e(this,t),this.propagationStopped=!1,this.stageX=null,this.stageY=null,this.pureEvent=null}return n(t,[{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"preventDefault",value:function(){this.pureEvent.preventDefault()}}]),t}();exports["default"]=r},function(module,exports,t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(){function t(){e(this,t)}return n(t,[{key:"render",value:function(){}},{key:"renderGraphics",value:function(){}},{key:"clear",value:function(){}}]),t}();exports["default"]=r},function(module,exports,e){(function(e){function n(t,e){t.indexOf("https://")===-1&&t.indexOf("http://")===-1?wx.getImageInfo({src:t,success:function(n){e({img:t,width:n.width,height:n.height})}}):wx.downloadFile({url:t,success:function(t){200===t.statusCode&&wx.getImageInfo({src:t.tempFilePath,success:function(n){e({img:t.tempFilePath,width:n.width,height:n.height})}})}})}function r(){return"object"===("undefined"==typeof e?"undefined":i(e))&&e&&e.Math===Math&&e.Array===Array?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:function(){return this}()}Object.defineProperty(exports,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":t(e)};exports.getImageInWx=n;var o=r();exports["default"]={getImageInWx:n,root:o,isWeapp:"undefined"!=typeof wx&&!wx.createCanvas,isWegame:"undefined"!=typeof wx&&wx.createCanvas}}).call(exports,e(24))},function(module,exports,e){(function(e){var n="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":t(e)},r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:i.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var o=this._tweens[n[r]];o&&o.update(t)===!1&&(o._isPlaying=!1,e||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i=new r;i.Group=r,i._nextId=0,i.nextId=function(){return i._nextId++},"undefined"==typeof window&&"undefined"!=typeof e?"undefined"!=typeof wx?i.now=Date.now:i.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?i.now=window.performance.now.bind(window.performance):void 0!==Date.now?i.now=Date.now:i.now=function(){return(new Date).getTime()},i.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||i,this._id=i.nextId()},i.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?i.now()+parseFloat(t):t:i.now(),this._startTime+=this._delayTime;for(var e in this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function o(o){return this._group=o,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,r;if(t<this._startTime)return!0;this._onStartCallbackFired===!1&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,r=this._easingFunction(n);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var i=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,r):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=i+(o-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,o=Math.floor(r),a=i.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[o],t[o+1>n?n:o+1],r-o)},Bezier:function(t,e){for(var n=0,r=t.length-1,o=Math.pow,a=i.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=o(1-e,r-s)*o(e,s)*t[s]*a(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,o=Math.floor(r),a=i.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(r=n*(1+e))),a(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],r-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],r-o);
},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=i.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+o+a)*u+(-3*e+3*n-2*o-a)*s+o*i+e}}},function(t){"undefined"!=typeof module&&"object"===n(exports)?module.exports=i:void 0!==t&&(t.TWEEN=i)}(void 0)}).call(exports,e(17))},function(module,exports,t){function e(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=t(10),o=e(i),a=t(12),s=function(){function t(e){n(this,t),this.element=e,this.cmds=[],this.index=0,this.tweens=[],this._pause=!1,this.loop=(0,a.setRafInterval)(function(){o["default"].update()},15),this.cycleCount=0}return r(t,[{key:"to",value:function(t,e,n){if(this.cmds.push(["to"]),0!==arguments.length)for(var r in t)this.set(r,t[r],e,n);return this}},{key:"set",value:function(t,e,n,r){return this.cmds[this.cmds.length-1].push([t,[e,n,r]]),this}},{key:"x",value:function(){return this.cmds[this.cmds.length-1].push(["x",arguments]),this}},{key:"y",value:function(){return this.cmds[this.cmds.length-1].push(["y",arguments]),this}},{key:"z",value:function(){return this.cmds[this.cmds.length-1].push(["z",arguments]),this}},{key:"rotation",value:function(){return this.cmds[this.cmds.length-1].push(["rotation",arguments]),this}},{key:"scaleX",value:function(){return this.cmds[this.cmds.length-1].push(["scaleX",arguments]),this}},{key:"scaleY",value:function(){return this.cmds[this.cmds.length-1].push(["scaleY",arguments]),this}},{key:"skewX",value:function(){return this.cmds[this.cmds.length-1].push(["skewX",arguments]),this}},{key:"skewY",value:function(){return this.cmds[this.cmds.length-1].push(["skewY",arguments]),this}},{key:"originX",value:function(){return this.cmds[this.cmds.length-1].push(["originX",arguments]),this}},{key:"originY",value:function(){return this.cmds[this.cmds.length-1].push(["originY",arguments]),this}},{key:"alpha",value:function(){return this.cmds[this.cmds.length-1].push(["alpha",arguments]),this}},{key:"begin",value:function(t){return this.cmds[this.cmds.length-1].begin=t,this}},{key:"progress",value:function(t){return this.cmds[this.cmds.length-1].progress=t,this}},{key:"end",value:function(t){return this.cmds[this.cmds.length-1].end=t,this}},{key:"wait",value:function(){return this.cmds.push(["wait",arguments]),this}},{key:"then",value:function(){return this.cmds.push(["then",arguments]),this}},{key:"cycle",value:function(){return this.cmds.push(["cycle",arguments]),this}},{key:"start",value:function(){if(!this._pause){var t=this.cmds.length;return this.index<t?this.exec(this.cmds[this.index],this.index===t-1):(0,a.clearRafInterval)(this.loop),this}}},{key:"pause",value:function(){this._pause=!0;for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].pause();"wait"===this.currentTask&&(this.timeout-=new Date-this.currentTaskBegin,this.currentTaskBegin=new Date)}},{key:"toggle",value:function(){this._pause?this.play():this.pause()}},{key:"play",value:function(){this._pause=!1;for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].play();var n=this;"wait"===this.currentTask&&setTimeout(function(){n._pause||(n.index++,n.start(),n.index===n.cmds.length&&n.complete&&n.complete())},this.timeout)}},{key:"stop",value:function(){for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].pause(),o["default"].remove(this.tweens[t]);this.cmds.length=0}},{key:"animate",value:function(e){return this.cmds=this.cmds.concat(t.animationMap[e]||[]),this}},{key:"exec",value:function(t,e){var n=t.length,r=this;switch(this.currentTask=t[0],this.currentTask){case"to":r.stepCompleteCount=0;for(var i=1;i<n;i++){var a=t[i],s=a[1][2],u={},c=a[0];u[c]=a[1][0];var h=new o["default"].Tween(this.element).to(u,a[1][1]).onStart(function(){t.begin&&t.begin.call(r.element,r.element)}).onUpdate(function(){t.progress&&t.progress.call(r.element,r.element)}).easing(s||o["default"].Easing.Linear.None).onComplete(function(){r.stepCompleteCount++,r.stepCompleteCount===n-1&&(t.end&&t.end.call(r.element,r.element),e&&r.complete&&r.complete(),r.index++,r.start())}).start();this.tweens.push(h)}break;case"wait":this.currentTaskBegin=new Date,this.timeout=t[1][0],setTimeout(function(){r._pause||(r.index++,r.start(),t.end&&t.end.call(r.element,r.element),e&&r.complete&&r.complete())},t[1][0]);break;case"then":var l=t[1][0];l.index=0,l.complete=function(){r.index++,r.start(),e&&r.complete&&r.complete()},l.start();break;case"cycle":var f=t[1][1];void 0===f?(r.index=t[1][0]||0,r.start()):f&&r.cycleCount===f?(r.index++,r.start(),e&&r.complete&&r.complete()):(r.cycleCount++,r.index=t[1][0],r.start())}}}]),t}();s.get=function(t){var e=new s(t);return e},s.animationMap={},s.extend=function(t,e){s.animationMap[t]=e},exports["default"]=s},function(module,exports,t){function e(t,e){var n=h(),r=Math.max(0,16-(n-l)),i=setTimeout(function(){t(n+r)},r);return l=n+r,i}function n(t){clearTimeout(t)}function r(t,e){if(s++,a.push({id:s,fn:t,interval:e,lastTime:h()}),!u){var n=function r(){c=g(r),o(a,function(t){(t.interval<17||h()-t.lastTime>=t.interval)&&(t.fn(),t.lastTime=h())})};u=!0,n()}return s}function i(t){for(var e=0,n=a.length;e<n;e++)if(t===a[e].id){a.splice(e,1);break}0===a.length&&(m(c),u=!1)}function o(t,e){if(Array.prototype.forEach)t.forEach(e);else for(var n=0,r=t.length;n<r;n++)e(t[n],n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setRafInterval=r,exports.clearRafInterval=i,Date.now||(Date.now=function(){return(new Date).getTime()});var a=[],s=-1,u=!1,c=null,h=Date.now,l=0,f=["ms","moz","webkit","o"],p=0,d="undefined"!=typeof wx&&!wx.createCanvas,v="undefined"!=typeof wx&&wx.createCanvas,y="undefined"!=typeof window,g=y?window.requestAnimationFrame:null,m=y?window.cancelAnimationFrame:null;if(y){for(window.setRafInterval=r,window.clearRafInterval=i;p<f.length&&!window.requestAnimationFrame;++p)window.requestAnimationFrame=window[f[p]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[p]+"CancelAnimationFrame"]||window[f[p]+"CancelRequestAnimationFrame"];g||(g=e,m=n,window.requestAnimationFrame=g,window.cancelAnimationFrame=m)}else d?(g=e,m=n):v&&(g=requestAnimationFrame,m=cancelAnimationFrame)},function(module,exports,t){function e(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=t(23),o=e(i),a=t(1),s=e(a),u=function(){function t(e,r,i){n(this,t),this.renderList=[],3===arguments.length?this.renderer=new o["default"](e,r,i):this.renderer=new o["default"](e),this.ctx=this.renderer.ctx}return r(t,[{key:"update",value:function(t){var e=this.renderList,n=this.renderer;e.length=0,this.computeMatrix(t),n.clear(),e.forEach(function(t){n.render(t)}),this.ctx.draw&&this.ctx.draw()}},{key:"getHitRenderList",value:function(t){var e=this.renderList;return e.length=0,this.computeMatrix(t),e}},{key:"computeMatrix",value:function(t){for(var e=0,n=t.children.length;e<n;e++)this._computeMatrix(t.children[e])}},{key:"initComplex",value:function(t){t.complexCompositeOperation=this._getCompositeOperation(t),t.complexAlpha=this._getAlpha(t,1)}},{key:"_computeMatrix",value:function(t,e){if(t.isVisible())if(e?t._matrix.initialize(e.a,e.b,e.c,e.d,e.tx,e.ty):t._matrix.initialize(1,0,0,1,0,0),t._matrix.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY),t instanceof s["default"])for(var n=t.children,r=n.length,i=0;i<r;i++)this._computeMatrix(n[i],t._matrix);else t.initAABB(),this.renderList.push(t),this.initComplex(t)}},{key:"_getCompositeOperation",value:function(t){return t.compositeOperation?t.compositeOperation:t.parent?this._getCompositeOperation(t.parent):void 0}},{key:"_getAlpha",value:function(t,e){var n=t.alpha*e;return t.parent?this._getAlpha(t.parent,n):n}},{key:"isInStage",value:function(t){return this.collisionBetweenAABB(t.AABB,this.stage.AABB)}},{key:"collisionBetweenAABB",value:function(t,e){var n=t[0]+t[2];if(n<e[0])return!1;var r=t[0];if(r>e[0]+e[2])return!1;var i=t[1]+t[3];if(i<e[1])return!1;var o=t[1];return!(o>e[1]+e[3])}}]),t}();exports["default"]=u},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),c=e(13),h=n(c),l=e(26),f=n(l),p=e(7),d=n(p),v=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),u=a.selectComponent("#"+o);u.setData({width:t,height:n}),u.stage=s;var c=u.getCaxCanvasId(),l=wx.createCanvasContext(c,u),p=wx.createCanvasContext(c+"Hit",u);return s.renderer=new h["default"](l,t,n),s._hitRender=new f["default"](p,u,c),s._overObject=null,s.ctx=l,s.width=t,s.height=n,s}return o(e,t),a(e,[{key:"touchStartHandler",value:function(t){var e=this,n=t.changedTouches[0];t.stageX=n.x,t.stageY=n.y,this._getObjectUnderPoint(t,function(n){e.willDragObject=n,e._mouseDownX=t.stageX,e._mouseDownY=t.stageY,e.preStageX=t.stageX,e.preStageY=t.stageY})}},{key:"touchMoveHandler",value:function(t){var e=this,n=t.changedTouches[0];t.stageX=n.x,t.stageY=n.y,this._getObjectUnderPoint(t,function(n){var r=new d["default"];r.stageX=t.stageX,r.stageY=t.stageY,r.pureEvent=t,e.willDragObject&&(r.type="drag",r.dx=r.stageX-e.preStageX,r.dy=r.stageY-e.preStageY,e.preStageX=r.stageX,e.preStageY=r.stageY,e.willDragObject.dispatchEvent(r)),n?null===e._overObject?e._overObject=n:n.id!==e._overObject.id?e._overObject=n:(r.type="touchmove",n.dispatchEvent(r)):e._overObject&&(e._overObject=null)})}},{key:"touchEndHandler",value:function(t){var e=this,n=t.changedTouches[0];t.stageX=n.x,t.stageY=n.y;var r=new d["default"];r.stageX=t.stageX,r.stageY=t.stageY,r.pureEvent=t,this._getObjectUnderPoint(t,function(n){e._mouseUpX=t.stageX,e._mouseUpY=t.stageY,e.willDragObject=null,e.preStageX=null,e.preStageY=null,n&&Math.abs(e._mouseDownX-e._mouseUpX)<30&&Math.abs(e._mouseDownY-e._mouseUpY)<30&&(r.type="tap",n.dispatchEvent(r))})}},{key:"_handleMouseOut",value:function(t){this.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY})}},{key:"_getObjectUnderPoint",value:function(t,e){var n=this.renderer.getHitRenderList(this);this._hitRender.clear(),this._hitRender.hit(n,t,e,n.length-1)}},{key:"update",value:function(){this.renderer.update(this)}}]),e}(u["default"]);exports["default"]=v},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.option=Object.assign({lineWidth:1},a),s.r=o,s.width=t,s.height=n,s}return o(e,t),a(e,[{key:"draw",value:function(){var t=this.width,e=this.height,n=this.r,r=n,i=0,o=t,a=0,s=t,u=e,c=0,h=e,l=0,f=0;this.beginPath(),this.moveTo(r,i),this.arcTo(o,a,s,u,n),this.arcTo(s,u,c,h,n),this.arcTo(c,h,l,f,n),this.arcTo(l,f,r,i,n),this.option.fillStyle&&(this.closePath(),this.fillStyle(this.option.fillStyle),this.fill()),this.option.strokeStyle&&(this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke())}}]),e}(u["default"]);exports["default"]=c},function(module,exports,t){function e(t){return t&&t.__esModule?t:{"default":t}}var n=t(10),r=e(n),i=t(11),o=e(i);t(18);var a=t(19),s=e(a),u=t(14),c=e(u),h=t(3),l=e(h),f=t(6),p=e(f),d=t(4),v=e(d),y=t(1),g=e(y),m=t(5),w=e(m),b=t(15),x=e(b),k=t(27),E=e(k),M=t(28),O=e(M),T=t(29),C=e(T),A=t(30),P=e(A),S=t(31),j=e(S),I=t(32),R=e(I),L=t(33),D=e(L),B=t(12);o["default"].easing={linear:r["default"].Easing.Linear.None};var U={easing:{linear:r["default"].Easing.Linear.None},util:{randomInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))}},Stage:s["default"],WeStage:c["default"],Graphics:l["default"],Bitmap:p["default"],Text:v["default"],Group:g["default"],Sprite:w["default"],ArrowPath:E["default"],Ellipse:O["default"],Button:C["default"],RoundedRect:x["default"],Rect:P["default"],Circle:j["default"],Polygon:R["default"],EquilateralPolygon:D["default"],setInterval:B.setRafInterval,clearInterval:B.clearRafInterval,caxCanvasId:0,TWEEN:r["default"],To:o["default"]};["Quadratic","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce"].forEach(function(t){var e=t.toLowerCase();U.easing[e+"In"]=r["default"].Easing[t].In,U.easing[e+"Out"]=r["default"].Easing[t].Out,U.easing[e+"InOut"]=r["default"].Easing[t].InOut,o["default"].easing[e+"In"]=r["default"].Easing[t].In,o["default"].easing[e+"Out"]=r["default"].Easing[t].Out,o["default"].easing[e+"InOut"]=r["default"].Easing[t].InOut}),module.exports=U},function(module,exports){function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(n){try{return u.call(null,e,0)}catch(n){return u.call(this,e,0)}}}function r(t){if(c===clearTimeout)return clearTimeout(t);if((c===e||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(n){try{return c.call(null,t)}catch(n){return c.call(this,t)}}}function i(){p&&l&&(p=!1,l.length?f=l.concat(f):d=-1,f.length&&o())}function o(){if(!p){var t=n(i);p=!0;for(var e=f.length;e;){for(l=f,f=[];++d<e;)l&&l[d].run();d=-1,e=f.length}l=null,p=!1,r(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,c,h=module.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(n){u=t}try{c="function"==typeof clearTimeout?clearTimeout:e}catch(n){c=e}}();var l,f=[],p=!1,d=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new a(t,e)),1!==f.length||p||n(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.prependListener=s,h.prependOnceListener=s,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(module,exports,t){function e(t){return t&&t.__esModule?t:{"default":t}}var n=t(11),r=e(n);r["default"].extend("rubber",[["to",["scaleX",{0:1.25,1:300}],["scaleY",{0:.75,1:300}]],["to",["scaleX",{0:.75,1:100}],["scaleY",{0:1.25,1:100}]],["to",["scaleX",{0:1.15,1:100}],["scaleY",{0:.85,1:100}]],["to",["scaleX",{0:.95,1:150}],["scaleY",{0:1.05,1:150}]],["to",["scaleX",{0:1.05,1:100}],["scaleY",{0:.95,1:100}]],["to",["scaleX",{0:1,1:250}],["scaleY",{0:1,1:250}]]]),r["default"].extend("bounceIn",[["to",["scaleX",{0:0,1:0}],["scaleY",{0:0,1:0}]],["to",["scaleX",{0:1.35,1:200}],["scaleY",{0:1.35,1:200}]],["to",["scaleX",{0:.9,1:100}],["scaleY",{0:.9,1:100}]],["to",["scaleX",{0:1.1,1:100}],["scaleY",{0:1.1,1:100}]],["to",["scaleX",{0:.95,1:100}],["scaleY",{0:.95,1:100}]],["to",["scaleX",{0:1,1:100}],["scaleY",{0:1,1:100}]]]),r["default"].extend("flipInX",[["to",["rotateX",{0:-90,1:0}]],["to",["rotateX",{0:20,1:300}]],["to",["rotateX",{0:-20,1:300}]],["to",["rotateX",{0:10,1:300}]],["to",["rotateX",{0:-5,1:300}]],["to",["rotateX",{0:0,1:300}]]]),r["default"].extend("zoomOut",[["to",["scaleX",{0:0,1:400}],["scaleY",{0:0,1:400}]]])},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),c=e(13),h=n(c),l=e(25),f=n(l),p=e(7),d=n(p),v=e(14),y=n(v),g=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),s=arguments.length;if(a.isWegame="undefined"!=typeof wx&&wx.createCanvas,0===s)a.canvas=wx.createCanvas(),a.disableMoveDetection=!0;else{if(4===s){var u;return u=new y["default"](arguments[0],arguments[1],arguments[2],arguments[3]),i(a,u)}1===s?a.canvas="string"==typeof t?document.querySelector(t):t:(a.renderTo="string"==typeof o?document.querySelector(o):o,"CANVAS"===a.renderTo.tagName?(a.canvas=a.renderTo,a.canvas.width=t,a.canvas.height=n):(a.canvas=document.createElement("canvas"),a.canvas.width=t,a.canvas.height=n,a.renderTo.appendChild(a.canvas))),a._boundingClientRect=a.canvas.getBoundingClientRect(),a.offset=a._getOffset(a.canvas)}return a.renderer=new h["default"](a.canvas),a.isWegame?(wx.onTouchStart(function(t){return a._handleMouseDown(t)}),wx.onTouchMove(function(t){return a._handleMouseMove(t)}),wx.onTouchEnd(function(t){return a._handleMouseUp(t)})):(a.canvas.addEventListener("click",function(t){return a._handleClick(t)}),a.canvas.addEventListener("mousedown",function(t){return a._handleMouseDown(t)}),a.canvas.addEventListener("mousemove",function(t){return a._handleMouseMove(t)}),a.canvas.addEventListener("mouseup",function(t){return a._handleMouseUp(t)}),a.canvas.addEventListener("mouseout",function(t){return a._handleMouseOut(t)}),a.canvas.addEventListener("touchstart",function(t){return a._handleMouseDown(t)}),a.canvas.addEventListener("touchmove",function(t){return a._handleMouseMove(t)}),a.canvas.addEventListener("touchend",function(t){return a._handleMouseUp(t)}),a.canvas.addEventListener("dblclick",function(t){return a._handlDblClick(t)})),a.borderTopWidth=0,a.borderLeftWidth=0,a.hitAABB=!1,a._hitRender=new f["default"],a._overObject=null,a._scaleX=1,a._scaleY=1,a._mouseDownX=0,a._mouseDownY=0,a._mouseUpX=0,a._mouseUpY=0,a.willDragObject=null,a.preStageX=null,a.preStageY=null,a.width=a.canvas.width,a.height=a.canvas.height,a}return o(e,t),a(e,[{key:"_handlDblClick",value:function(t){this._getObjectUnderPoint(t)}},{key:"_handleClick",value:function(t){Math.abs(this._mouseDownX-this._mouseUpX)<20&&Math.abs(this._mouseDownY-this._mouseUpY)<20&&this._getObjectUnderPoint(t)}},{key:"_handleMouseDown",value:function(t){this.offset=this._getOffset(this.canvas);var e=this._getObjectUnderPoint(t);this.willDragObject=e,this._mouseDownX=t.stageX,this._mouseDownY=t.stageY,this.preStageX=t.stageX,this.preStageY=t.stageY}},{key:"scaleStage",value:function(t,e){this._scaleX=t,this._scaleY=e}},{key:"_handleMouseUp",value:function(t){var e=this._getObjectUnderPoint(t);this._computeStageXY(t),this._mouseUpX=t.stageX,this._mouseUpY=t.stageY;var n=new d["default"];n.stageX=t.stageX,n.stageY=t.stageY,n.pureEvent=t,this.willDragObject=null,this.preStageX=null,this.preStageY=null,e&&Math.abs(this._mouseDownX-this._mouseUpX)<30&&Math.abs(this._mouseDownY-this._mouseUpY)<30&&(n.type="tap",e.dispatchEvent(n))}},{key:"_handleMouseOut",value:function(t){this._computeStageXY(t),this.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY})}},{key:"_handleMouseMove",value:function(t){if(!this.disableMoveDetection){var e=this._getObjectUnderPoint(t),n=new d["default"];n.stageX=t.stageX,n.stageY=t.stageY,n.pureEvent=t,this.willDragObject&&(n.type="drag",n.dx=n.stageX-this.preStageX,n.dy=n.stageY-this.preStageY,this.preStageX=n.stageX,this.preStageY=n.stageY,this.willDragObject.dispatchEvent(n)),e?null===this._overObject?(n.type="mouseover",e.dispatchEvent(n),this._overObject=e,this._setCursor(e)):e.id!==this._overObject.id?(this._overObject.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY}),n.type="mouseover",e.dispatchEvent(n),this._setCursor(e),this._overObject=e):(n.type="mousemove",e.dispatchEvent(n),n.type="touchmove",e.dispatchEvent(n)):this._overObject&&(n.type="mouseout",this._overObject.dispatchEvent(n),this._overObject=null,this._setCursor({cursor:"default"}))}}},{key:"_setCursor",value:function(t){t.cursor?this.canvas.style.cursor=t.cursor:t.parent&&this._setCursor(t.parent)}},{key:"_getObjectUnderPoint",value:function(t){return this._computeStageXY(t),this.hitAABB?this._hitRender.hitAABB(this,t):this._hitRender.hitPixel(this,t)}},{key:"_computeStageXY",value:function(t){if(this._boundingClientRect=this.isWegame?{left:0,top:0}:this.canvas.getBoundingClientRect(),t.touches||t.changedTouches){var e=t.touches[0]||t.changedTouches[0];e&&(t.stageX=e.pageX-this.offset[0],t.stageY=e.pageY-this.offset[1])}else t.stageX=(t.clientX-this._boundingClientRect.left-this.borderLeftWidth)/this._scaleX,t.stageY=(t.clientY-this._boundingClientRect.top-this.borderTopWidth)/this._scaleY}},{key:"_getOffset",value:function(t){if(this.isWegame)return[0,0];var e=0,n=0;if(!document.documentElement.getBoundingClientRect||!t.getBoundingClientRect){for(;t.offsetParent;)e+=t.offsetTop,n+=t.offsetLeft,t=t.offsetParent;return[n,e]}var r=t.getBoundingClientRect();return n=r.left,e=r.top,[n+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),e+Math.max(document.documentElement.scrollTop,document.body.scrollTop)]}},{key:"update",value:function(){this.renderer.update(this)}},{key:"on",value:function(t,e){var n=this;this.canvas.addEventListener(t,function(t){n._computeStageXY(t),e(t)})}},{key:"off",value:function(t,e){this.canvas.removeEventListener(t,e)}}]),e}(u["default"]);exports["default"]=g},function(module,exports,t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=.017453292519943295,i=function(){function t(n,r,i,o,a,s){return e(this,t),this.a=null==n?1:n,this.b=r||0,this.c=i||0,this.d=null==o?1:o,this.tx=a||0,this.ty=s||0,this}return n(t,[{key:"identity",value:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this}},{key:"appendTransform",value:function(t,e,n,i,o,a,s,u,c){if(o%360)var h=o*r,l=Math.cos(h),f=Math.sin(h);else l=1,f=0;return a||s?(a*=r,s*=r,this.append(Math.cos(s),Math.sin(s),-Math.sin(a),Math.cos(a),t,e),this.append(l*n,f*n,-f*i,l*i,0,0)):this.append(l*n,f*n,-f*i,l*i,t,e),(u||c)&&(this.tx-=u*this.a+c*this.c,this.ty-=u*this.b+c*this.d),this}},{key:"append",value:function(t,e,n,r,i,o){var a=this.a,s=this.b,u=this.c,c=this.d;return this.a=t*a+e*u,this.b=t*s+e*c,this.c=n*a+r*u,this.d=n*s+r*c,this.tx=i*a+o*u+this.tx,this.ty=i*s+o*c+this.ty,this}},{key:"initialize",value:function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this}},{key:"setValues",value:function(t,e,n,r,i,o){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=o||0,this}},{key:"invert",value:function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this}},{key:"copy",value:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}}]),t}();exports["default"]=i},function(module,exports,t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r="mouseout",i=function(){function t(){e(this,t),this._listeners=null,this._captureListeners=null}return n(t,[{key:"addEventListener",value:function(t,e,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[t];return i&&this.removeEventListener(t,e,n),i=r[t],i?i.push(e):r[t]=[e],e}},{key:"removeEventListener",value:function(t,e,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[t];i&&i.every(function(t,n){return t!==e||(i.splice(n,1),!1)})}}},{key:"on",value:function(t,e,n){this.addEventListener(t,e,n)}},{key:"off",value:function(t,e,n){this.removeEventListener(t,e,n)}},{key:"dispatchEvent",value:function(t){if(t.type!==r&&this.parent){for(var e=this,n=[e];e.parent;)n.push(e=e.parent);var i,o=n.length;for(i=o-1;i>=0&&!t.propagationStopped;i--)n[i]._dispatchEvent(t,0);for(i=0;i<o&&!t.propagationStopped;i++)n[i]._dispatchEvent(t,1)}else this._dispatchEvent(t,0),this._dispatchEvent(t,1)}},{key:"_dispatchEvent",value:function(t,e){var n=this;if(t.target=this,this._captureListeners&&0===e){var r=this._captureListeners[t.type];r&&r.forEach(function(e){e.call(n,t)})}if(this._listeners&&1===e){var i=this._listeners[t.type];i&&i.forEach(function(e){e.call(n,t)})}}}]),t}();exports["default"]=i},function(module,exports,t){Object.defineProperty(exports,"__esModule",{value:!0});var e={};e._nextID=0,e.get=function(){return e._nextID++},exports["default"]=e},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(3),u=n(s),c=e(8),h=n(c),l=e(5),f=n(l),p=e(6),d=n(p),v=e(4),y=n(v),g=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return 3===arguments.length?(a.ctx=t,a.width=n,a.height=o):(a.ctx=t.getContext("2d"),a.width=t.width,a.height=t.height),a}return o(e,t),a(e,[{key:"render",value:function(t){var e=this.ctx,n=t.clipGraphics;if(e.save(),e.globalCompositeOperation=t.complexCompositeOperation,e.globalAlpha=t.complexAlpha,n&&(e.beginPath(),n._matrix.copy(t._matrix),n._matrix.appendTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.originX,n.originY),e.setTransform(n._matrix.a,n._matrix.b,n._matrix.c,n._matrix.d,n._matrix.tx,n._matrix.ty),n.render(e),e.clip(t.clipRuleNonzero?"nonzero":"evenodd")),e.setTransform(t._matrix.a,t._matrix.b,t._matrix.c,t._matrix.d,t._matrix.tx,t._matrix.ty),t.cacheCanvas)e.drawImage(t.cacheCanvas,0,0);else if(t instanceof u["default"])t.render(e);else if(t instanceof f["default"]&&t.rect){t.updateFrame();var r=t.rect;e.drawImage(t.img,r[0],r[1],r[2],r[3],0,0,r[2],r[3])}else if(t instanceof d["default"]&&t.rect){var i=t.rect;e.drawImage(t.img,i[0],i[1],i[2],i[3],0,0,i[2],i[3])}else t instanceof y["default"]&&(e.font=t.font,e.fillStyle=t.color,e.textBaseline=t.baseline,e.fillText(t.text,0,0));e.restore()}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}}]),e}(h["default"]);exports["default"]=g},function(module,exports){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(n){"object"===("undefined"==typeof window?"undefined":t(window))&&(e=window)}module.exports=e},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),c=e(3),h=n(c),l=e(8),f=n(l),p=e(7),d=n(p),v=e(5),y=n(v),g=e(6),m=n(g),w=e(4),b=n(w),x=function(t){
function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return"undefined"!=typeof wx&&wx.createCanvas?t.canvas=wx.createCanvas():t.canvas=document.createElement("canvas"),t.canvas.width=1,t.canvas.height=1,t.ctx=t.canvas.getContext("2d"),t.disableEvents=["mouseover","mouseout","mousemove","touchmove"],t}return o(e,t),a(e,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"hitAABB",value:function(t,e,n){for(var r=t.children.slice(0),i=r.length,o=i-1;o>=0;o--){var a=r[o],s=this._hitAABB(a,e,n);if(s)return s}}},{key:"_hitAABB",value:function(t,e,n){if(t.isVisible())if(t instanceof u["default"])for(var r=t.children.slice(0),i=r.length,o=i-1;o>=0;o--){var a=r[o],s=this._hitAABB(a,e);if(s)return s}else if(t.AABB&&this.checkPointInAABB(e.stageX,e.stageY,t.AABB))return this._dispatchEvent(t,e),t}},{key:"checkPointInAABB",value:function(t,e,n){var r=n[0];if(t<r)return!1;var i=n[1];if(e<i)return!1;var o=r+n[2];if(t>o)return!1;var a=i+n[3];return!(e>a)}},{key:"hitPixel",value:function(t,e,n){for(var r=this.ctx,i=t._hitMatrix,o=t.children.slice(0),a=o.length,s=a-1;s>=0;s--){var u=o[s];i.initialize(1,0,0,1,0,0),i.appendTransform(t.x-e.stageX,t.y-e.stageY,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY),r.save();var c=this._hitPixel(u,e,i,n);if(r.restore(),c)return c}}},{key:"_hitPixel",value:function(t,e,n,r){if(t.isVisible()){var i=this.ctx;if(i.clearRect(0,0,2,2),n?t._hitMatrix.initialize(n.a,n.b,n.c,n.d,n.tx,n.ty):t._hitMatrix.initialize(1,0,0,1,0,0),n=t._hitMatrix,n.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY),t instanceof u["default"])for(var o=t.children.slice(0),a=o.length,s=a-1;s>=0;s--){i.save();var c=this._hitPixel(o[s],e,n,r);if(c)return c;i.restore()}else{var l=t.clipGraphics;if(l&&(i.beginPath(),l._matrix.copy(n),l._matrix.appendTransform(l.x,l.y,l.scaleX,l.scaleY,l.rotation,l.skewX,l.skewY,l.originX,l.originY),i.setTransform(l._matrix.a,l._matrix.b,l._matrix.c,l._matrix.d,l._matrix.tx,l._matrix.ty),l.render(i),i.clip(t.clipRuleNonzero?"nonzero":"evenodd")),i.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),t.cacheCanvas)i.drawImage(t.cacheCanvas,0,0);else if(t instanceof h["default"])i.globalCompositeOperation=t.complexCompositeOperation,i.globalAlpha=t.complexAlpha,t.render(i);else if(t instanceof y["default"]&&t.rect){i.globalCompositeOperation=t.complexCompositeOperation,i.globalAlpha=t.complexAlpha,t.updateFrame();var f=t.rect;i.drawImage(t.img,f[0],f[1],f[2],f[3],0,0,f[2],f[3])}else if(t instanceof m["default"]&&t.rect){i.globalCompositeOperation=t.complexCompositeOperation,i.globalAlpha=t.complexAlpha;var p=t.rect;i.drawImage(t.img,p[0],p[1],p[2],p[3],0,0,p[2],p[3])}else t instanceof b["default"]&&(i.globalCompositeOperation=t.complexCompositeOperation,i.globalAlpha=t.complexAlpha,i.font=t.font,i.fillStyle=t.color,i.textBaseline=t.baseline,i.fillText(t.text,0,0))}return i.getImageData(0,0,1,1).data[3]>1?(this._dispatchEvent(t,e),t):void 0}}},{key:"_dispatchEvent",value:function(t,e){if(this.disableEvents.indexOf(e.type)===-1){var n=new d["default"];n.stageX=e.stageX,n.stageY=e.stageY,n.pureEvent=e,n.type=e.type,t.dispatchEvent(n)}}}]),e}(f["default"]);exports["default"]=x},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(3),u=n(s),c=e(8),h=n(c),l=e(7),f=n(l),p=e(5),d=n(p),v=e(6),y=n(v),g=e(4),m=n(g),w=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.ctx=t,a._isWeapp=!0,a._component=n,a._hitCanvasId=o+"Hit",a.disableEvents=["mouseover","mouseout","mousemove","touchmove"],a}return o(e,t),a(e,[{key:"clear",value:function(){this.ctx.clearRect(0,0,2,2)}},{key:"hit",value:function(t,e,n,r){var i=this,o=this.ctx,a=t[r],s=a._hitMatrix.initialize(1,0,0,1,0,0);if(o.save(),s.appendTransform(a.x-e.stageX,a.y-e.stageY,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.originX,a.originY),o.globalCompositeOperation=a.complexCompositeOperation,o.globalAlpha=a.complexAlpha,o.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),a instanceof u["default"])a.render(o);else if(a instanceof d["default"]&&a.rect){a.updateFrame();var c=a.rect;o.drawImage(a.img,c[0],c[1],c[2],c[3],0,0,c[2],c[3])}else if(a instanceof y["default"]&&a.rect){var h=a.rect;o.drawImage(a.img,h[0],h[1],h[2],h[3],0,0,h[2],h[3])}else a instanceof m["default"]&&(o.font=a.font,o.fillStyle=a.color,o.fillText(a.text,0,0));o.restore(),r--,o.draw(!1,function(){wx.canvasGetImageData({canvasId:i._hitCanvasId,x:0,y:0,width:1,height:1,success:function(o){o.data[3]>1?(i._dispatchEvent(a,e),n(a)):r>-1&&i.hit(t,e,n,r)}},i._component)})}},{key:"_dispatchEvent",value:function(t,e){if(this.disableEvents.indexOf(e.type)===-1){var n=new f["default"];n.stageX=e.stageX,n.stageY=e.stageY,n.pureEvent=e,n.type=e.type,t.dispatchEvent(n)}}}]),e}(h["default"]);exports["default"]=w},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.path=t,o.option=Object.assign({strokeStyle:"black",lineWidth:1},n),o}return o(e,t),a(e,[{key:"draw",value:function(){var t=this.path;this.beginPath();var e=t.length;if(2===e)this.drawArrow(t[0].x,t[0].y,t[1].x,t[1].y,30,10);else{this.moveTo(t[0].x,t[0].y);for(var n=1;n<e-1;n++)this.lineTo(t[n].x,t[n].y);this.drawArrow(t[e-2].x,t[e-2].y,t[e-1].x,t[e-1].y,30,10)}this.stroke()}},{key:"drawArrow",value:function(t,e,n,r,i,o){var a=180*Math.atan2(e-r,t-n)/Math.PI,s=(a+i)*Math.PI/180,u=(a-i)*Math.PI/180,c=o*Math.cos(s),h=o*Math.sin(s),l=o*Math.cos(u),f=o*Math.sin(u),p=t-c,d=e-h;this.moveTo(p,d),this.moveTo(t,e),this.lineTo(n,r),p=n+c,d=r+h,this.moveTo(p,d),this.lineTo(n,r),p=n+l,d=r+f,this.lineTo(p,d),this.strokeStyle(this.option.strokeStyle),this.lineWidth(this.option.lineWidth)}}]),e}(u["default"]);exports["default"]=c},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.option=o||{},a.width=t,a.height=n,a}return o(e,t),a(e,[{key:"draw",value:function(){var t=this.width,e=this.height,n=.5522848,r=t/2*n,i=e/2*n,o=t,a=e,s=t/2,u=e/2;this.beginPath(),this.moveTo(0,u),this.bezierCurveTo(0,u-i,s-r,0,s,0),this.bezierCurveTo(s+r,0,o,u-i,o,u),this.bezierCurveTo(o,u+i,s+r,a,s,a),this.bezierCurveTo(s-r,a,0,u+i,0,u),this.option.strokeStyle&&(void 0!==this.option.lineWidth&&this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke()),this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fill())}}]),e}(u["default"]);exports["default"]=c},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=e(1),s=n(a),u=e(4),c=n(u),h=e(15),l=n(h),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.width=t.width,n.roundedRect=new l["default"](t.width,t.height,t.r),n.text=new c["default"](t.text,{font:t.font,color:t.color}),n.text.x=t.width/2-n.text.getWidth()/2*n.text.scaleX,n.text.y=t.height/2-10+5*n.text.scaleY,n.add(n.roundedRect,n.text),n}return o(e,t),e}(s["default"]);exports["default"]=f},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.width=t,a.height=n,a.option=o||{},a}return o(e,t),a(e,[{key:"draw",value:function(){this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fillRect(0,0,this.width,this.height)),this.option.strokeStyle&&(this.strokeStyle(this.option.strokeStyle),this.strokeRect(0,0,this.width,this.height))}}]),e}(u["default"]);exports["default"]=c},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.option=n||{},o.r=t,o._dp=2*Math.PI,o}return o(e,t),a(e,[{key:"draw",value:function(){this.beginPath(),this.arc(0,0,this.r,0,this._dp,!1),this.option.strokeStyle&&(void 0!==this.option.lineWidth&&this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke()),this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fill())}}]),e}(u["default"]);exports["default"]=c},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.vertex=t||[],o.options=n||{},o.strokeColor=o.options.strokeColor,o.fillColor=o.options.fillColor,o}return o(e,t),a(e,[{key:"draw",value:function(){this.clear().beginPath(),this.strokeStyle(this.strokeColor),this.moveTo(this.vertex[0][0],this.vertex[0][1]);for(var t=1,e=this.vertex.length;t<e;t++)this.lineTo(this.vertex[t][0],this.vertex[t][1]);this.closePath(),this.strokeColor&&(this.strokeStyle(this.strokeColor),this.stroke()),this.fillColor&&(this.fillStyle(this.fillColor),this.fill())}}]),e}(u["default"]);exports["default"]=c},function(module,exports,e){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":t(n))&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(0),u=n(s),c=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.num=t,a.r=n,a.options=o||{},a.strokeColor=o.strokeColor||"black",a.vertex=[],a.initVertex(),a}return o(e,t),a(e,[{key:"initVertex",value:function(){this.vertex.length=[];var t=this.num,e=this.r,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;if(t%2===0)for(r=e*Math.cos(2*Math.PI*0/t),i=e*Math.sin(2*Math.PI*0/t),this.vertex.push([r,i]),n=1;n<t;n++)o=e*Math.cos(2*Math.PI*n/t),a=e*Math.sin(2*Math.PI*n/t),this.vertex.push([o,a]);else for(r=e*Math.cos(2*Math.PI*0/t-Math.PI/2),i=e*Math.sin(2*Math.PI*0/t-Math.PI/2),this.vertex.push([r,i]),n=1;n<t;n++)o=e*Math.cos(2*Math.PI*n/t-Math.PI/2),a=e*Math.sin(2*Math.PI*n/t-Math.PI/2),this.vertex.push([o,a])}},{key:"draw",value:function(){this.beginPath(),this.strokeStyle(this.strokeColor),this.moveTo(this.vertex[0][0],this.vertex[0][1]);for(var t=1,e=this.vertex.length;t<e;t++)this.lineTo(this.vertex[t][0],this.vertex[t][1]);this.closePath(),this.stroke(),this.options.fillStyle&&(this.fillStyle(this.options.fillStyle),this.fill())}}]),e}(u["default"]);exports["default"]=c}])})},{}],3:[function(require,module,exports){(function(Buffer){"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){if("function"==typeof define&&define.amd)define("tpler",[],e);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports)module.exports=e();else if(t)t.tpler=e();else{e()}}(void 0,function(){var inBrowser="undefined"!=typeof window;console.log("before inBrowser:"+inBrowser);var isSupportTouch=!!inBrowser&&function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}(),type=function(t){if(null===t)return"null";var e=Object.prototype.toString.call(t),n=e.match(/\[object (.*?)\]/)[1].toLowerCase();return"number"===n?isNaN(t)?"nan":isFinite(t)?n:"infinity":n},extend=function t(e){var n=arguments.length;n>1&&(e=e||{});for(var r=1;r<n;r++){var i=arguments[r];if(i)for(var o in i)i.hasOwnProperty(o)&&("array"===type(i[o])?e[o]=t([],i[o]):"object"===type(i[o])?e[o]=t({},i[o]):e[o]=i[o])}return e},createClass=function(){function t(t,e){for(var n in e)if(t.hasOwnProperty(n))console.log(_.type(t)+" hasOwnProperty "+n);else{var r={key:n,value:e[n],enumerable:!1,configurable:!0,writable:!0};Object.defineProperty(t,n,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),screen={x:100,y:100},envt;if(inBrowser){var ua=window.navigator.userAgent.toLowerCase(),isIE=/msie|trident/.test(ua),isIE9=!!~ua.indexOf("msie 9.0"),isEdge=!!~ua.indexOf("edge/"),isChrome=/chrome\/\d+/.test(ua)&&!isEdge,weixin=/MicroMessenger/i.test(ua),isWxMiniProgram=/miniprogram/i.test(window.__wxjs_environment),env=function(){var t={},e=ua.match(/(Android)[\s\/]+([\d\.]+)/),n=ua.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),r=(ua.match(/(Windows\s+Phone)\s([\d\.]+)/),/WebKit\/[\d.]+/i.test(ua)),i=!!n&&(navigator.standalone?r:/Safari/i.test(ua)&&!/CriOS/i.test(ua)&&!/MQQBrowser/i.test(ua));return e&&(t.isAndroid=!0,t.android=!0,t.version=e[2]),n&&(t.isIOS=!0,t.ios=!0,t.version=n[2].replace(/_/g,"."),t.ios7=/^7/.test(t.version),t.ios11=/^11/.test(t.version),"iPad"===n[1]?t.ipad=!0:"iPhone"===n[1]?t.iphone=!0:"iPod"===n[1]&&(t.ipod=!0)),r&&(t.webkit=!0),i&&(t.safari=!0),t}();envt=extend(env,{inBrowser:inBrowser,ua:ua,isIE:isIE,isIE9:isIE9,isEdge:isEdge,isChrome:isChrome,weixin:weixin,isWxMiniProgram:isWxMiniProgram}),screen={x:document.documentElement.clientWidth,y:document.documentElement.clientHeight}}var _={envt:envt,screen:screen,type:type,extend:extend,createClass:createClass,isElement:function(t){return/html.*?element/i.test(this.type(t))},isDocument:function(t){return/document/i.test(this.type(t))},objectName:function(t){return _.isUndefined(t)?_.isUndefined(t):_.isNull(t)?_.isNull(t):t.prototype.constructor?t.prototype.constructor.name:t.__proto__.constructor.name},has:function(t,e){if(_.isObject(t)){if(_.isNumber(+e))return t.hasOwnProperty(""+e);for(var n=e.split("."),r=t;e=n.shift();){if(!r||!r.hasOwnProperty(e))return!1;r=r[e]}return!0}return!(!_.isArray(t)&&!_.isString(t))&&!!~t.indexOf(e)},isJQuery:function(t){return!!t&&!!t.jquery},keys:function(t){if(!_.isObject(t))return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&(e[e.length]=n);return e},equal:function(t,e){if(t===e)return!0;if(_.isArray(t)&&_.isArray(e))return t.toString()===e.toString();if(_.isObject(t)&&_.isObject(e)){if(_.keys(t).length!==_.keys(e).length)return!1;for(var n in t)if(!_.equal(t[n],e[n]))return!1;return!0}return _.type(t)===_.type(e)&&t===e},text:function(t){if(_.isElement(t))return t.innerText},html:function(t){if(_.isElement(t))return t.innerHTML},fast:function(){for(var t=arguments.length,e=new Array(t),n=1e4;t--;)e[t]=arguments[t];var r=e[e.length-1];_.isNumber(r)&&(n=r,e.pop());var i=function(t,n){var r="run "+t.name+"{} "+n+" time"+(n>1?"s":"");for(console.time(r);n--;)t.apply(this,e);console.timeEnd(r)};e.forEach(function(t){t&&i.call(this,t,n)})},pos:function e(t,n){function r(t,e,n){_.isDocument(n)&&(n=document.doctype?window.document.documentElement:document.body),this.x=t,this.y=e,this.time=+new Date,this.el=n,this.width=n.clientWidth,this.height=n.clientHeight,this.scrollTop=n.scrollTop,this.scrollHeight=n.scrollHeight,this.offsetHeight=n.offsetHeight,this.top=e,this.left=t,this.right=t+this.width,this.bottom=e+this.height}var i;if(_.isElement(n)||_.isTouchEvent(t)||_.isMouseEvent(t)?i=_.pos(n):_.isObject(n)&&"Postion"===_.objectName(n)&&(i=n),_.isElement(t)){var o=function(t){for(var e=new r(t.offsetLeft,t.offsetTop,t),n=t.offsetParent;n;)e.x+=n.offsetLeft,e.y+=n.offsetTop,n=n.offsetParent;return i&&(e.x-=i.x,e.y-=i.y),e},a=t;return o(a)}if(_.isTouchEvent(t)||_.isMouseEvent(t)){var s,u,c=t,a=c.currentTarget,h=c.touches&&c.touches.length>0?c.touches:c.changedTouches;if(h&&0!==h.length){var e=h[0];s=e.pageX,u=e.pageY}else s=c.clientX,u=c.clientY;return i&&(s-=i.x,u-=i.y),new r(s,u,a)}if(_.isString(t))return _.pos(_.query(t))},drag:function(t){toucher({el:t,type:"drag"})},parseUrl:function(t){var e,n,r,i={},o=location.hash,a=o,t=t||window.location.href;t.replace(/http[s]?:\/\/([^:]*?)(?::(\d+))?\//,function(t,i,o){e=t.substring(0,t.length-1),n=i,r=o});var s=function(){var e=t.match(/#(.*)$/);return e?e[1]:""},u=function(t){return decodeURI(t.replace(/%25/g,"%2525"))},c=function(){var t=location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},h=function(){var t=u(location.pathname+c()).slice(0);return"/"===t.charAt(0)?t.slice(1):t},l=h();return o=s(),t.replace(/[?&](.+?)=([^&#]*)/g,function(_,t,e){i[t]=decodeURI(e)}),o&&(o=o.length>1?o.replace(/#+/g,"#"):"",a=o.replace(/#/g,"")),{params:i,hash:o,route:a,path:l,domain:e,host:n,port:r}},guid:1,uId:function(){return Math.random().toString(16).slice(2)},random:function(t,e,n){if(_.isArray(t))return t[Math.random()*t.length<<0];if(_.isNumber(t))return Math.random()*t<<0;for(var r=n||"_",e=e||6,t=t||"abcdefghijklmnopqrstuvwxyz",i=0;i<e;i++)r+=t.charAt(Math.random()*t.length<<0);return r},between:function(t,e,n){var r=arguments.length;if(3===r)return _.min(e,_.max(t,n));if(1===r)return t*Math.random()<<0;if(String(t).indexOf(".")===-1)return t+(e-t+1)*Math.random()<<0;var i=String(t).split(".")[1].length;return+(t+(e-t)*Math.random()).toFixed(i)},grpstats:function(t){var e={};return t.forEach(function(t){_.has(e,t)?e[t]+=1:e[t]=1}),e},autoid:function(t,e){var n=function(t){return _.isDocument(t)?t:(_.isElement(t)&&(e?t.setAttribute("id",_.random()):_.isEmpty(t.id)&&t.setAttribute("id",_.random())),t)};return _.isArray(t)?t.map(function(t){return n(t)}):n(t)},jqToEl:function(t,e){if(_.isJQuery(t)){var n=[];return t.each(function(t,r){e?n[n.length]=e(r):n[n.length]=r}),1===n.length?n[0]:n}},query:function(t){for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];if(n.length>1&&(t=""+n),_.isWindow(t)||_.isDocument(t))return t;if(_.isFunction(t))return t(),[];var r=function(t){if(_.isElement(this)&&(_.autoid(this),this.id)){var e=t.split(","),n="#"+this.id;t=n+e.join(","+n)+","+n+" "+e.join(","+n+" ")}return t};if(_.isElement(t)){if(_.autoid(t),!_.isElement(this))return t;t="#"+t.id,t=r.call(this,t)}else{if(_.isArray(t))return t.map(function(t){return _.query(t)});if(_.isJQuery(t))return _.jqToEl(t);t=r.call(this,t)}try{var i=document.querySelectorAll(t),n=Array.prototype.slice.call(i),e=n.length;return 0===e?[]:1===e?_.autoid(n[0]):_.autoid(n)}catch(o){console.log(o);var a=t.split(":");return a.length>1?_.query(a[0]).filter(a[1]):[]}},json:function json(str){if(_.isEmpty(str))return{};try{return JSON.parse(str)}catch(e1){console.log(e1);try{return eval("("+str+")")}catch(e2){return console.log(e2),e2}}},capitalize:function(t){var e=Array.prototype.slice.call(arguments),n=e.length;return n>1?_.capitalize.call(this,e):_.isArray(t)?t.map(function(t){return _.capitalize(t)}):(t=""+t,t.substring(0,1).toUpperCase()+t.substring(1))},camelCase:function(t){var e=Array.prototype.slice.call(arguments),n=e.length;return n>1?e[0]+_.capitalize(e.slice(1)).join(""):_.isArray(t)?t[0]+_.capitalize(t.slice(1)).join(""):e[0]},camel2underscode:function(t){return t.match(/^[a-z][a-z0-9]+|[A-Z][a-z0-9]*/g).join("_").toLowerCase()},copy:function(t,e){var n=document.createRange();n.selectNode(t);var r=window.getSelection();r.rangeCount>0&&r.removeAllRanges(),r.addRange(n);try{document.execCommand("copy",e||!1,null)?console.log("copy ok"):console.log("copy fail")}catch(i){console.log(i),console.log("unable to copy")}},stringify:function(t,e){var n,r,i="";if(_.isUndefined(t))i="undefined";else if(_.isBoolean(t))i=t.valueOf()?"true":"false";else if(_.isString(t))i='"'+t+'"';else if(_.isNumber(t))i=t.valueOf();else if(_.isDocument(t))i="#document";else if(_.isElement(t))i=t.tagName.toLowerCase(),i+=t.id?"#"+t.id:"",i+=t.className?"."+t.className.replace(/\s+/g,"."):"";else if(_.isFunction(t))i=t.prototype?"function "+t.prototype.constructor.name+"(){}":"function(){}";else if(_.isArray(t))i="["+t.map(function(t){return _.stringify(t)})+"]";else if(_.isMouseEvent(t))i="MouseEvent",i+="("+_.stringify(t.target)+")";else if(_.isTouchEvent(t))i="TouchEvent",i+="("+_.stringify(t.target)+")";else if(_.isNull(t))i+="null";else if(_.isDate(t))i=_.time(t).format();else{if(_.isDOMRect(t))return _.stringify(t.toJSON());if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var o=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o.push('"'+n+'":'),r=t[n],_.isArray(r)?r.forEach(function(t){o.push(_.stringify(t))}):o.push(_.stringify(r)),o.push(","));o.pop(),i="{"+o.join("")+"}"}else i=_.isInfinity(t)?"Infinity":"unknowtype"}return i},toJSONString:function(t){return _.isObject(t)?JSON.stringify(t):t},isHtml:function(t){return/<(\S*?) [^>]*>.*?<\/\1>|<.*?\/?>/.test(t)},preHtml:function(t){return t.replace(/\n/g,"<br>").replace(/\r/g,"<br>")},getBody:function(t){var e=t.match(/<body[^>]*>([\s\S]*)<\/body>/i);return e&&e.length>1?e[1]:t},markdown:function(t){_.isEmpty(t)&&(t='#   ## 2  \n**  ****  __ \n***___---  \n> 1 \n> 2 \n* 1 \n* 2 \n- 1 \n- 2 \n+ 1\n+ 2 \n 1. 1\n2. 2 \n [1](www.xxx.com) [2](www.xxx.com) [3](www.xxx.com) [4](www.xxx.com) [5](www.xxx.com)\n[Ivan Dementev][]\n[Ivan Dementev]: https://github.com/DiVAN1x \n||1|2|\n|---|---|---|\n||||\n`for(var i=0;i<10,i++) if(i>=5) alert("")`',console.log(t.replace(/\r?\n/g,"\\r\\n\r\n")));for(var e,n,r=[{tag:"blockquote",reg:/(>\s.+\r?\n)+/g},{tag:"table",reg:/(\|.+\|\r?\n)+/g},{tag:"h6",reg:/#{6}\s(.+)/g},{tag:"h5",reg:/#{5}\s(.+)/g},{tag:"h4",reg:/#{4}\s(.+)/g},{tag:"h3",reg:/#{3}\s(.+)/g},{tag:"h2",reg:/#{2}\s(.+)/g},{tag:"h1",reg:/#{1}\s(.+)/g},{tag:"img",reg:/!\[(.*?)\]\((.*?)\)/g},{tag:"marklink",reg:/\[(.*?)\]\[(.*?)\]/},_defineProperty({tag:"ref"},"tag",/\[.*?\]:\s+(https?:\/\/.+)/),{tag:"a",reg:/\[(.*?)\]\((.*?)\)|(https?:\/\/.+)/g},{tag:"hr",reg:/[\*|\-|_]{3,}/g},{tag:"strong",reg:/\*\*(.*?)\*\*/g},{tag:"em",reg:/\*(.*?)\*/g},{tag:"i",reg:/[\s\n]_(.*?)_[\s|\n]/g},{tag:"ul",reg:/(?:-\s[\s\S]*)?-\s.*(\r?\n|$)/g},{tag:"ul",reg:/(?:\*\s[\s\S]*)?\*\s.*(\r?\n|$)/g},{tag:"ol",reg:/(\+\s.+\r?\n)+|(\d\.\s.+\r?\n)+/g},{tag:"code",reg:/`([\s\S]+)`/g},{tag:"br",reg:/\r?\n/g}],i=function(t,e){var n=[];n.push("<"),n.push(t);for(var r in e)n.push(" "+r+'="'+e[r]+'"');return n.push(">"),n.join("")},o=function(t){return"</"+t+">"},a=function(t,e,n){return e?i(t,n)+e+o(t):i(t,n)},s=function h(t,e){var n=this;return this.replace(e,function(e,r,i,o){switch(t){case"ref":return"";case"marklink":i=i||r;var s=new RegExp("\\["+i+"\\]:(.*?)\\r?\\n","i"),o=n.match(s)[1];return n=n.replace(s,""),a("a",r,o);case"img":return a(t,null,{alt:r,src:i});case"a":return a(t,r||e,{href:i||o});case"br":case"hr":return a(t);case"blockquote":return e=_.escape.call(e),a(t,e);case"ul":return e=h.call(e,"li",/[\*-]\s([\s\S]+?)(?:\n|$)/g),a(t,e);case"ol":return e=h.call(e,"li",/[(?:\d+\.)|\+]\s(.+)\r?\n/g),a(t,e);case"tr":var u=r.split("|").join("</td><td>");return u=a("td",u),a("tr",u);case"table":e=e.replace(/\|.*[\-]{3,}.*\|[\r?\n]/g,"");var c=h.call(e,"tr",/\|(.+)\|[\r?\n]/g);return a(t,c);case"h1":return a(t,r);case"i":return a(t,r);case"li":return a(t,r);case"code":return r=_.escape.call(r),a(t,r);default:return a(t,r)}})},u=0,c=r.length;u<c;u++)e=r[u].reg,n=r[u].tag,t=s.call(t,n,e);return a("article",t,{"class":"markdown-body entry-content"})},isShow:function(t){return t=_.isElement(t)?t:_.query(t),t.offsetWidth>0||t.offsetHeight>0},isHide:function(t){return t=_.isElement(t)?t:_.query(t),t.offsetWidth<=0&&t.offsetHeight<=0},hasClass:function(t){var e=this;return _.isJQuery(e)&&(e=e.get(0)),!!_.isElement(e)&&!!~e.className.split(" ").indexOf(t)},addClass:function(t){var e=this,n=Array.prototype.slice.call(arguments);return 1===n.length&&t&&(n=t.split(" ")),function r(e){if(_.isString(e)&&(e=_.query(e)),_.isElement(e))e.className=_.uniq(e.className.split(" ").concat(n)).join(" ");else if(_.isJQuery(e))e.addClass(t);else if(_.isArray(e))return e.map(function(t){return r(t)});return e}(e)},removeClass:function(t){var e=this,n=Array.prototype.slice.call(arguments);return 1===n.length&&t&&(n=t.split(" ")),n.length>1&&n.forEach(function(t){_.removeClass.call(e,t)}),function r(e){if(_.isString(e)&&(e=_.query(e)),_.isElement(e)){if(e.hasClass(t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").trim()}}else if(_.isJQuery(e))e.removeClass(t);else if(_.isArray(e))return e.map(function(t){return r(t)});return e}(e)},hover:function(t,e){var n=this;return toucher([{el:n,type:"touchstart",callback:function(e,n){e.addClass(t)}},{el:n,type:"touchend",callback:function(n,r){n.removeClass(t),e&&e.call(n,r)}}]),n},tab:function(t,e){var n=this;return toucher([{el:n,type:"touchstart",callback:function(e,n){e.addClass(t).siblings().removeClass(t),_.$("#"+this.attr("target")).show().siblings().hide()}},{el:n,type:"touchend",callback:function(t,n){e&&e.call(t,n)}}]),n},slice:function(t,e){var n=Array.prototype.slice.call(arguments),r=n.length;if(2===r&&_.isArray(t)&&_.isNumber(e)){for(var i=[],o=0;o<Math.ceil(t.length/e);o++){
var a=o*e,s=a+e;i.push(t.slice(a,s))}return i}return 0===r?null:1===r?n[0]:n},hasAttr:function(t){var e=this;return _.isElement(e)?!_.isNull(e.getAttribute(t)):_.isJQuery(e)?!_.isUndefined(e.attr(t)):!!_.isString(e)&&_.hasAttr.call(_.query(e),t)},focus:function(t){t.onfocus=function(){window.setTimeout(function(){var e,n;try{window.getSelection&&document.createRange?(n=document.createRange(),n.selectNodeContents(t),n.collapse(!0),n.setEnd(t,t.childNodes.length),n.setStart(t,t.childNodes.length),e=window.getSelection(),e.removeAllRanges(),e.addRange(n)):document.body.createTextRange&&(n=document.body.createTextRange(),n.moveToElementText(t),n.collapse(!0),n.select())}catch(r){console.log(r)}},1)},t.focus()},isImgLoad:function(t){return isIE?"complete"===t.readyState:t.complete},loadImg:function(t,e){var n;if(_.isImage(t))n=t;else if(_.isCanvas(t)){var r=t;n=new Image,n.src=r.toDataURL("image/jpeg")}else n=new Image,n.src=t;_.isImgLoad(n)?e&&e.call(n,n):(addEvent("load",n,function(){e&&e.call(n,n)}),n.onerror=function(t){console.log(""+t.path[0].src)})},toDataURL:function(t,e){var n=function(t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.width,o=t.height;n.width=i,n.height=o,r.drawImage(t,0,0,i,o);var a=new Image;a.onload=function(){e&&e(a)},a.src=n.toDataURL("image/jpeg")};_.loadImg(t,n)},toCanvas:function(t,e){var n=function(t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.width,o=t.height;n.width=i,n.height=o,r.drawImage(t,0,0,i,o),e&&e(n)};_.loadImg(t,n)},cutImg:function(t,e,n,r){var e=_.isUndefined(e)?3:e,n=_.isUndefined(n)?3:n,i=function(t){var i=document.createElement("canvas"),o=i.getContext("2d"),a=t.width,s=t.height;i.width=a,i.height=s;for(var u=[],c=a/e,h=s/n,l=0,f=0;f<n;f++)for(var p=0;p<e;p++){o.drawImage(t,p*c,f*h,c,h,0,0,a,s);var d=new Image;d.src=i.toDataURL("image/jpeg"),d.width=c,d.height=h,d.className="thumbnail",d.id="_thumbnail_"+l++,u.push(d)}r&&r(u)};_.loadImg(t,i)},zipImg:function(t){var e=document.createElement("canvas"),n=t.img,r=t.width,i=t.height,o=t.quality,a=t.zoom,s=t.callback;_.loadImg(n,function(){_.isUndefined(r)&&_.isUndefined(i)&&!_.isUndefined(a)&&(r=this.width*a,i=this.height*a),e.width=r,e.height=i;var t=e.getContext("2d");t.drawImage(this,0,0,r,i);var n=new Image;n.src=e.toDataURL("image/jpeg",o),_.loadImg(n,s)})},reverse:function(t,e){var n=function(t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.width,o=t.height;n.width=i,n.height=o,r.drawImage(t,0,0);for(var a=r.getImageData(0,0,i,o),s=0;s<a.data.length;s+=4)a.data[s]=255-a.data[s],a.data[s+1]=255-a.data[s+1],a.data[s+2]=255-a.data[s+2],a.data[s+3]=255;r.putImageData(a,0,0);var u=new Image;u.src=n.toDataURL("image/jpeg"),e&&e(u)};_.loadImg(t,n)},masic:function(t,e){},timeSeq:function(t,e,n){t.forEach(function(t,r){setTimeout(function(){n&&n(t)},(e||500)*r)})},background:function(t,e){var t=_.query(t);_.loadImg(e,function(e){t.style.backgroundImage='url("'+e.src+'")'})},each:function(t,e,n){if(null==t)return t;if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t)==={})return}else for(var o=_.keys(t),r=0,i=o.length;r<i;r++)if(e.call(n,t[o[r]],o[r],t)==={})return;return t},any:function(t,e,n){e||(e=function(t){return t});var r=!1;return null==t?r:Array.prototype.some&&t.some===Array.prototype.some?t.some(e,n):(_.each(t,function(t,i,o){if(r||(r=e.call(n,t,i,o)))return{}}),!!r)},contains:function(t,e){return null!=t&&(t==e||(Array.prototype.indexOf&&t.indexOf===Array.prototype.indexOf?!!~t.indexOf(e):_.any(t,function(t){return t===e})))},size:function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},filter:function(t,e,n){var r=[];return null==t?r:Array.prototype.filter&&t.filter===Array.prototype.filter?t.filter(e,n):(_.each(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},max:function(t){var e=arguments.length;if(0===e)return 0;for(var n=new Array(e);e--;)n[e]=arguments[e];return Math.max.apply(Math,_.flatten(n))},min:function(t){var e=arguments.length;if(0===e)return 0;for(var n=new Array(e);e--;)n[e]=arguments[e];return Math.min.apply(Math,_.flatten(n))},clone:function(t){if(!_.isObject(t))return t;if(_.isArray(t))return t.slice();for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n.unshift({}),_.extend.apply(null,n)},invert:function(t){var e={};return _.keys(t).forEach(function(n){e[t[n]]=n}),e}};[{key:"hide",reverse:"show"},{key:"active",reverse:"passive"},{key:"disabled",reverse:"available"},{key:"fadeout",reverse:"fadein",type:"animate"},{key:"fadeoutup",reverse:"fadeindown",type:"animate"},{key:"fadeinup",reverse:"fadeoutdown",type:"animate"},{key:"fadeoutleft",reverse:"fadeinright",type:"animate"},{key:"fadeinleft",reverse:"fadeoutright",type:"animate"}].forEach(function(t){_[t.key]=function(){var e,n=arguments.length;if(0!==n){if(1===n)e=arguments[0];else for(e=new Array(n);n--;)e[n]=arguments[n];return"animate"===t.type&&_.removeClass.call(e,t.reverse,"hide"),_.addClass.call(e,t.key)}},_[t.reverse]=function(){var e,n=arguments.length;if(0!==n){if(1===n)e=arguments[0];else for(e=new Array(n);n--;)e[n]=arguments[n];return"animate"===t.type?(_.addClass.call(e,t.reverse),_.removeClass.call(e,t.key,"hide")):_.removeClass.call(e,t.key)}}}),["Null","Undefined","Array","String","Number","Boolean","Function","RegExp","NaN","Infinity","NodeList","Arguments","Window","TouchEvent","MouseEvent","Screen","Date","DOMRect"].forEach(function(t){_["is"+t]=function(e){return _.type(e)===t.toLowerCase()}}),_.isObject=function(t){return!!_.isElement(t)||"object"===_.type(t)},["Div","Image","Canvas"].forEach(function(t){_["is"+t]=function(e){return _.type(e)==="html"+t.toLowerCase()+"element"}}),_.isEmpty=function(t){if(null==t)return!0;if(_.isNumber(t))return!1;if(_.isDate(t))return!1;if(_.isArray(t)||_.isString(t))return 0===t.length;if(_.isElement(t))return 0===_.size(t);for(var e in t)if(_.has(t,e))return!1;return!0},_.uniq=_.unique=function(t,e,n,r){_.isFunction(e)&&(r=n,n=e,e=!1);var i=n?_.map(t,n,r):t,o=[],a=[];return _.each(i,function(n,r){(e?r&&a[a.length-1]===n:_.contains(a,n))||(a.push(n),o.push(t[r]))}),o},_.identity=function(t){return t},_.every=_.all=function(t,e,n){e||(e=_.identity);var r=!0;return null==t?r:Array.prototype.every&&t.every===Array.prototype.every?t.every(e,n):(_.each(t,function(t,i,o){if(!(r=r&&e.call(n,t,i,o)))return breaker}),!!r)},_.intersection=function(t){var e=Array.prototype.slice.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.contains(e,t)})})},_.difference=function(t){var e=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.without=function(t){return _.difference(t,Array.prototype.slice.call(arguments,1))},_.map=_.collect=function(t,e,n){var r=[];return null==t?r:Array.prototype.map&&t.map===Array.prototype.map?t.map(e,n):(_.each(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)},_.property=function(t){return function(e){return e[t]}},_.pluck=function(t,e){return _.map(t,_.property(e))},_.indexOf=function(t,e){return _.isUndefined(t)||_.isUndefined(e)?-1:_.isAarray(t)?t.indexOf(e):_.isString(t)?t.toLowerCase().indexOf(e.toLowerCase()):void 0},_.flatten=function(t,e){var n=function r(t,e,n){return t.forEach(function(t){_.isArray(t)?e?n[n.length]=t:r(t,e,n):n[n.length]=t}),n};return n(t,e,[])},_.split=function(t,e){var n=[],r=[];if(t.forEach(function(t,i){r[r.length]=t,i%e===e-1&&(n[n.length]=r,r=[])}),arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return i.unshift(n),_.split.apply(this,i)}return n},_.getVal=function(t,e){function n(t,e){if(_.isUndefined(t)||0===e.length)return"";var r=e.shift();return 0===e.length?t[r]:n(t[r],e)}return _.isArray(e)?n(t,e):n(t,e.split("."))},_.setVal=function(t,e,n){var r=function i(t,e,n,r){if(0===e.length)return t=n;if(1===e.length)return t[e[0]]=n,r||t;var o=e.shift();return t[o]=_.isObject(t[o])?t[o]:{},i(t[o],e,n,t)};return _.isArray(e)?r(t,e,n,t):r(t,e.split("."),n,t)},_.$=_.query;var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};["escape","unescape"].forEach(function(t){_[t]=function(e){return null==e?"":(""+e).replace(entityRegexes[t],function(e){return entityMap[t][e]})}}),_.toQueryPair=function(t,e){return encodeURIComponent(String(t))+"="+encodeURIComponent(String(e))},_.toQueryString=function(t){var e=[];for(var n in t)e.push(_.toQueryPair(n,t[n]));return e.join("&")},_.ajax=function(t){function e(){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){i=!1}}i||"undefined"==typeof XMLHttpRequest||(i=new XMLHttpRequest)}function n(){if(e(),i)try{i.onreadystatechange=r,"GET"===s.method?(s.data&&(t+=(~t.indexOf("?")?"&":"?")+s.data,s.data=null),i.open("GET",t,s.isAsync),i.setRequestHeader("Content-Type",s.contentType||"text/plain;charset=UTF-8"),i.send()):"POST"===s.method?(i.open("POST",t,s.isAsync),i.setRequestHeader("Content-Type",s.contentType||"application/x-www-form-urlencoded;charset=UTF-8"),i.send(s.data)):(i.open(s.method,t,s.isAsync),i.send())}catch(n){console.log(n)}}function r(){if(o)return!0;var e={},n=e.responseText=i.responseText;if(e.responseXML=i.responseXML,e.data=s.data,e.status=i.status,e.uri=t,e.arguments=s.arguments,"json"===s.dataType)try{n=e.responseJSON=JSON.parse(i.responseText)}catch(r){}if(4==i.readyState){switch(i.status){case 200:s.success.call(n,n);break;default:var a={400:"\nError Code:400!",403:"\nError Code:403!",404:"\nError Code:404!",500:"\nError Code:500!",503:"\nError Code:503!"},u=a[i.status]?a[i.status]:"\nError Code:"+i.status;console.log(u),s.error(e)}return o=!0}s.error(e);var c={0:"Uninitialized",1:"Loading",2:"Loaded",3:"Interactive",4:"Complete"};return console.log(t+" ("+c[i.readyState]+")"),!1}var i=!1,o=!1,a=0,s={method:"GET",data:null,arguments:null,success:function(){},error:function(){},complete:function(){},isAsync:!0,timeout:3e4,contentType:null,dataType:"json"},u=Array.prototype.slice.call(arguments),c=u.length;c>=2&&(_.isFunction(u[1])?_.extend(s,{success:u[1]}):_.isObject(u[1])&&(_.extend(s,u[1]),_.isObject(s.data)&&(s.data=_.toQueryString(s.data)))),c>=3&&_.isFunction(u[2])&&_.extend(s,{error:u[2]});var h=function l(){return o?void(a=0):a>=5?(console.log(""),void(a=0)):(a++,o=r(),void setTimeout(l,100*(a+1)))};n(),setTimeout(h,15)},_.get=function(t,e){_.ajax(t,e,"GET")},_.post=function(t,e){_.ajax(t,e,"POST")},_.loading=function(t,e,n){if(_.isString(t)&&(t=_.query(t)),_.isElement(t)){var r=["~oo~","^oo^","^oo~","~oo^"],i=!1,o=function a(){i||setTimeout(function(){t.query(".tip").text(r.random()),a()},100)};n&&o(),setTimeout(function(){i=!0,t.hide(),e&&e()},1e3)}},_.loadFile=function(t,e,n){var r=t.query("data-file".brackets()),i=function(t,n){_.isFunction(e)?e.call(t,t,n):t.html(n)},o=function(t,e){_.isFunction(n)&&n.call(t,t,e)};_.isElement(r)?_.ajax(r.attr("data-file"),function(t){i(r,t)},function(t){o(r,t)}):_.isArray(r)&&r.forEach(function(t){_.ajax(t.attr("data-file"),function(e){i(t,e)},function(e){o(t,e)})})},_.updateAfterImgLoad=function(t,e){function n(t){o.each(function(){if(0===this.height)return a=!1}),a?(clearTimeout(r),t()):(a=!0,r=setTimeout(function(){n(t)},500))}var r,i=_.query("#"+t),o=i.query("img"),a=!0;o&&o.length>0&&n(function(){e&&e()})},_.polyfill=function(t,e,n){for(var r=0,i=e.length;r<i;r++){var o=t[e[r]];if(_.isFunction(o))return t[e[0]]=o}return t[e[0]]=n},_.selectorMatches=function(t,e){var n=Element.prototype,r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(t){return!!~Array.prototype.slice.call(document.querySelectorAll(t)).indexOf(this)};return r.call(t,e)},_.closest=function(t){for(var e=this;e;){if(e&&_.selectorMatches(e,t))return e;e=e.parentElement}return[]};var lookupIterator=function(t){return null==t?_.identity:_.isFunction(t)?t:_.property(t)};_.sortBy=function(t,e,n){return e=lookupIterator(e),_.pluck(_.map(t,function(t,r,i){return{value:t,index:r,criteria:e.call(n,t,r,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var _time=_.time=function(){function t(e){if(!(this instanceof t))return new t(e);var n=this.date=this.constructor.toDate(e);this.year=n.getFullYear(),this.month=n.getMonth()+1,this.day=n.getDate(),this.hour=n.getHours(),this.minute=n.getMinutes(),this.second=n.getSeconds(),this.msecond=n.getMilliseconds(),this.day_of_week=0===n.getDay()?7:n.getDay(),this.time=n.getTime(),this.quarter=(n.getMonth()+3)/3<<0}return createClass(t,{format:function(t){var e=this;t=t||"yyyy-MM-dd hh:mm:ss.S";var n=(this.date,{"y+|Y+":this.year,"M+":this.month,"d+|D+":this.day,"h+|H+":this.hour,"m+":this.minute,"s+":this.second,"q+":this.quarter,S:this.msecond});return _.keys(n).forEach(function(r,i){var o=""+n[r];t=t.replace(new RegExp(r,"g"),function(t){return 0===i?o.substr(4-t.length):t[1]?e.constructor.zerofill(o):o})}),t},set:function(t){return this.constructor.isTimeString(t)&&(t=this.format("yyyy-MM-dd")+" "+t),this.constructor.toDate(t)},setCurTime:function(){return this.set(this.constructor().format("HH:mm:ss"))},add:function(t,e,n){return this.constructor.add(t,e,n)},utc:function(){return Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.msecond)},zone:function(){return(this.time-this.utc())/36e5},diff:function(t,e){return this.constructor.diff(t,this.date,e)},week:function(t){var e=0,n=t?this.constructor(t):this;if(!n)return"";var r=n.year,i=n.month-1,o=n.day,a=[31,28,30,31,30,31,31,30,31,30,31];return Math.round(r/4)===r/4&&(a[1]=29),a.forEach(function(t,n){n<=i&&(e+=o+(0===n?0:a[n-1]))}),Math.ceil(e/7)}},{toDate:function(t){return _.isDate(t)?new Date((+t)):_.isEmpty(t)?new Date:/^\d*$/.test(t)?new Date((+t)):_.isString(t)?(this.isTimeString(t)&&(t=this().format("yyyy-MM-dd")+" "+t),new Date(Date.parse(t.replace(/-/g,"/")))):t},isTimeString:function(t){return/^(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?$/.test(t)},set:function(t,e){return this.toDate(e?t+" "+e:t)},zerofill:function(t){return t=""+t,t[1]?t:"0"+t},durationFormat:function(t){var e=this;if("number"!=typeof t||t<0)return"00:00";var n=t/3600<<0;t%=3600;var r=t/60<<0;t%=60;var i=t<<0,o=[r,i];return n>0&&o.unshift(n),o.map(function(t){return e.zerofill(t)}).join(":")},shortNameMap:function(t){t=(""+t).toLowerCase();var e={y:"year",m:"month",d:"day",w:"week",h:"hour",n:"minute",min:"minute",s:"second",l:"msecond",ms:"msecond"};return t in e?e[t]:t},diff:function(t,e,n){var r=this(e),i=this(n),o=r.time-i.time,a=1e3,s=60*a,u=60*s,c=24*u;switch(this.shortNameMap(t)){case"year":result=r.year-i.year;break;case"month":result=12*(r.year-i.year)+(r.month-i.month);break;case"day":result=Math.round(o/c);break;case"hour":result=Math.round(o/u);break;case"minute":result=Math.round(o/s);break;case"second":result=Math.round(o/a);break;case"msecond":result=o;break;case"week":result=Math.round(o/c)%7;break;default:result="invalid"}return result},add:function(t,e,n){var n=this.toDate(n);switch(this.shortNameMap(t)){case"year":return new Date(n.setFullYear(n.getFullYear()+e));case"month":return new Date(n.setMonth(n.getMonth()+e));case"day":return new Date(n.setDate(n.getDate()+e));case"week":return new Date(n.setDate(n.getDate()+7*e));case"hour":return new Date(n.setHours(n.getHours()+e));case"minute":return new Date(n.setMinutes(n.getMinutes()+e));case"second":return new Date(n.setSeconds(n.getSeconds()+e));case"msecond":return new Date(n.setMilliseconds(n.getMilliseconds()+e))}return n}})}(),_color=_.color=function(){var t=function(t){return/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)},e=function(t){return/^#([0-9a-fA-f]{3})$/.test(t)},n=function(t){return/^#([0-9a-fA-f]{6})$/.test(t)},r=function(t){return/^[rR][gG][Bb][Aa]?[\(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}[\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),?[\s]*(0\.\d{1,2}|1|0)?[\)]{1}$/g.test(t)},i=function(t){return(4===t.length?"rgba(":"rgb(")+t+")"},o=function(e){return r(e)?e.match(/0\.\d{1,2}|\d{1,3}/g).map(function(t){return+t}):t(e)?4===e.length?e.match(/[0-9a-fA-f]{1}/g).map(function(t){return"0x"+t+t<<0}):e.match(/[0-9a-fA-f]{2}/g).map(function(t){return"0x"+t<<0}):_.isArray(e)?e:_.isNumber(e)?(e&=16777215,[e>>16&255,e>>8&255,255&e]):void 0},a=function s(e,n){if(!(this instanceof s))return new s(e,n);if(r(e)||t(e))this.color=o(e);else{var i={red:[1,0,0],green:[0,1,0],syan:[0,0,1],yellow:[1,1,0],purple:[1,0,1],gray:[0,0,0],colorful:[1,1,1]},a=e in i?i[e]:i.colorful,u=a[0],c=a[1],h=a[2];if(u&c&1===h)a=a.map(function(t){return 255*Math.random()<<0});else if(u&c&0===h){var l=255*Math.random()<<0;a=[l,l,l]}else{var f=155,p=(Math.random()*(255-f)<<0)+f;a=a.map(function(t){return 1===t?(Math.random()*(255-f)<<0)+f:Math.random()*(p/2)<<0})}n&&(a[a.length]=n),this.color=a}};return createClass(a,{toString:function(){return i(this.color)},hsla:function(){return"hsla("+[360*Math.random()<<0]+",50%,50%,0.5)"},hsl:function(){return"hsl("+[360*Math.random()<<0]+",50%,50%)"},dark:function(t,e){return t=t?o(t):this.color,e=e||.5,i(t.map(function(t){return t*(1-e)<<0}))},deepdark:function(){return this.dark(null,.1)},light:function(t,e){return t=t?o(t):this.color,e=e||.5,i(t.map(function(t){return t+(255-t)*e<<0}))},alpha:function(t){return t&&(this.color[3]=t),i(this.color)},rgb:function(t,e){return t?this.constructor.rgb(t,e):this.alpha(e)},mix:function(t,e){var n=Array.prototype.slice.call(arguments);return n[n.length]=this.rgb(),this.constructor.mix(n)},hex:function(t){return this.constructor.hex(t||this.color)},circle:function(t){return this.constructor.circle(t)},complementary:function(t){return this.constructor.complementary(t||this.color)},tween:function(t,e,n){return this.constructor.tween(this.color,t,e,n)},grayLevel:function(t){return t=t?o(t):this.color,.3*t[0]+.59*t[1]+.11*t[2]},isDark:function(t){return this.grayLevel(t)<192},isLight:function(t){return!this.isDark(t)},webSafeColor:function(t){if(!t){for(var e=["00","33","66","99","CC","FF"],n=e.length,r=[],a=0;a<n;a++)for(var s=0;s<n;s++)for(var u=0;u<n;u++)r[r.length]="#"+e[a]+e[s]+e[u];return r}t=this.rgb(t),t=o(t);for(var c=0;c<3;c++){var h=51*Math.floor(t[c]/51),l=51*Math.ceil(t[c]/51);Math.abs(h-t[c])<=Math.abs(l-t[c])?t[c]=h:t[c]=l}return this.hex(i(t))}},{mix:function(t){if(_.isArray(t)){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=o(t[r]);var a=n[0].map(function(t,r){if(3===r){for(var i=1;i<e;i++)t+=_.isUndefined(n[i][r])?1:n[i][r];return(t/e).toFixed(2)}for(var i=1;i<e;i++)t+=n[i][r];return t/e<<0});return i(a)}var e=arguments.length,n=[];if(0!==e){for(var r=0;r<e;r++)n[r]=o(arguments[r]);return this.mix.call(this,n)}},hex:function(t){function r(t){return"#"+t.map(function(t,e){return e>2?null:("0"+(+t).toString(16)).slice(-2)}).join("")}if(t)return n(t)?t:e(t)?t.replace(/[0-9a-fA-f]/g,function(t){return t+t}):r(o(t))},rgb:function(t,e){if(t){if(r(t))return t;var n=o(t);return e&&(n[3]=e),i(n)}},complementary:function(t){var e=o(t),n=Math.max.apply(Math,e),r=Math.min.apply(Math,e),a=n+r;return e=e.map(function(t){return a-t}),i(e)},circle:function(t,e){for(var n=0,r=360/t,o=[],a=0;a<t;a++){n+=r;var s=127*_.cos(n)+128<<0,u=127*_.cos(n+120)+128<<0,c=127*_.cos(n+240)+128<<0;o[o.length]=i(_.isUndefined(e)?[s,u,c]:[s,u,c,e])}return o},tween:function(t,e,n,r){n=n||1,r=r||"linear";for(var a=o(t),s=o(e),u=[],c=0;c<=n;c++){var h=_.Easing[r](c/n);u[u.length]=i(s.map(function(t,e){return e>2?+(a[e]+(t-a[e])*h).toFixed(2):a[e]+(t-a[e])*h<<0}))}return u},dark:function(t){var e=3*Math.random()<<0;return i([255,255,255].map(function(t,n){return n!==e?80*Math.random()<<0:t*Math.random()<<0}))},deepdark:function(){var t=3*Math.random()<<0;return i([255,255,255].map(function(e,n){return n!==t?20*Math.random()<<0:e*Math.random()<<0}))},light:function(t){var e=3*Math.random()<<0;return i([255,255,255].map(function(t,n){return n!==e?120+136*Math.random()<<0:t*Math.random()<<0}))}})}(),_prototype={};_prototype.obj={cmd:function cmd(str){if(!_.isString(str))return console.log("object.cmd need a string argument"),"";var self=this,symbol=str.match(reg_operation_symbol),ps=[],_cmd=function t(e){if(0==symbol.length)return void ps.push("self."+e);var n=symbol.shift(),r=e.indexOf(n),i=e.substring(0,r).trim();_.has(self,i)?ps.push("self."+i+n):ps.push(i+n);var o=e.substring(r+n.length);t(o)};return _cmd(str),eval(ps.join(""))}},_prototype.num={isEqual:function(t,e){return e=void 0==e?10:e,this.toFixed(e)===t.toFixed(e)},add:function(t){var e,n,r;try{e=t.toString().split(".")[1].length}catch(i){console.log(i),e=0}try{n=this.toString().split(".")[1].length}catch(i){console.log(i),n=0}r=Math.pow(10,Math.max(e,n));var o=Math.round(t*r+this*r)/r;return o.isInfinity(function(){console.log(e+" "+n+"  "+this+" "+t)}),o},sub:function(t){var e,n,r,i;try{e=this.toString().split(".")[1].length}catch(o){console.log(o),e=0}try{n=t.toString().split(".")[1].length}catch(o){console.log(o),n=0}return r=Math.pow(10,Math.max(e,n)),i=e>=n?e:n,((this*r-t*r)/r).toFixed(i)},mul:function(t){var e=0,n=t.toString(),r=this.toString();try{e+=n.split(".")[1].length}catch(i){console.log(i)}try{e+=r.split(".")[1].length}catch(i){console.log(i)}return Number(n.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,e)},div:function(t){var e,n,r,i,o=0,a=0;try{o=this.toString().split(".")[1].length}catch(s){console.log(s)}try{a=t.toString().split(".")[1].length}catch(s){console.log(s)}return 0===a&&0===o?r=this/t:(e=+this.toString().replace(".",""),n=+t.toString().replace(".",""),o<a?(i=Math.pow(10,a-o),r=e/n*i):o>a?(i=Math.pow(10,o-a),r=Math.round(e/n)/i):r=e/n),r.isInfinity(function(){console.log(e+" "+n+" "+(a-o)+" "+this+" "+t)}),r},isInfinity:function(t){var e=function(){return this.toString().indexOf(".")>0&&this.toString().split(".")[1].length>5&&(t&&t.call(this),!0)};return e.call(this)}},_prototype.str={pound:function(){return"#"+this},brackets:function(t){if(t){var e;_.isElement(t)?(_.autoid(t),e=t.id):_.isString(t)&&(e=t);var n=this.split(",");return"#"+e+"["+n.join("],#"+e+"[")+"],#"+e+" ["+n.join("],#"+e+" [")+"]"}return"["+this.split(",").join("],[")+"]"},format:function(){var t=Array.prototype.slice.call(arguments),e=this;return t.forEach(function(t){e=e.replace(/{.*?}/,t)}),e}},_prototype.dat={format:function(t){return _time(this).format(t)}},_prototype.ele={length:1,attr:function(t,e){return _.isUndefined(e)?this.getAttribute(t):(this.setAttribute(t,e),this)},remove:function(){this.parentNode&&this.parentNode.removeChild(this)},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(this.removeChild(t),t.textContent="");return this},removeAttr:function(t){var e=this,n=t.split(","),r=n.length;return 1===r?e.removeAttribute(t):n.forEach(function(t){e.removeAttribute(t)}),e},html:function(t){return 0===arguments.length?this.innerHTML:(this.innerHTML=arguments[0],this)},text:function(t){return t&&(this.innerText=t),this.innerText},val:function(t){return t?(this.setAttribute("value",t),this):~["select","input"].indexOf(this.tagName.toLowerCase())?this.value:this.getAttribute("value")},on:function(t,e){return addEvent(t,this,e),this},off:function(t,e){return removeEvent(t,this,e),this},trigger:function(t){console.log("event trigger");var e=document.createEvent("UIEvents");return e.initEvent(t,!0,!0),dispatchEvent(e,this),this},each:function(t){_.isFunction(t)&&t.call(this,this,0)},css:function(t){var e=Array.prototype.slice.call(arguments),n=e.length,r=["font-size","line-height","border-radius","border-width","padding","margin"];["padding","margin",""].forEach(function(t){r=r.concat(["top","left","bottom","right"].map(function(e){return t?t+"-"+e:e}))}),["max","min",""].forEach(function(t){r=r.concat(["width","height"].map(function(e){return t?t+"-"+e:e}))});var i=function(t,e){return/^0$/.test(e)?e:~r.indexOf(t)?(""+e).replace(/^\d+(\.\d+)?$/,function(t){return t+"px"}):e};if(1===n){if(_.isObject(t))for(key in t){var o=t[key];o=i(key,o),this.style[key]=o}}else 2===n&&(this.style[t]=e[1]);return this},width:function(){var t=Array.prototype.slice.call(arguments),e=t.length;return 1===e&&this.css({width:t[0]}),this.offsetWidth},height:function(){var t=Array.prototype.slice.call(arguments),e=t.length;return 1===e&&this.css({height:t[0]}),this.offsetHeight},pos:function(t){var e=Array.prototype.slice.call(arguments),n=e.length;return 1===n?this.css({position:"absolute",top:t.y,left:t.x}):_.pos.call(this,this)},outerWidth:function(){return _.max(this.scrollWidth,this.offsetWidth,this.clientWidth)+Number(this.style.marginLeft)+Number(this.style.marginRight)},dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&jQuery(t).is(n))break;r.push(t)}return r},parent:function(){return this.parentNode},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},siblings:function(){return this.sibling((this.parentNode||{}).firstChild,this)},children:function(t){return this.sibling(t.firstChild)},first:function(){return this},last:function(){return this},filter:function(t){switch(t){case"visible":return _.isShow(this)?this:null;case"hidden":return _.isHide(this)?this:null;default:return this}},append:function(t){return _.isElement(t)?this.appendChild(t):void(_.isString(t)&&(this.innerHTML=this.innerHTML+t))},onTap:function(t){toucher({el:this,type:"tap",listener:t})}},["hide","show","isHide","active","passive"].forEach(function(t){_prototype.ele[t]=function(){return _[t]&&_[t].call(this,this)}}),["$","query","hover","tab","hasAttr","hasClass","addClass","removeClass","closest"].forEach(function(t){_prototype.ele[t]=function(){return _[t]&&_[t].apply(this,arguments)}}),_prototype.arr={query:function(t){var e=[];return _.each(this,function(n){if(_.isElement(n)){var r=_.autoid(n).query(t);_.size(r)>=1&&e.push(r)}}),1===e.length?e[0]:e},each:function(t){_.isFunction(t)&&_.each(this,function(e,n){t.call(e,e,n)})},first:function(){return this[0]},last:function(){return this[this.length-1]},random:function(){return this[Math.random()*this.length<<0]},shuffle:function(){for(var t=this.length,e=0;e<t-1;e++){var n=Math.random()*(t-e)<<0,r=this[n];this[n]=this[t-e-1],this[t-e-1]=r}}},_prototype.arr.$=_prototype.arr.query,["attr","remove","removeAttr","removeClass","addClass","html","filter","append","on","off","trigger","css","addEvent","hide","show","active","passive","clearEvent","hover","tab","siblings"].forEach(function(t){_prototype.arr[t]=function(){var e=Array.prototype.slice.call(arguments),n=e.length,r=this;if(0===r.length)return r;if(1===n&&_.isString(e[0])){var i=[];return r.forEach(function(n){_.isElement(n)&&i.push(n[t].apply(n,e))}),i}return r.forEach(function(n){_.isElement(n)&&n[t].apply(n,e)}),r}}),inBrowser&&createClass(Element,_prototype.ele),createClass(Date,_prototype.dat),[Object,Number,String,Array,Boolean].forEach(function(t,e){var n=_.type(t.prototype).slice(0,3);_prototype[n]=_prototype[n]||{},_prototype[n].log=function(){console.log(_.stringify(this))},createClass(t,_prototype[n])});var Base64_encode=_.encode=function(t){var e=function(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)})};if("undefined"==typeof window)return new Buffer(t).toString("base64");"undefined"!=typeof window.btoa&&window.btoa(e(t));var n,r,i,o,a,s,u,c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,p="",d=[];if(!t)return t;t=e(t);do n=t.charCodeAt(l++),r=t.charCodeAt(l++),i=t.charCodeAt(l++),c=n<<16|r<<8|i,o=c>>18&63,a=c>>12&63,s=c>>6&63,u=63&c,d[f++]=h.charAt(o)+h.charAt(a)+h.charAt(s)+h.charAt(u);while(l<t.length);p=d.join("");var v=t.length%3;return(v?p.slice(0,v-3):p)+"===".slice(v||3)},Base64_decode=_.decode=function(t){var e=function(t){return decodeURIComponent(t.split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))};if("undefined"==typeof window)return new Buffer(t,"base64").toString("utf-8");if("undefined"!=typeof window.atob)return e(window.atob(t));var n,r,i,o,a,s,u,c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,p="",d=[];if(!t)return t;t+="";do o=h.indexOf(t.charAt(l++)),a=h.indexOf(t.charAt(l++)),s=h.indexOf(t.charAt(l++)),u=h.indexOf(t.charAt(l++)),c=o<<18|a<<12|s<<6|u,n=c>>16&255,r=c>>8&255,i=255&c,64===s?d[f++]=String.fromCharCode(n):64===u?d[f++]=String.fromCharCode(n,r):d[f++]=String.fromCharCode(n,r,i);while(l<t.length);return p=d.join(""),e(p.replace(/\0+$/,""))},addEvent=function n(t,e,r){_.isFunction(r)?(window.addEventListener?e.addEventListener(t,r,{passive:!1}):e.attachEvent("on"+t,r),e.events||(e.events=[]),e.events.push({type:t,el:e,listener:r})):_.isArray(r)&&r.forEach(function(r){n(t,e,r)})},removeEvent=function r(t,e,n){if(!_.isElement(e))return!1;if(n){window.removeEventListener?e.removeEventListener(t,n,{passive:!1}):e.detachEvent("on"+t,n),e.events||(e.events=[]);for(var i=e.events.length;i--;)e.events[i].type===t&&e.events[i].listener===n&&e.events.splice(i,1)}else e.events&&e.events.forEach(function(t){r(t.type,t.el,t.listener)})},startPos={},endPos={},offset={},_touchstar=isSupportTouch?"touchstart":"mousedown",_touchend=isSupportTouch?"touchend":"mouseup",_touchmove=isSupportTouch?"touchmove":"mousemove",Events=function(){var t=[];return{store:function(e){return e&&t.push(e),t},filter:function(e){return _.filter(t,function(t){var n=!0;for(x in e)t[x]!==e[x]&&(n=!1);return n})},reset:function(){t=[]},on:function(t,e,n,r){var i=this;switch(isSupportTouch||t!==TAP||(t="click"),t){case TAP:var o=function(t){startPos=_.pos(t)},a=function(o){endPos=_.pos(o);var a=endPos.x-startPos.x,s=endPos.y-startPos.y,u=endPos.time-startPos.time;Math.abs(a)<=5&&Math.abs(s)<=5&&u<200&&(_.isFunction(n)?n.call(e,endPos.el,o):_.isArray(n)&&n.forEach(function(t){t.call(e,endPos.el,o)}),r&&i.off(t,e))};addEvent(_touchstar,e,o),addEvent(_touchend,e,a);break;case LONGTAP:var s,o=function(o){s=setTimeout(function(){_.isFunction(n)?n.call(e,e,o):_.isArray(n)&&n.forEach(function(t){t.call(e,e,o)}),r&&i.off(t,e)},1e3)},a=function(t){s&&clearTimeout(s)};addEvent(_touchstar,e,o),addEvent(_touchend,e,a);break;case DRAG:case"drag-y":case"drag-x":var u,c=function(t){t.preventDefault()},h=document.documentElement.clientWidth-e.clientWidth,l=document.documentElement.clientHeight-e.clientHeight,o=function(t){startPos=_.pos(t),offset=_.pos(e),e.css({position:"absolute",cursor:"move"}),u=!0,addEvent(_touchmove,document,c)},f=function(n){endPos=_.pos(n),u&&function(){var n=endPos.x-startPos.x+offset.x,r=endPos.y-startPos.y+offset.y;n=_.between(0,h,n),r=_.between(0,l,r),"drag-y"!==t&&e.css({left:n+"px"}),"drag-x"!==t&&e.css({top:r+"px"})}()},a=function(t){endPos=_.pos(t),u=!1,removeEvent(_touchmove,document,c),_.isFunction(n)&&n.call(e,endPos.el,t)};addEvent("mouseover",e,function(t){e.css({cursor:"move"})}),addEvent("mouseout",e,function(t){e.css({cursor:"normal"})}),addEvent(_touchstar,e,o),addEvent(_touchmove,document,f),addEvent(_touchend,document,a);break;default:var p=function(o){_.isFunction(n)?n.call(e,e,o):_.isArray(n)&&n.forEach(function(t){t.call(e,e,o)}),r&&i.off(t,e)};addEvent(t,e,p)}},off:function(t,e,n){TAP===t?(removeEvent(_touchstar,e),removeEvent(_touchend,e)):removeEvent(t,e,n)}}}(),toucher=_.toucher=function(t){function e(t){if(!(this instanceof e))return new e(t);var n=this;if(!t)return void(t===!1&&n.offEvent());var r=[],i=function o(t){var e=_.query(t.el),i=t.type||"click",a=!!_.isUndefined(t.clear)||t.clear,s=t.listener||t.callback,u=t.once||!1;_.isElement(e)?("input"===e.nodeName.toLowerCase()&&i===TAP&&(i="click"),
a&&n.clear({el:e,type:i}),r.push({type:i,el:e,listener:s,once:u})):_.isArray(e)&&e.forEach(function(e){o(_.clone(t,{el:e}))})};_.isArray(t)?t.forEach(function(t){i(t)}):i(t),n.onEvent(r)}return createClass(e,{onEvent:function(t){return t.forEach(function(t){Events.store(t),Events.on(t.type,t.el,t.listener,t.once)}),this},offEvent:function(t){return Events.filter(t).forEach(function(t){Events.off(t.type,t.el)}),this},clear:function(t){return this.offEvent(t)}})}(),walker=_.walker=function(){function t(e){if(!(this instanceof t))return new t(e);if(_.isString(e))this.text=e;else if(_.isNumber(e))this.text=""+e;else{if(!_.isObject(e))throw{name:"input error",messasge:'string or {text:""} is required'};this.text=e.text||"",this.debug=e.debug||!1}this.max=this.text.length,this.line=0,this.col=0,this.pos=0,this.ch=this.peek()}return createClass(t,{escapee:{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},parseTable:function(){this.table=[];for(var t,e=[];this.next();)t=this.until("|"),t&&e.push(t),("\n"===this.ch||this.pos>=this.max)&&(this.table.push(e),e=[]);return this.table},peek:function(t){var e=this.text.charAt(this.pos);if(t){e="";for(var n=0;n<=t;n++)e+=this.text.charAt(this.pos+n>=this.max?this.max:this.pos+n)}return e},eof:function(){return""===this.peek()},next:function(t){return t&&t!==this.ch&&error("Expected '"+t+"' instead of '"+this.ch+"'"),this.ch=this.text.charAt(this.pos++),"\n"===this.ch?(this.line++,this.col=0):this.col++,this.debug&&(this.token=this.peek(10)),this.ch},back:function(){return this.ch=this.text.charAt(this.pos--)},error:function(t){for(var e="",n=10;n--;)this.next(),e+=this.ch;var r={name:"SyntaxError",message:t,pos:this.pos,ch:this.ch,line:this.line,col:this.col,text:this.text,token:e};console.log(r)},info:function(){return{pos:this.pos,ch:this.ch,line:this.line,col:this.col,text:this.text}},until:function(t){var e="",n=this.ch;if(n===t)for(;n=this.next();){if(n===t)return this.back(),e;if("\n"===n){e="";break}e+=n}return e},json:function(){return this._parseJson()},_parseJson:function(){switch(this._skipWhite(),this.ch){case"{":return this._parseObj();case"[":return this._parseArr();case":":return this._parseJson();case'"':case"'":return this._parseStr();default:return/[\d\.-]/.test(this.ch)?this._parseNum():this._parseValue()}},_parseObj:function(){this._skipWhite();var t,e={};if("{"===this.ch)for(;this.next();){if(this._skipWhite(),"}"===this.ch)return this.next(),e;this.ch&&(t=this._parseKey(),Object.prototype.hasOwnProperty.call(e,t)&&(this.error("Duplicate key '"+t+"'"),console.log(e)),e[t]=this._parseJson())}return e},_parseArr:function(){this._skipWhite();var t=[];if("["===this.ch)for(;this.next();){if(this._skipWhite(),"]"===this.ch)return this.next(),t;if(this.ch){var e=this._parseJson();if(e&&(t.push(e),"]"===this.ch))return this.next(),t}}return t},_skipWhite:function(){for(;this.ch&&this.ch<=" ";)this.next()},_removeQuote:function(t){return t.replace(/(?:^"(.*)"$)|(?:^'(.*)'$)/,"$1$2")},_parseKey:function(){for(var t=this.ch;this.next();){if(":"===this.ch)return this.next(),this._removeQuote(t);t+=this.ch}},_parseStr:function(){this._skipWhite();var t="",e=this.ch;if(~"\"'".indexOf(e))for(;this.next();){if(e===this.ch)return this.next(),t;"\\"===this.ch&&(this.next(),this.escapee[this.ch]&&(t+=this.escapee[this.ch])),t+=this.ch}},_parseNum:function(){if(/[\d\.-]/.test(this.ch)){for(var t=this.ch;this.next();){if(~",}]".indexOf(this.ch))return t=+t;t+=this.ch}return t}},_parseValue:function(){for(var t=this.ch;this.next();){if(~",}]".indexOf(this.ch))return this._removeQuote(t);t+=this.ch}return t}})}(),debug=_.debug=function(){function t(){var t=document.createElement("div");t.className="_console";var e=document.createElement("div");e.className="_console_handle",e.innerHTML="debug";var n=document.createElement("div");n.className="_console_log",t.appendChild(e),t.appendChild(n),_.$("body").appendChild(t),console.log=function(){var t=arguments.length;template({el:"._console_log",act:"append",template:'<div class="_item">{=result}</div>',data:{result:1===t?arguments[0]:Array.prototype.slice.call(arguments)},callback:function(){this.el.$("._item").removeAttr("style").last().css({color:"red"}).scrollIntoView()}})},toucher([{el:"._console",type:"touchstart",callback:function(t,e){e.preventDefault(),e.stopPropagation()}},{el:"._console_handle",type:"tap",callback:function(t,e){var n=_.$("._console_log");_.isShow(n)?_.hide(n):_.show(n)}}])}var e;return function(){return e||(e=new t),e}}(),cycle=_.cycle=function(){var t=function e(t,n){if(!(this instanceof e))return new e(t,n);var r=Array.prototype.slice.call(arguments),i=r.length;if(this.index=0,this.values=[],_.isArray(r[0]))this.values=r[0];else if(_.isObject(r[0]))for(var o in r[0]){var a={};a[o]=r[0][o],this.values.push(a)}else this.values.push(r[0]);if(i>=2)if(_.isNumber(r[0]))for(var s=r[0],u=r[1],c=s;c<=u;c++)this.values.push(c);else this.index=r[1];3===i&&(this.text=r[2]),this.length=this.values.length};return createClass(t,{next:function(){return this.values[this.index=this.index+1>=this.length?0:this.index+1]},prev:function(){return this.values[this.index=this.index<=0?this.length-1:this.index-1]},current:function(){return this.values[this.index=this.index===-1?0:this.index]},val:function(){return this.current()},first:function(){return this.length>0?this.values[0]:null},last:function(){return this.length>0?this.values[this.length-1]:null},text:function(t){this.text=t},attr:function(t){for(var e in t)this[e]=t[e];return this}})}();_.sliderCycle=function(t){var e=t.min,n=t.max,r=t.step,i=t.value,o=[],a=0,s=e,u=0,c=0;for(r.toString().replace(/\d+(?:\.(\d+))?/,function(t,e){e&&(c=e.length)});s<=n;)o.push(s),s===i&&(u=a),s=+(s+r).toFixed(c),a++;return _.cycle(o,u).attr(t)},inBrowser&&function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];if(window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=+new Date,i=Math.max(0,16-(r-t)),o=window.setTimeout(function(){e(r+i)},i);return t=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),document.all&&!window.setTimeout.isPolyfill){var r=window.setTimeout;window.setTimeout=function(t,e){var n=Array.prototype.slice.call(arguments,2);return r(t instanceof Function?function(){t.apply(null,n)}:t,e)},window.setTimeout.isPolyfill=!0}if(document.all&&!window.setInterval.isPolyfill){var i=window.setInterval;window.setInterval=function(t,e){var n=Array.prototype.slice.call(arguments,2);return i(t instanceof Function?function(){t.apply(null,n)}:t,e)},window.setInterval.isPolyfill=!0}}();var PIx2=2*Math.PI;_.rad=function(t){return t%=360,t*Math.PI/180},_.deg=function(t){return t*(180/Math.PI)},_.sin=function(t){return t%=360,Math.sin(t*Math.PI/180)},_.cos=function(t){return t%=360,Math.cos(t*Math.PI/180)},_.tan=function(t){return t%=360,Math.tan(t*Math.PI/180)},_.atan=function(t){return t%=360,Math.atan(t*Math.PI/180)},_.fibonacci=function(t){if(1===t)return[0];if(2===t)return[0,1];for(var e=[0,1],n=0;n<t-2;n++)e[e.length]=e[n]+e[n+1];return e};var _delay=_.delay=function(){function t(e,n){var i=this instanceof t?this:Object.create(t.prototype);return e&&i.load.apply(i,arguments),i.stack=r,i.index=o,i}var e,n,r=[],i={slow:600,fast:200,_default:400},o=0;createClass(t,{load:function(t,e){var n=this,o=Array.prototype.slice.call(arguments,2);return e=_.isNumber(e)?e:e in i?i[e]:i._default,t&&r.push({fn:function(){t&&t.apply(null,o),n.next.call(n)},time:e,args:o}),n.fire.call(n),n},next:function(){this.index=o;var t=r[o++];t&&(this.force&&e&&clearTimeout(e),e=setTimeout(t.fn,t.time))},fire:function(t){return 0===r.length?this:(o=_.isUndefined(t)?0:_.between(0,r.length,t),e&&clearTimeout(e),n&&clearTimeout(n),n=setTimeout(function(){var t=r[o++];t.fn&&t.fn.apply(null,t.args)},r[o].time),this)}});var a;return function(){return a?a.load.apply(a,arguments):a=t.apply(null,arguments),a}}(),_loop=_.loop=function(){var t=function e(t,n,r){return this instanceof e?(this.times=n,this.callback=t||function(t){console.log(t)},this.delay=r,void this.run()):new e(t,n,r)};return createClass(t,{run:function(){if(this.delay)for(var t=0;t<this.times;t++)_.delay(this.callback,this.delay,t);else for(var t=0;t<this.times;t++)this.callback&&this.callback(t)}})}(),_animate=_.animate=function(){function t(e,n){return this instanceof t?(this.stop(),void this.start(e,n)):new t(e,n)}var e,n;return createClass(t,{stop:function(){n&&inBrowser&&cancelAnimationFrame(n),e&&clearTimeout(e)},start:function(t,r){_.isUndefined(r)&&inBrowser?!function i(){n=requestAnimationFrame(i),t&&t()}():(r=_.isUndefined(r)?17:r,function o(){e=setTimeout(o,r),t&&t()}())}})}(),Easing=_.Easing={ease:function(t){return t<=.5?2*t*t:t>.5?-2*t*t+4*t-1:void 0},easeIn:function(t){return t*t},ease2:function(t){return t<1/3?t*t:-2*t*t+4*t-1},easeOut:function(t){return Math.pow(t,.8)},collision:function(t){for(var e,n,r=1,i=20;r<i;r++)if(e=1-4/3*Math.pow(.5,r-1),n=1-4/3*Math.pow(.5,r),t>=e&&t<=n)return Math.pow(3*(t-(e+n)/2),2)+1-Math.pow(.25,r-1)},elastic:function(t){return-Math.pow(1/12,t)*Math.cos(2.5*Math.PI*t*t)+1},linear:function(t){return t},wave:function(t){return 1/12*Math.sin(5*Math.PI*t)+t},opposite:function(t){return Math.sqrt(2)/2*Math.sin(3*Math.PI/2*(t-.5))+.5}},_tween=_.tween=function(){function t(e){if(!(this instanceof t))return new t(e);this._start=e.start,this._end=e.to||e.end,this.callback=e.callback,this.duration=e.duration,this._repeat=e.repeat,this._yoyo=e.yoyo,this.type=e.type||"linear",this._deta={};for(var n in this._end)this._end.hasOwnProperty(n)&&_.isNumber(this._end[n])&&(this._deta[n]=this._end[n]-this._start[n]||0);this._delayTime=e.delay||0,this._startTime=+new Date,this._startTime+=this._delayTime,this.update()}return createClass(t,{calculate:function(t){var e=(t-this._startTime)/this.duration;e=0===this.duration||e>1?1:e;var n;if(_.isObject(this.type)){n={};for(var r in this._deta)this._deta.hasOwnProperty(r)&&(n[r]=Easing[this.type[r]||"linear"](e))}else n=Easing[this.type](e);if(this._repeat&&1===e&&(this._startTime=t,isFinite(this._repeat)&&this._repeat--,this._yoyo)){var i=this._start;this._start=this._end,this._end=i;for(var r in this._end)this._end.hasOwnProperty(r)&&(this._deta[r]=this._end[r]-this._start[r]||0)}var o={};for(var r in this._deta)if(this._deta.hasOwnProperty(r)){var a=_.isObject(n)?n[r]:n;o[r]=a*this._deta[r]+this._start[r]}return o},update:function(){var t=this,e=+new Date,n=this.calculate.call(this,e);e-this._startTime<=this.duration?(this.callback(n),setTimeout(function(){t.update.call(t)},17)):this.callback(n)}})}(),_vector=_.vector=function(){function t(e){return this instanceof t?(e=e||{},this.x=e.x||0,this.y=e.y||0,void(this.z=e.z||0)):new t(e)}return createClass(t,{equal:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return t({x:this.x,y:this.y,z:this.z})},neg:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},norm:function(){return t({x:-this.y,y:this.x})},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this},abs:function e(t){if(_.isUndefined(t))return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);var e=this.abs();return 0===e?this.x=t:t!==e&&this.scale(t/e),this},deg:function(t){if(_.isUndefined(t))return this.radToDeg(Math.atan2(this.y,this.x));var e=this.abs();return this.x=e*_.cos(t),this.y=e*_.sin(t),this},rad:function(t){if(_.isUndefined(t))return Math.atan2(this.y,this.x);var e=this.abs();return this.x=e*Math.cos(t),this.y=e*Math.sin(t),this},mul:function(t){return this.x*t.x||0+this.y*t.y||0+this.z*t.z||0},ia:function(t){return Math.acos(this.mul(t)/(this.abs()*t.abs()))},isNorm:function(t){return 0===this.mul(t)},degToRad:function(t){return t*(Math.PI/180)},radToDeg:function(t){return t*(180/Math.PI)},rotate:function(t){var e=_.cos(t),n=_.sin(t),r=this.x,i=this.y,o=r*e-i*n,a=r*n+i*e;return this.x=o,this.y=a,this},cross:function(t){var e=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-e*t.z,this.z=e*t.y-n*t.x,this},split:function(t){for(var e=[],n=1;n<=t;n++)e[e.length]=this.clone().scale(n/(t+1));return e},rotateXY:function(t,e){var n=_.cos(t),r=_.sin(t),i=_.cos(e),o=_.sin(e),a=this.x,s=this.y,u=this.z,c=s*r+u*n;return this.y=s*n-u*r,this.z=a*-o+c*i,this.x=a*i+c*o,this},pr:function(t){return t=t?t:300,t/(this.z+t)},proj:function(t){return t=t?t:this.pr(),this.x*=t,this.y*=t,this.z=0,this},toP:function(t){var e=this.deg(),n=this.abs();return _pointPolar({a:e,r:n,o:t||this})}})}(),_pointPolar=_.pointPolar=function(){function t(e){if(!(this instanceof t))return new t(e);_.extend(this,e);var n=this.a=e.a||0,r=this.r=e.r||0,i=this.o=e.o||{x:0,y:0,z:0},o=this.xy(r,n,i);this.x=o.x,this.y=o.y}return createClass(t,{xy:function(t,e,n){return{x:n.x+t*_.cos(e),y:n.y+t*_.sin(e)}},toV:function(t){return _vector(t?{x:t.x-this.x,y:t.y-this.y}:{x:this.x-this.o.x,y:this.y-this.o.y})},dist:function(t){return this.toV(t).abs()},clone:function(e){return t(_.extend({},this,e))},slope:function(t){return(this.y-t.y)/(this.x-t.x)},mid:function(t){return this.toV(t).scale(.5).toP(this)},split:function(t,e){for(var n=[],r=1;r<=e;r++)n[n.length]=this.toV(t).scale(r/(e+1)).toP(this);return n},mirror:function(t,e){var n=this.toV(t);return e&&n.scale(e),n.toP(t)},translate:function(t,e){return this.toV(t).abs(e).toP(this)},trans:function(t,e){return this.translate(t,e)},vertical:function(t,e){return this.toV(t).norm().abs(e).toP(this)},norm:function(t,e){return this.vertical(t,e)},rotate:function(t){return this.clone({a:(this.a+t)%360})},rotateZ:function(t){return this.rotate(t)},rotateXY:function(t,e){return this.toV().rotateXY(t,e).proj().toP(this)},rotateX:function(t){return this.rotateXY(t,0)},rotateY:function(t){return this.rotateXY(0,t)},scale:function(t){return this.clone({r:this.r*t})},add:function(t){return this.x+=t.x,this.y+=t.y,this},proj:function(t,e){return this.toV(t).proj(e).toP(this)},pr:function(t,e){return this.toV(t).pr(e)},speed:function(t){return t=t||1,this.vx=(2*Math.random()-1)*t,this.vy=(2*Math.random()-1)*t,this},speedPolar:function(){return s=s||1,this.vr=(2*Math.random()-1)*s,this.va=(2*Math.random()-1)*s,this},move:function(){return this.vx&&(this.x+=this.vx),this.vy&&(this.y+=this.vy),this.vr&&(this.r+=this.vr),this.va&&(this.a+=this.va),this}})}(),_point=_.point=function(){function t(e){return this instanceof t?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.r=e.r,this.color=e.color,this.speed=e.speed||1,this.vx=0,this.vy=0,this.vz=0,this.spring=.01,this.left=e.left||0,this.right=e.right||e.width,this.top=e.top||0,this.bottom=e.bottom||e.height,void this.speed()):new t(e)}return createClass(t,{friction:.9,speed:function(){this.vx=(2*Math.random()-1)*this.speed,this.vy=(2*Math.random()-1)*this.speed,this.vz=(2*Math.random()-1)*this.speed,this.spring=.01+.04*Math.random()},target:function(t){return this.translating=!0,this.tx=t.x||0,this.ty=t.y||0,this.tz=t.z||0,this},follow:function(){return this.vx+=(this.tx-this.x)*this.spring,this.vy+=(this.ty-this.y)*this.spring,this.vz+=(this.tz-this.z)*this.spring,this.vx*=this.friction,this.vy*=this.friction,this.vz*=this.friction,this.x+=this.vx,this.y+=this.vy,this.z+=this.vz,Math.abs(this.tx-this.x)<5&&Math.abs(this.ty-this.y)<5&&Math.abs(this.tz-this.z)<5&&(this.translating=!1),this},move:function(){return this.x+=this.vx,this.y+=this.vy,this.z+=this.vz,this.bound()},bound:function(){return(this.x<this.left||this.x>this.right)&&(this.vx*=-1),(this.y<this.top||this.y>this.bottom)&&(this.vy*=-1),this},clone:function(e){return t(_.extend({},this,e))}})}(),_vertex=_.vertex=function(){function t(e){return this instanceof t?void(e&&(this.po=this.centerPoint(e),this.vs=this.vertices(e))):new t(e)}return createClass(t,{centerPoint:function(t){var e={x:t.x||0,y:t.y||0};return _pointPolar({o:e})},vertices:function(t){var e=t.group||t.shape,n=t.r||100,r=t.a||0,i=(t.x,t.y,t.rRatio||1),o=(t.aRatio||1,t.turns||1),a=t.num||3,s=this.po,u=t.rRatioType;switch(e){case"star":u="ac",i=[i,1/i];break;case"spiral":n=.01,o=30}for(var c,h=[],l=_.cycle(i||1),f=n,p=0;p<a*o;p++){switch(u){case"cv":f+=n*(l.next()-1);break;case"ac":f=0===p?n:1===p?n*l.val():f*l.next();break;default:if(_.isArray(i)){var d=i.length;f=n*i[p+1>d?p%d:p]}else f=n*Math.pow(i,p)}c=360*p/a+r,h[h.length]=s.clone({a:c,r:f})}return h},invertices:function(t){var t=t||this.vs,e=t.length;return!(e<2||t[0].dist(t[1])<10)&&t.map(function(n,r){return n.mid(t[r+1<e?r+1:0])})},regularVertices:function(t){for(var e=t.num,n=this.po,r=360/e,i=[p],o=0;o<e;o++)i[i.length]=p=n.rotate(r);return i},transform:function(t){return this.vs.map(function(e){return e.transform(t)})},clone:function(t){return this.vs.map(function(e){return e.clone(t)})},rotate:function(t){return this.vs=this.vs.map(function(e){return e.rotate(t)}),this},rotateXY:function(t,e){return this.vs=this.vs.map(function(n){return n.rotateXY(t,e)}),this},rotateX:function(t){return this.rotateXY(t,0)},rotateY:function(t){return this.rotateXY(0,t)},add:function(t){return this.vs=this.vs.map(function(e){return e.add(t)}),this},intriangle:function(t){var e=this,n=[];return function r(t){var i=e.invertices(t);i&&(n.push(i),t.map(function(t,e){var n=[t,i[e],i[0===e?i.length-1:e-1]];r(n)}))}(t),n},spiral:function(t){for(var e=this.po||this.centerPoint(t),n=[e],r=t.turns||1,i=t.r,o=0;o<r;o+=2)[[i*o,0],[0,i*o],[-i*(o+1),0],[0,-i*(o+1)]].forEach(function(t){n.push(e.translateXY.apply(e,t))});return n}})}(),_shape=_.shape=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(e&&(this.draw=e,this.canvas=e.canvas,this.context=e.context),n){[{k:"line",num:2},{k:"triangle",num:3},{k:"square",num:4}].forEach(function(t){t.k===n.shape&&(n.shape="polygon",n.num=t.num)});var r=_.isUndefined(n.shape)?"polygon":n.shape,i=_.isUndefined(n.x)?this.canvas.width/2:n.x,o=_.isUndefined(n.y)?this.canvas.height/2:n.y,a=_.isUndefined(n.a)?0:n.a;i+=n.offsetX||0,o+=n.offsetY||0;var n=this.opt=_.clone(n,{shape:r,width:n.r,height:n.r,x:i,y:o,a:a});this.setup(n)}}return createClass(t,{setup:function(t){var t=t||this.opt,e=t.shape;return e in this?t.fractalMirror?this.fractalMirror(t):t.fractal?this.fractal(t):t.fractalIn?this.fractalIn(t):(this._vertex(t),t.vertexRotate?this.vertexRotate():t.vertexTransform?this.vertexTransform():this[e].call(this,t)):void console.log(NaN+e)},_vertex:function(t){var e=this.vertex=_.vertex(t);this.vs=e.vs,this.po=e.po},_calculatedAmount:function(t){var e=t.num,n=5,r=0;if(t.fractal)for(;n--;)r+=Math.pow(e,n+1);return r>1e4},fractal:function e(t){var n=this;this.setup(_.clone(t,{fractal:!1}));var r=t.fractalRatio||.618,i=t.r*r,o=t.minR||5,a=t.fractalLevel||0,s=_.isUndefined(t.maxLevel)?5:t.maxLevel;a++;var e=!(a>=s||i<o);this.vs.forEach(function(r){var o=_.clone(t,{x:r.x,y:r.y,r:i,fractal:e,fractalLevel:a});n.setup(o)})},fractalIn:function(t){this.setup(_.clone(t,{fractalIn:!1}));var e=t.fractalLevel||0,n=_.isUndefined(t.maxLevel)?5:t.maxLevel;if(e++,!(e>=n)){var r=this.vs;this.po;if(!(r.length<2)){var i=r[0].toV().add(r[1].toV()),t=_.clone(t,{r:i.abs(),a:i.deg()},{fractalLevel:e});this.setup(t)}}},fractalMirror:function(t){this.setup(_.clone(t,{fractalMirror:!1}));var e=t.fractalLevel||0,n=_.isUndefined(t.maxLevel)?5:t.maxLevel;if(e++,!(e>=n)){var r=_.vertex(t),i=r.vs,o=r.po,a=t.fractalRatio||.618,s=t.minR||5;i.forEach(function(n,r){var i=o.mirror(n,a);if(!(i.r<s)){var u=_.clone(t,{r:i.r,x:i.x,y:i.y,a:i.a+180,fractalLevel:e});self.shape(u)}})}},color:function(t){if(t){var e=_color();this.opt.fill?this.opt.color=e.rgba():this.opt.color=e.rgb()}return this},regularPolygon:function(t){var e=_.vertex().regularVertices(t);this.draw.link(e,t)},spiral:function(t){var e=_.vertex().spiral(t);this.draw.link(e,t)},fibonacci:function(t){function e(t,e,n){var r=Math.PI,s=.5*Math.PI;if(e>2)switch(e%4){case 0:o=o+t-n,r=0,s=1.5*Math.PI;break;case 1:a=a-t+n,r=1.5*Math.PI,s=Math.PI;break;case 2:o=o-t+n,r=Math.PI,s=.5*Math.PI;break;case 3:a=a+t-n,r=.5*Math.PI,s=0}i.arc(o,a,n,r,s,!0)}var n=t.num,r=_.fibonacci(n),i=(t.group.sequence,this.context),o=t.x,a=t.y;t.r;this.draw.beginPath(t);for(var s=0;s<r.length;s++)s>=2&&e(r[s-1],s,r[s]);return this.draw.render(_.clone(t,{closed:!1})),this},vertices:function(t){var e=this;this.vs.forEach(function(n){e.circle(_.clone(t,{x:n.x,y:n.y,r:3,text:""}))})},text:function n(t){var e=this.context,r=t.x,i=t.y,o=t.r||12,n=_.isUndefined(t.text)?t.num:t.text;e.fillStyle=t.color||"#000",e.font=o+"px Verdana";var a=e.measureText(n);e.fillText(n,r-a.width/2,i+o/2)},circle:function(t){var e=this.context,n=t.x,r=t.y,i=t.r||1,o=t.sa||0,a=t.ea||2*Math.PI;e.beginPath(),e.arc(n,r,i,o,a,!0),e.closePath(),this.draw.fillstroke(t);var s=t.text;if(!_.isUndefined(s)){e.fillStyle="#000",e.font="12px Verdana";var u=e.measureText(s);e.fillText(s,n-u.width/2,r+i/2)}return this},ball:function(t){var e=this.context;t.fill=!0;var n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI),e.closePath(),this.draw.fillstroke(t)},ellipse:function(t){var e=this.context,n=t.x,r=t.y,i=t.r,o=t.a||2*i,a=t.b||i,i=o>a?o:a,s=o/i,u=a/i;return e.scale(s,u),e.beginPath(),e.moveTo((n+o)/s,r/u),e.arc(n/s,r/u,i,0,2*Math.PI),e.closePath(),this.draw.fillstroke(t),this},sector:function(t){var e,n=this.context,r=t.x,i=t.y,o=t.r,a=t.a,s=!0;return s?a-.5*Math.PI:e=a+.5*Math.PI,n.beginPath(),n.arc(r,i,o,a,e,s),n.closePath(),this.draw.fillstroke(t),this},ring:function(t){var e=this.context,n=t.x,r=t.y,i=t.r,o=i*t.rRatio;return this.draw.beginPath(t),e.arc(n,r,i,0,PIx2,!1),e.moveTo(n+o,r),e.arc(n,r,o,PIx2,0,!0),this.draw.closePath(t),this.draw.fillstroke(t),this},heart:function(t){function e(t){t.beginPath(),t.arc(-1,0,1,Math.PI,0,!1),t.arc(1,0,1,Math.PI,0,!1),t.bezierCurveTo(1.9,1.2,.6,1.6,0,3),t.bezierCurveTo(-.6,1.6,-1.9,1.2,-2,0),t.closePath()}var n=this.context,r=t.r,i=t.a,o=t.x,a=t.y;return n.translate(o,a),n.rotate(_.rad(i)),n.scale(r,r),e(n),this.draw.fillstroke(t),this},ushape:function(t){},vshape:function(t){},polygon:function(t){return this.draw.link(this.vs,t)},rectangle:function(t){var e=this.context,n=t.r,r=2*n*_.cos(45),i=2*n*_.sin(45),o=t.x-r/2,a=t.y-i/2;this.draw.beginPath(t),e.rect(o,a,r,i),this.draw.closePath(t),this.draw.fillstroke(t)},diamond:function(t){return t.num=4,_.isNumber(t.rRatio)?t.rRatio=[t.rRatio,1/t.rRatio]:t.rRatio=[.5,2],t.rRatioType="ac",this.vs=_.vertex(t).vs,this.polygon(t)},star:function(t){return t.shape="star",this.vs=_.vertex(t).vs,this.polygon(t),this},pentagram:function(t){for(var e=t.num||5,n=t.r,r=t.ratio||3-4*Math.pow(_.sin(18),2),i=this.vs,o=[],a=0;a<e;a++){var s=i[a],u=s.clone({a:s.a+180/e,r:n/r});o.push(s),o.push(u)}return this.draw.link(o,t)},cross:function(t){for(var e=t.num,n=[],r=this.vertex,t=_.clone(t,{num:2*t.num}),i=r.vertices(t),o=0;o<t.num;o++)n.push([i[o],i[o+e]]);return this.draw.linkGroup(n,t)},rose:function(t){var e=this,n=this.vertex,r=n.vs,i=[r],o=0,a=t.turns||3;return function s(e){if(!(o>=a)){var r=t.r/Math.pow(2,++o),u=n.clone({r:r});i.push(u),e.map(function(t,e){var n=[t,u[e+1===u.length?0:e+1]];i.push(n)}),s(u)}}(r),e.draw.linkGroup(i,t)},sunflower:function(t){for(var e=t.interval||2,n=[],r=this.vs,i=r.length,o=0;o<i;o++){var a=[];a.push(r[o]),a.push(r[(o+e)%i]),n.push(a)}return this.draw.linkGroup(n,t)},sierpinski:function(t){var e=this.vertex,n=e.vs,r=[n];return function i(t){var n=e.invertices(t);n&&(r.push(n),t.map(function(t,e){var r=[t,n[e],n[0===e?n.length-1:e-1]];i(r)}))}(n),this.draw.linkGroup(r,t)},carpet:function(t){var e=this,n=this.vertex,r=n.vs,i=[r];t.num;return function o(t){var e=t.r;if(!(e<5)){var n=_.vertex(t),r=e/3,a=n.clone({r:r});i.push(a);var s=2*e/3,u=n.clone({r:s}),c=[],h=u.length;u.forEach(function(t,e){c.push(t),c.push(t.mid(u[e+1===h?0:e+1]))}),c.forEach(function(e){var n=_.clone(t,{r:r,x:e.x,y:e.y});o(n)})}}(t),e.draw.linkGroup(i,t)},inpolygon:function(t){var e=this,n=this.vertex,r=n.vs,i=[r];return function o(t){var e=n.invertices(t);e&&(i.push(e),o(e))}(r),e.draw.linkGroup(i,t)},axialMirror:function(t){var e=this.vertex,n=e.vs,r=e.po,i=[n],o=(t.a,t.num),a=t.r,s=2*a*_.cos(180/o);return n.forEach(function(t,n){var a=r.clone({a:t.a+180/o,r:s}),u=e.clone({o:{x:a.x,y:a.y}});i.push(u)}),this.draw.linkGroup(i,t)},comb:function(t){var e=[];t.num=6;var n=this.vertex,r=n.vs,i=n.po;e.push(r);var o=(t.a,t.num),a=t.r,s=function(t){var s=2*t*a*_.cos(180/o);r.forEach(function(t,r){var a=i.clone({a:t.a+180/o,r:s}),u=n.clone({o:{x:a.x,y:a.y}});e.push(u)})},u=function(t){var o=2*t*a+a;r.forEach(function(t,r){var a=i.clone({a:t.a,r:o}),s=n.clone({o:{x:a.x,y:a.y}});e.push(s)})};return[1,2,3].forEach(function(t){s(t),u(t)}),this.draw.linkGroup(e,t)},reuleaux:function(t){var e=this,n=this.vertex,r=n.vs;this.draw.link(r,t);var i=2*t.r*_.sin(180/t.num);r.forEach(function(n){e.circle(_.clone(t,{x:n.x,y:n.y,r:i,text:""}))})},beads:function(t){var e=this,n=this.vs,r=n.length,i=t.r*_.sin(180/t.num);n.forEach(function(o,a){var s=o.mid(n[a+1<r?a+1:0]);e.circle(_.clone(t,{x:s.x,y:s.y,r:i,text:""}))}),this.draw.link(n,t)},kohn:function(t){var e=this.vs,n=function o(t,e){var n=t.split(e,2),r=n[0].dist(n[1])/Math.sqrt(2),i=n[0].mid(n[1]),a=i.vertical(n[1],r);n.splice(1,0,a);var s=[t].concat(n);if(s.push(e),r<10)return s;var u=[],c=s.length;return s.forEach(function(t,e){if(e+1<c){var n=o(t,s[e+1]);u=e===c-2?u.concat(n):u.concat(n.slice(0,n.length-1))}}),u},r=[],i=e.length;e.forEach(function(t,o){var a=e[o+1===i?0:o+1];r.push(n(t,a))}),this.draw.linkGroup(r,t)},ray:function(t){var e=this.vs,n=e.length,r=this.po,i=[];if(t.fillInterval)for(var o=0;o<n;o+=2)i.push([r,e[o],e[o+1===n?0:o+1]]);else i=e.map(function(t,e){return[r,t]}),t.fill&&i.push(e);return this.draw.linkGroup(i,t)},rayFractal:function(t){var e=this,n=_.vertex(t),r=n.vs,i=(r.length,n.po,function(t){var n=_.vertex(t),r=n.vs,i=r.length,o=n.po,a=[];if(t.fillInterval)for(var s=0;s<i;s+=2)a.push([o,r[s],r[s+1===i?0:s+1]]);else r.forEach(function(t,e){a.push([o,t])}),t.fill&&a.push(r);e.draw.linkGroup(a,t)});r.forEach(function(e){i(_.clone(t,{x:e.x,y:e.y}))})},pie:function(t){var e=this.vertex,n=e.vs,r=n.length,i=this.po,o=this.context;o.beginPath();var a=2;n.forEach(function(e,s){var u=n[s+a-1>=r?s+a-1-r:s+a-1];s%a===0&&o.arc(i.x,i.y,t.r,_.rad(u.a),_.rad(e.a),!0)}),o.closePath(),this.draw.render(t,n)},sun:function(t){var e=this.vertex,n=e.vs,r=n.length,i=e.po;if(!(r<3)){var o=n.map(function(t,e){var o=n[e+1===r?0:e+1];return t.toV().add(o.toV()).toP(i)}),a=[];n.forEach(function(t,e){a.push(t),a.push(o[e])}),this.draw.link(n.concat(a),t)}},windmill:function(t){var e=this.vertex,n=e.vs,r=n.length;e.po;if(!(r<3)){var i=n.map(function(t,e){var i,o;return e+1===r?(i=n[0],o=n[1]):e+2===r?(i=n[e+1],o=n[0]):(i=n[e+1],o=n[e+2]),t.toV(i).add(t.toV(o)).toP(t)}),o=[];n.forEach(function(t,e){o.push(t),o.push(i[e])}),this.draw.link(n.concat(o),t)}},cornercurve:function(t){var e=this.vertex,n=e.vs,r=n.length,i=this.context;i.beginPath();var o=n.map(function(t,e){var i=n[e+1===r?0:e+1];return t.mid(i)});o.forEach(function(t,e){var a=o[e+1===r?0:e+1],s=n[e+1===r?0:e+1];i.moveTo(t.x,t.y),i.quadraticCurveTo(s.x,s.y,a.x,a.y)}),this.draw.render(t,n)},bomb:function(t){var e=this.vertex,n=e.vs,r=e.po,i=n.length,o=this.context,a=t.color;o.beginPath(),n.forEach(function(t,e){var a=n[e+1===i?0:e+1];o.moveTo(t.x,t.y),o.quadraticCurveTo(r.x,r.y,a.x,a.y)}),this.draw.setStrokeStyle(o,a),o.stroke()}})}(),_shapeGroup=_.group=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);this.draw=e,this.context=e.context,this.canvas=e.canvas;var r=n.shape.r,i=n.group.colorful,o=_.isUndefined(n.group.x)?this.canvas.width/2:n.group.x,a=_.isUndefined(n.group.y)?this.canvas.height/2:n.group.y,s=r,u=r;n.group&&~["mirror","surround"].indexOf(n.group.group)&&(s=n.group.sr+r,u=n.group.sr+r),_.isUndefined(n.group.a)&&(n.group.a=0);var c=[],h=n.group.interval||1,l=_.color(),f=n.group.num||360/h;switch(i){case"circle":c=_.color.circle(f);break;case"gradient":c=_.color.tween(l.light(),l.dark(),f);break;case"singleGradient":c=_.color.tween(l.dark(),"#ffffff",f);break;case"random":for(var p=0;p<f;p++)c[c.length]=_.color().hex();break;case"solid":}n.group=_.clone(n.group,{width:s,height:u,x:o,y:a,colorArr:c}),this.opt=n,this.setup()}return createClass(t,{shape:function(t){return this.draw.shape(t)},color:function(t){var e=t.group.colorful,n=(t.shape.fill,{});return e&&(n.color=_.color().rgb()),n},setup:function(t){var t=t||this.opt;if(t.group){var e=this.vertex=_.vertex(t.group);return this.vs=e.vs,this.po=e.po,this.groups=this[t.group.group](t)}return this.shape(t.shape)},polygon:function(t,e){var n=this,r=e||this.vs,i=this.po,o=r.length,a=_.vertex(t.shape),s=t.shape.a||0,u=[],c=t.group.sequence;switch(c){case"clockwise":break;case"anticlockwise":r.reverse();break;case"shuffle":r.shuffle()}return r.map(function(e,c){if(t.shape=_.clone(t.shape,{x:e.x,y:e.y,easing:!1}),"solid"!==t.group.colorful){var h=t.group.colorArr[c];t.shape=_.clone(t.shape,{color:h,lineColor:h,fillColor:h})}t.group.rotation&&(t.shape=_.clone(t.shape,{a:(s+360*c/o)%360}));var l,f;if(t.group.animate&&"none"===t.group.easing?(t.shape.delay=0!==c&&t.group.animationInterval,l=n.shape(t.shape),f=a.clone({o:{x:e.x,y:e.y}})):(l=n.shape(t.shape),f=l.vs),t.group.showRadius&&n.draw.link([i,e],t.group),t.group.link)for(var p=c;p<o-1;p++)n.draw.link([e,r[p+1]],t.group);if(t.group.neighborLink&&n.draw.link([e,r[c+1===o?0:c+1]]),t.group.vertexLink){var d;0===c?u.push(f):c+1<o?(d=u.pop(),f.forEach(function(e,r){n.draw.link([e,d[r]],t.group)})):c+1===o&&u.forEach(function(e){f.forEach(function(r,i){n.draw.link([r,e[i]],t.group)})}),u.push(f)}return t.group.identifierCenter&&n.draw.point({x:e.x,y:e.y,text:c}),t.group.conic&&f.forEach(function(e){n.draw.link([i,e],t.group)}),l})},sudoku:function(t){var e=_.vertex(_.clone(t.group,{num:8,rRatio:[1,Math.sqrt(2)],rRatioType:"default"})),n=[e.po].concat(e.vs);return t.group.rotation=!1,this.polygon(t,n)},fractal:function(t){var e=this,n={x:t.group.x,y:t.group.y},r=_.vertex(_.clone(t.shape,n)),i=r.vs;i.forEach(function(n){t.shape=_.clone(t.shape,{x:n.x,y:n.y}),e.shape(t.shape)})},cone:function(t){var e=this,n=this.vs,r=this.po,i=(n.length,[]);n.forEach(function(n){t.shape=_.clone(t.shape,{x:n.x,y:n.y});var o=e.shape(t.shape),a=o.vs;a.forEach(function(t){i.push([t,r])})}),this.draw.linkGroup(i,t.shape)},pillar:function(t){t.group.num=2,t.group.vertexLink=!0;var e=this.vertex=_.vertex(t.group);return this.vs=e.vs,this.po=e.po,this.polygon(t)},ring:function(t){this.shape(t.shape);var e=.618*t.shape.r;return this.shape(_.clone(t.shape,{r:e})),this},surround:function(t){var e=this,n=t.shape.r,r=t.group.rotation,i=t.group.interval||1,o=t.group.spiral,a=t.group.x,s=t.group.y,u=t.group.r;_.isUndefined(u)&&(u=n,n/=3);var c,h,l=t.group.sequence,f="clockwise"===l,p=t.group.a||0;f?(c=p+360,h=p,o&&(c*=o)):(c=p,h=p+360,o&&(h*=o));var d=c,v=t.group.animationInterval||5,y=0;return function g(){if(!(n<5)){if(f){if(d<=h)return;d-=i,o&&(n=n*d/360/o)}else{if(d>=h)return;d+=i,o&&(n=n*(h-d)/360/o)}r&&(t.shape.a=d);var c={x:a+u*_.sin(d),y:s+u*_.cos(d),r:n};t.group.colorArr.length>y&&(c.color=t.group.colorArr[y++]),t.shape=_.clone(t.shape,c),e.shape(t.shape),t.group.showRadius&&e.draw.link([{x:a,y:s},{x:t.shape.x,y:t.shape.y}]),t.group.animate?setTimeout(g,v):g()}}(),t.group.showCenter&&e.draw.shape({shape:"circle",r:3,x:a,y:s,color:t.group.colorArr[0],fill:!0}),e},concentric:function(t){var e=this,n=t.shape.r,r=t.group.interval||1,i=t.group.animationInterval||5;return function o(){n<=0||(t.shape=_.clone(t.shape,e.color(t),{r:n}),e.shape(t.shape),n-=r,t.group.animate?setTimeout(o,i):o())}(),e},excircle:function(t){return this.shape(t.shape),t.shape=_.clone(t.shape,{shape:"circle",text:""
}),this.shape(t.shape),this},repeat:function(t){var e=this,n=this.canvas,r=n.width,i=n.height,o=t.group.interval||t.shape.r,a=r%o,s=i%o,u=t.group.animate,c=t.group.animationInterval||5,h=t.group.sequence,l="clockwise"===h,f=t.group.rotation,p=t.group.a||0,d=o+s/2,v=o+a/2,y=r-o-a/2;t.shape.y=d,l?t.shape.x=v:t.shape.x=y,f&&(t.shape.a=p);var g=0;return function m(){if(l){if(t.shape.x>r)return;t.shape.y>i&&(t.shape.y=d,t.shape.x+=2*o)}else{if(t.shape.x<o)return;t.shape.y>i&&(t.shape.y=d,t.shape.x-=2*o)}t.group.colorArr.length>g&&(t.shape.color=t.group.colorArr[g++]),t.shape=_.clone(t.shape),e.shape.call(e,t.shape),t.shape.y+=2*o,u?setTimeout(m,c):m()}(),e}})}(),_motion=_.motion=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);var r=this;this.draw=e,this.motion=n.motion.motion||"move",this.link=n.motion.link,this.shadow=n.motion.shadow;var i=n.motion.speed||1,o=n.motion.zoomSpeed||1,a=n.motion.num||1,s=n.motion.colorful,u=n.motion.bounce,c=n.motion.click,h=this.draw.width,l=this.draw.height;this.groups=[],this.a=0,this.r=n.motion.r||100,this.centerX=h/2,this.centerY=l/2;var f=!!_.isUndefined(n.motion.follow)||n.motion.follow,p=function(t){return _.clone(t,{vx:(2*Math.random()-1)*i,vy:(2*Math.random()-1)*i,bounce:u,speed:i,zoomState:"in",followSpeed:.01+.04*Math.random(),follow:f,click:c,mass:t.r*t.r,top:0,left:0,right:h,bottom:l,animate:!1,lightState:1,zoomSpeed:o})};if(_.isArray(n.shape))n.shape.forEach(function(t){t=p(t);var n=e.shape(t);n.color(s),this.groups[this.groups.length]=n});else for(var d=0;d<a;d++){n.id=d;var v;n.group?(n.group=p(n.group),v=e.group(n)):(n.shape=p(n.shape),v=e.shape(n.shape),v.color(s)),this.groups[this.groups.length]=v}this.len=this.groups.length,this.animate=_.animate(r.setup.bind(r))}return createClass(t,{setup:function(){var t=this,e=t.groups,n=e.length,r=t.motion;t.shadow?t.draw.shadow():t.draw.clear(),e.forEach(function(i,o){var a=i.opt.group||i.opt;if(r.split("_").forEach(function(e){t[e]&&t[e](a),t.follow(a)}),i.setup&&i.setup(),t.link)for(var s=o;s<n-1;s++){var u=e[s+1],c=i.opt.group?[i.opt.group,u.opt.group]:[i.opt,u.opt];t.draw.link(c)}}),t.draw.canvas.callback&&t.draw.canvas.callback.call(t.draw.context,t.draw.context)},stop:function(){this.animate&&this.animate.stop()},follow:function(t){var e=this.draw.mouse;if(~["circle","ellipse"].indexOf(this.motion)){var n=this;if(t.follow&&e){var r=e.x-n.centerX,i=e.y-n.centerY;n.centerX+=r*t.followSpeed,n.centerY+=i*t.followSpeed}else t.click&&e&&(n.centerX=e.x,n.centerY=e.y)}else if(t.follow&&e){var r=e.x-t.x,i=e.y-t.y;t.x+=r*t.followSpeed,t.y+=i*t.followSpeed}else t.click&&e&&(t.x=e.x,t.y=e.y)},move:function(t){t.x+=t.vx||1,t.y+=t.vy||1,this.bounce(t)},sineMove:function(t){var e=this;t.x+=t.vx>0?1:-1,t.y+=_.sin(e.a)*e.r*(t.vy>0?1:-1),e.a+=t.speed,this.bounce(t)},bounce:function(t){t.bounce?t.x<t.left+t.width?(t.x=t.width,t.vx=-t.vx):t.y<t.top+t.height?(t.y=t.height,t.vy=-t.vy):t.x>t.right-t.width?(t.x=t.right-t.width,t.vx=-t.vx):t.y>t.bottom-t.height&&(t.y=t.bottom-t.height,t.vy=-t.vy):t.vx<0&&t.x<t.left-t.width?t.x=t.right+t.r:t.vy<0&&t.y<t.top-t.height?t.y=t.bottom+t.r:t.vx>0&&t.x>t.right+t.width?t.x=t.left-t.r:t.vy>0&&t.y>t.bottom+t.height&&(t.y=t.top-t.r)},collide:function(t,e){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);if(i<e.r+t.r){var o=Math.atan2(r,n),a=Math.sin(o),s=Math.cos(o),u=0,c=0,h=n*s+r*a,l=r*s-n*a,f=e.vx*s+e.vy*a,p=e.vy*s-e.vx*a,d=t.vx*s+t.vy*a,v=t.vy*s-t.vx*a,y=f-d;f=((e.mass-t.mass)*f+2*t.mass*d)/(e.mass+t.mass),d=y+f,u+=f,h+=d;var g=u*s-c*a,m=c*s+u*a,w=h*s-l*a,b=l*s+h*a;t.x=e.x+w,t.y=e.y+b,e.x=e.x+g,e.y=e.y+m,e.vx=f*s-p*a,e.vy=p*s+f*a,t.vx=d*s-v*a,t.vy=v*s+d*a}},transform:function(t){t.num+=t.speed},rotate:function(t){t.a+=t.speed},jiggle:function(t){t.x+=2*Math.random()-1,t.y+=2*Math.random()-1,this.bounce(t)},"float":function(t){var e=2*Math.random()-1;t.vx+=e,t.vy-=e,t.x+=t.vx||1,t.y+=t.vy||1,this.bounce(t)},curve:function(t){t.x+=t.vx||1,t.y+=t.vy||1,t.vy+=.01*t.vx*t.vx,this.bounce(t)},gravitate:function(t){t.vy+=.22,t.vx*=.998,t.y>t.bottom-t.height&&(t.vy*=.96),t.bounce=!0,this.move(t)},zoom:function(t){var e=t.minR||1,n=t.maxR||t.right/2,r=t.zoomSpeed||t.speed||1;t.r>=n?t.zoomState="out":t.r<=e&&(t.zoomState="in"),"in"===t.zoomState?t.r+=r:t.r-=r},zoomin:function(t){t.r+=t.speed||1},zoomout:function(t){t.r-=t.speed||1},circle:function(t){var e=this;t.x=e.centerX+_.sin(e.a)*e.r,t.y=e.centerY+_.cos(e.a)*e.r,e.a+=.1*t.speed},spiral:function(t){var e=this;this.circle(t),e.r+=e.swell||1,t.x+t.r>t.right||t.y+t.r>t.bottom?e.swell=-1:e.r<1&&(e.swell=1)},ellipse:function(t){var e=this;t.x=e.centerX+Math.sin(e.a)*e.r,t.y=e.centerY+Math.cos(e.a)*e.r*2,e.a+=t.speed},light:function(t){t.shadowBlur>=20?self.lightState=-1:t.shadowBlur<=0&&(self.lightState=1),t.shadowBlur+=t.speed*self.lightState},throbLight:function(t){var e=t.minR||1,n=t.maxR||t.right/2,r=t.maxShadowBlur||10,i=t.minShadowBlur||0,o=t.speed||1,a=o*(r-i)/(n-e);t.r>=n?(t.zoomState="out",t.shadowBlur=r):t.r<=e&&(t.zoomState="in",t.shadowBlur=i),"in"===t.zoomState?(t.r+=o,t.shadowBlur+=a):(t.r-=o,t.shadowBlur-=a)}})}(),_track=_.track=function(){function t(e,n){return this instanceof t?(n=n||{},this.draw=e,this.strategy=n.strategy||[n.callback],this.strategyIndex=n.strategyIndex||0,this.strategyAutoChange=!!_.isUndefined(n.strategyAutoChange)||n.strategyAutoChange,this.times=n.times||360,this.animate=n.animate||n.delay,this.delay=this.animate?n.delay||10:0,this.colors=n.colors,this.loop=!!_.isUndefined(n.loop)||n.loop,void(this.strategyClear=!!_.isUndefined(n.strategyClear)||n.strategyClear)):new t(e,n)}return createClass(t,{run:function(){var t=this;if(this.strategyAutoChange){var e=this.strategy.length;this.strategy.forEach(function(n,r){var i=function(){r+1===e?t.loop&&(t.draw.clear(),_.delay()):t.strategyClear&&t.draw.clear()},o=function(e){var r=n.call(t.draw,e);t.draw.point({x:r.x,y:r.y,r:1,color:t.colors[e]}),e+1===t.times&&i()};_.loop(o,t.times,t.delay)})}else{var n=function(e){var n=t.strategy[t.strategyIndex].call(t.draw,e);t.draw.point({x:n.x,y:n.y,r:1,color:t.colors[e]}),e+1===t.times&&t.loop&&(console.timeEnd("loop"),console.time("loop"),_.delay(t.draw.clear(),4e3))};console.time("loop"),_.loop(n,t.times,t.delay)}}})}(),_tarckStrategy=_.tarckStrategy=function(){var t=[],e=10,n=function r(n,i,o){if(!(this instanceof r))return new r(n,i,o);e=n||10,t=i;var a=[],s=0,u=0;for(var c in this.strategyObj)c===o&&(s=u),a[a.length]=this.strategyObj[c],u++;this.strategyIndex=s,this.strategy=a};return createClass(n,{strategyObj:{ellipse1:function(t){var n=this,r=n.o,i=100,o=360*t/e,a=_.pointPolar({r:i,a:o,o:r});return _.pointPolar({r:i*_.sin(o),a:0,o:{x:a.x,y:a.y}})},ellipse2:function(t){var n=this,r=n.o,i=100,o=360*t/e,a=_.pointPolar({r:i,a:o,o:r});return _.pointPolar({r:i*_.sin(o),a:180,o:{x:a.x,y:a.y}})},spiro:function(t){var n=this,r=n.o,i=100,o=360*t/e,a=50,s=1+i/a,u=_.pointPolar({r:i,a:o,o:r}),c=1,h=-1,l=s*o%360;return _.pointPolar({r:a*c,a:l*h,o:{x:u.x,y:u.y}})},cose:function(t){var n=this,r=n.o,i=50,o=360*t/e,a=50,s=1+i/a,u=_.pointPolar({r:i,a:o,o:r}),c=s*o%360;return _.pointPolar({r:a*(1+_.cos(c)),a:o,o:{x:u.x,y:u.y}})},lemniscate:function(t){var n=this,r=360*t/e,i=100,i=Math.sqrt(2*Math.pow(i,2)*_.cos(2*r)),o=n.o;return _.pointPolar({r:i,a:r,o:o})},circle:function(t){var n=this,r=100,i=360*t/e,o=n.o;return _.pointPolar({r:r,a:i,o:o})},cardioid:function(t){var n=this,r=360*t/e,i=100*(1+_.sin(r)),o=n.o;return _.pointPolar({r:i,a:r,o:o})},spiral:function(t){var n=this,r=n.o,i=30,o=0,a=.1,s=(n.width/2-i)/a/e;return _.pointPolar({r:i+a*t*s,a:o+t*s,o:r})}}})}(),_slider=_.slider=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);n=n||{};var r=this,i=e.width;this.color=n.color||"#000";this.draw=e,this.context=e.context,this.canvas=e.canvas,this.pause=n.pause||!1,this.x=n.x||30,this.y=n.y||10,this.height=n.height||20,this.width=n.width||i-2*this.x,this.max=n.max||100,this.min=n.min||0,this.loop=!!_.isUndefined(n.loop)||n.loop,this.colors=n.colors,this.timeInterval=_.isUndefined(n.timeInterval)?200:n.timeInterval,this.strategy=n.strategy||[n.callback],this.strategyIndex=n.strategyIndex||0,this.strategyAutoChange=!!_.isUndefined(n.strategyAutoChange)||n.strategyAutoChange,this.callback=function(t){var n=r.strategy[r.strategyIndex];n&&n.call(e,t),r.render(t)};var o=this.progess=n.progess||this.min;this.render(o),this.addEvent()}return createClass(t,{getColor:function(t){return this.colors?this.colors[(this.colors.length-1)*(t-this.min)/(this.max-this.min)<<0]:this.color},render:function(t,e){var n=this,r=this.context,i=this.x,o=this.y,a=this.height,s=this.width,u=this.max,c=this.min;this.progess=t,e=e||this.getColor(t),r.beginPath(),n.draw.setFillStyle(r,"#dedede"),r.rect(i,o,s,a),r.fill(),r.beginPath(),n.draw.setFillStyle(r,e),r.rect(i,o,s*(t-c)/(u-c),a),r.fill(),r.beginPath(),n.draw.setFillStyle(r,"#fff"),r.rect(0,o,i,a),r.fill(),n.draw.text({x:i-18,y:o+a/2,text:t,r:12})},addEvent:function(){var t=this,e=this.x,n=this.y,r=this.height,o=this.width,a=this.max,s=this.min,u=!1;toucher([{el:t.canvas,type:_touchstar,callback:function(c,h){var l=_.pos(h);l.y<n+r&&l.y>n?(t.pause=!0,i=s+(a-s)*(l.x-e)/o<<0,i=_.between(s,a,i),t.callback&&t.callback(i),u=!0):t.pause=!t.pause}},{el:t.canvas,type:_touchmove,callback:function(n,r){var c=_.pos(r);u&&(t.pause=!0,i=s+(a-s)*(c.x-e)/o<<0,i=_.between(s,a,i),t.callback&&t.callback(i))}},{el:t.canvas,type:_touchend,callback:function(t,e){u=!1}}])},run:function(){var t=this,e=this.max,n=this.progess,r=this.loop,i=this.timeInterval,o=this.callback;this.pause?o&&o(n):_.animate(function(){t.pause?n=t.progess:(o&&o(n++),n===e+1&&(n=t.progess=0,t.strategyAutoChange&&(t.strategyIndex=t.strategyIndex+1===t.strategy.length?0:t.strategyIndex+1),r||(t.pause=!0)))},i)}})}(),_sliderStrategy=_.sliderStrategy=function(){var t=10,e=[],n=function r(n,i,o){if(!(this instanceof r))return new r(n,i,o);t=n||10,e=i||_.color.circle(n+1);var a=[],s=0,u=0;for(var c in this.strategyObj)c===o&&(s=u),a[a.length]=this.strategyObj[c],u++;this.strategyIndex=s,this.strategy=a};return createClass(n,{strategyObj:{sierpinskiGroup:function(t){var e=this;e.clear(),e.group({shape:{shape:"sierpinski",num:t,r:60,a:0,lineWidth:1},group:{group:"polygon",num:t,r:60,rotation:!0,colorful:"circle"}})},spiral:function(n){var r=this,i=r.width,o=r.height,a=r.context,s=1,u=1,c=_.pointPolar({o:r.o}),h=[c],l=0;do{var f=c.toV().rotate(360*n/t);if(l%u===0){var p=f.abs();f=f.abs(p+s)}c=f.toP(c),h[h.length]=c,l++}while(c.x>0&&c.x<i&&c.y>0&&c.y<o);r.clear(),r.setLineWidth(a,1),r.setStrokeStyle(a,e[n]),a.beginPath(),h.forEach(function(t,e){r.line(a,t,0==e)}),a.stroke()},spiralPolygon:function(t){var n=this,r=n.width,i=n.height,o=100,a=3,s=o*_.cos(180/a),u=_.vector({x:r/2,y:i/2}),c=Math.log(u.abs()/s)/Math.log(1.05)<<0;n.clear(),_.loop(function(r){n.shape({shape:"cornercurve",num:a,r:o*Math.pow(1.05,r),a:5*r+t,color:e[t]})},c)},vertexRotate:function(n){var r=this,i=r.width,o=r.height,a=r.context,s=_.vertex({r:100,num:5,x:i/2,y:o/2}).vs,u=360*n/t;s=s.map(function(t,e){return t.rotate(u*e)}),r.clear(),r.setStrokeStyle(a,e[n]),r.link(s)},diagonal:function(t){var n=this;n.clear(),n.shape({shape:"polygon",num:t,r:100,color:e[t],showDiagonal:!0})},triaGroup:function(t){var e=this;e.clear(),e.group({shape:{shape:"polygon",num:3,r:60,lineWidth:2},group:{group:"polygon",num:t,r:60,colorful:"circle",rotation:!0}})},rectGroup:function(t){var e=this;e.clear(),e.group({shape:{shape:"polygon",num:4,r:60,lineWidth:2},group:{group:"polygon",num:t,r:60,colorful:"circle",rotation:!0}})},bomb:function(t){var n=this,r=n.width,i=n.height,o=n.context,a=_.vertex({shape:"ploygon",num:t||3,r:100,x:r/2,y:i/2}),s=a.vs,u=s.length,c=a.po;n.clear(),n.setStrokeStyle(o,e[t]),o.beginPath(),s.forEach(function(t,e){var n=s[e+1===u?0:e+1];o.moveTo(t.x,t.y),o.quadraticCurveTo(c.x,c.y,n.x,n.y)}),o.stroke()}}})}(),_draw=_.draw=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);var r=this;if(n)this.canvas=n,this.context=inBrowser?this.canvas.getContext("2d"):n.context;else if(inBrowser){if(e.el){var i=_.$(e.el);"canvas"===i.nodeName.toLowerCase()?this.canvas=i:(this.canvas=document.createElement("canvas"),i.appendChild(this.canvas))}else e.canvasid?(this.canvas=_.$("#"+e.canvasid),0===this.canvas.length&&(this.canvas=document.createElement("canvas"),this.canvas.id=e.canvasid)):e.container||e.containerid?(this.container=e.container?_.$(e.container):e.containerid?_.$("#"+e.containerid):document.documentElement,0===this.container.length?console.log("not found container:"+e.container):0===this.container.$("canvas").length?(this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas)):this.canvas=this.container.$("canvas")):this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");var o=!1,a=function(t,e){var n=_.pos(t),i=_.pos(e),a=r.mouse={x:i.x-n.x,y:i.y-n.y};r.opt&&(r.opt.motion||(r.opt.shape.begin&&r.clear(),r.opt.shape&&(r.opt.shape=_.extend(r.opt.shape,{x:a.x,y:a.y})),r.opt.group&&(r.opt.group=_.extend(r.opt.group,{x:a.x,y:a.y})),r.setup.call(r,r.opt))),o=!0},s=function(t,e){if(o){var n=_.pos(t),i=_.pos(e);r.mouse={x:i.x-n.x,y:i.y-n.y}}},u=function(t,e){o=!1};toucher([{el:this.canvas,type:"touchstart",callback:function(t,e){a(t,e)}},{el:this.canvas,type:"touchmove",callback:function(t,e){s(t,e)}},{el:this.canvas,type:"mousedown",callback:function(t,e){a(t,e)}},{el:this.canvas,type:"mousemove",callback:function(t,e){s(t,e)}},{el:this.canvas,type:"mouseup",callback:function(t,e){u(t,e)}}])}if(_.isObject(e)){this.options=e,e.fullscreen?this.fullscreen():this.size(e);var c={};[{k:"color",v:"background-color"},{k:"color",v:"background"},{k:"src",v:"background-image"},{k:"size",v:"background-size"},{k:"position",v:"background-position"},{k:"repeat",v:"background-repeat"}].forEach(function(t){t.v in e&&(c[t.k]=e[t.v])}),this.callback=e.callback,this.background(c,this.callback)}}return createClass(t,{size:function(t){var e=this,n=this.container||document.documentElement,r=t.scale||1,i={width:n.clientWidth,height:n.clientHeight},o=t.ratio;return _.isString(o)?~o.indexOf(":")?o.replace(/(\d+):(\d+)/,function(t,e,n){i.height=i.width*n/e}):isNaN(parseFloat(o))||(i.height=i.width*parseFloat(o)):_.isNumber(o)&&(i.height=i.width*o),["width","height"].forEach(function(n){e[n]=e.canvas[n]=(n in t?t[n]:i[n])*r}),this.o={x:this.width/2,y:this.height/2},this},fullscreen:function(){return this.size({ratio:"fullscreen"})},background:function(t,e){var n=this,r=n.canvas,i=n.context,o=t.src,a=t.size,s=t.position,u=t.repeat,c=t.color;return c&&(n.setFillStyle(i,c),i.fillRect(0,0,r.width,r.height)),o&&_.loadImg(o,function(t){var o=t.width,c=t.height,h=r.width,l=r.height;switch(a){case"cover":var f=_.max(h/o,l/c),p=o*f,d=c*f;if("center"===s){var v=f<=1?(h-p)/2:-(h-p)/2,y=f<=1?(l-d)/2:-(l-d)/2;i.drawImage(t,v,y,p,d)}else i.drawImage(t,0,0,p,d);break;case"contain":var f=_.min(h/o,l/c),p=o*f,d=c*f;if("center"===s){var v=(h-p)/2,y=(l-d)/2;i.drawImage(t,v,y,p,d)}else i.drawImage(t,0,0,p,d);"repeat"===u&&_.zipImg({img:t,zoom:f,callback:function(){var t=i.createPattern(this,"repeat");n.setFillStyle(i,t),i.fillRect(0,0,h,l),i.fill()}});break;case"stretch":i.drawImage(t,0,0,h,l);break;case"auto":i.drawImage(t,0,0);break;default:i.drawImage(t,0,0)}e&&e.call(n)}),this},toImage:function(){return this.canvas.toDataURL("image/jpeg")},toButton:function(t){return this.toElement({className:"btn",type:t})},toElement:function(e){var n=e.tag||e.nodeName||"div",r=document.createElement(n);switch(r.className=e["class"]||e.className,e.type){case"img":var i=document.createElement("img");i.src=this.toImage(),r.appendChild(i);break;case"background":r.style.backgroundImage="url("+this.toImage()+")";break;case"canvas":var o=this.canvas,a=t(this.options),s=this.context.getImageData(0,0,o.width,o.height);a.context.putImageData(s,0,0),r.appendChild(a.canvas);break;default:r.appendChild(this.canvas)}return r},save:function(){return this.context.save(),this},restore:function(){return this.context.restore(),this},setFillStyle:function(t,e){e=e||"#000000",t.fillStyle=e,t.setFillStyle&&t.setFillStyle(e)},setStrokeStyle:function(t,e){e=e||"#000000",t.strokeStyle=e,t.setStrokeStyle&&t.setStrokeStyle(e)},setLineWidth:function(t,e){var e=_.isUndefined(e)?.5:e;t.lineWidth=e,t.setLineWidth&&t.setLineWidth(e)},setShadowBlur:function(t,e){var e=_.isUndefined(e)?10:e;t.shadowBlur=e,t.setShadowBlur&&t.setShadowBlur(e),t.shadowColor="black"},setShadowColor:function(t,e){var e=_.isUndefined(e)?10:e;t.shadowColor=e,t.setShadowColor&&t.setShadowColor(e)},setLineJoin:function(t,e){e=e||"miter",t.lineJoin=e,t.setLineJoin&&t.setLineJoin(e)},setGlobalAlpha:function(t,e){e=e||1,t.globalAlpha=e,t.setGlobalAlpha&&t.setGlobalAlpha(e)},setGlobalCompositeOperation:function(t,e){e=e||"source-over",t.globalCompositeOperation=e,t.setGlobalCompositeOperation&&t.setGlobalCompositeOperation(e)},set:function(t){if(t){var e=this.context;t.randomColor&&(t.color=_.color().rgb()),this.setLineJoin(e,t.lineJoin),this.setLineWidth(e,t.lineWidth),this.setStrokeStyle(e,t.lineColor||t.color),t.shadowBlur&&this.setShadowBlur(e,t.shadowBlur),t.shadowColor&&this.setShadowColor(e,t.shadowColor),this.setFillStyle(e,t.color)}return this},fill:function(t){return t&&t.fill&&this.context.fill(),this},stroke:function(t){return t&&0===t.lineWidth?this:(this.context.stroke(),this)},fillstroke:function(t){return this.fill(t).stroke(t)},render:function(t,e){return this.fillstroke(t),t&&(t.showExcircle&&this.excircle(t),t.showIncircle&&this.incircle(t),t.showRadius&&this.radius(e,t),(t.showVertices||t.identifierVertices)&&this.vertices(e,t),t.showCenter&&this.centerPoint(t),t.showDiagonal&&this.diagonal(e,t),t.fillInterval&&this.zebra(e,t),t.showMirror&&this.mirror(e,t),t.showAngle&&this.includedAngle(e,t)),this},closePath:function(t){var e=this.context;if(t){var n=!!_.isUndefined(t.closed)||t.closed;n&&e.closePath()}else e.closePath();return this},beginPath:function(t){var e=this.context;if(t){var n=!!_.isUndefined(t.begin)||t.begin;n&&e.beginPath()}else e.beginPath();return this},shadow:function(t){var e=this.canvas,n=this.context;return t||(t=this.opt&&this.opt.global?this.opt.global.background:"#000"),n.save(),this.setGlobalCompositeOperation(n,"source-over"),this.setGlobalAlpha(n,.18),this.setFillStyle(n,t),n.fillRect(0,0,e.width,e.height),n.restore(),this},clear:function(t){var e=this.canvas,n=this.context;return t?(this.setFillStyle(n,t||this.options.background||"#ffffff"),n.fillRect(0,0,e.width,e.height)):n.clearRect(0,0,e.width,e.height),this},central:function(){return{x:this.canvas.width/2,y:this.canvas.height/2}},"default":function(t){var e=this;return t?_.isArray(t)?t.map(function(t){return _.clone(e["default"](),t)}):_.clone(this["default"](),t):{x:this.canvas.width/2,y:this.canvas.height/2,r:10}},shortName:function(t){return t&&[{k:"n",v:"num"},{k:"s",v:"shape"},{k:"showA",v:"showAngle"},{k:"showR",v:"showRadius"},{k:"showV",v:"showVertices"},{k:"showC",v:"showCenter"},{k:"showEC",v:"showExcircle"},{k:"showIC",v:"showIncircle"},{k:"showD",v:"showDiagonal"},{k:"showM",v:"showMirror"}].forEach(function(e){_.isUndefined(t[e.k])||(t[e.v]=t[e.k])}),t},line:function(t,e,n){e&&t[n?"moveTo":"lineTo"](e.x,e.y)},link:function(t,e){var n=this,r=this.context,i=t.length;this.beginPath(e);var o=e&&e.dashed?e.dashLength:5;if(e&&e.dashed&&!r.setLineDash?t.forEach(function(e,a){var s=t[a+1===i?0:a+1],u=e.dist(s),c=e.split(s,u/o<<0);c.unshift(e),c.push(s),c.forEach(function(t,e){n.line(r,t,e%2===0)})}):(e&&r.setLineDash&&(e.dashed?r.setLineDash([o]):e.dashed===!1&&r.setLineDash([])),t.forEach(function(t,e){n.line(r,t,0===e)})),e&&e.curve){var a=_pointPolar({o:this.o});t.forEach(function(e,n){var o=t[n+1===i?0:n+1],s=a.toV(e),u=a.toV(o),c=s.add(u).toP(a);r.moveTo(e.x,e.y),r.quadraticCurveTo(c.x,c.y,o.x,o.y)})}return e&&e.semiarc&&t.forEach(function(e,n){var o=t[n+1===i?0:n+1],a=e.mid(o),s=a.toV(e),u=a.toV(o);r.moveTo(e.x,e.y),r.arc(a.x,a.y,s.abs(),s.rad(),u.rad(),!1)}),n.closePath(e),n.render(e,t),this},includedAngle:function(t,e){function n(n,o){var a=t[o+1===i?0:o+1],s=t[o-1===-1?i-1:o-1],u=n.toV(a),c=n.toV(s),h=Math.round(_.deg(u.ia(c)));r.arc(n,10,u.rad(),c.rad());var l=n.toV().abs(e.r+15).toP(n.o);return r.text({x:l.x,y:l.y,text:h+""})}var r=this,i=t.length;return"all"===e.showAngle?t.map(function(t,e){return n(t,e)}):n(t[0],0)},arc:function(t,e,n,r){var i=this.context;i.beginPath(),i.moveTo(t.x,t.y),i.arc(t.x,t.y,e,n,r,!1),this.fillstroke(this.opt)},excircle:function(t){return this.shape(_.clone(t,{shape:"circle",text:""}))},incircle:function(t){var e=t.r*_.cos(180/t.num);return this.shape(_.clone(t,{shape:"circle",r:e,text:""}))},escribedcircle:function(t){},radius:function(t,e){var n=this.context,r=e.x,i=e.y;n.beginPath(),t.forEach(function(t){n.moveTo(r,i),n.lineTo(t.x,t.y)}),this.fillstroke(e)},vertices:function(t,e){var n=this,r=_.color().rgb(),i=e.animate,o=e.animationInterval||200;t.forEach(function(t,a){t.fill=!0,e.identifierVertices?(t.r=10,t.text=a+1,t.color="rgba(0,0,0,0.2)"):(t.color=r,t.r=3),i?_.delay(n.point,o,t):n.point(t)})},centerPoint:function(t){return this.point({r:3,x:t.x,y:t.y,color:_.color().rgb(),fill:!0})},diagonal:function(t,e){for(var t=t||this.vertices(e),n=[],r=t.length,i=0;i<r-2;i++)for(var o=i+2;o<r;o++)0===i&&o===r-1||n.push([t[i],t[o]]);return this.linkGroup(n,_.clone(e,{showVertices:!1}))},zebra:function(t,e){var t=t||this.vertices(e),n=e.x,r=e.y,i=_.slice(t,2).map(function(t){return t.concat([{x:n,y:r}])});return this.linkGroup(i,_.clone(e,{fill:!0,showVertices:!1,showExcircle:!1,fillInterval:!1}))},mirror:function(t,e){var n=this,r=_.vertex(e),i=r.po;t.forEach(function(t,r){var o=i.mirror(t);n.shape(_.clone(e,{x:o.x,y:o.y,a:o.a+180,showMirror:!1}))})},linkGroup:function(t,e){var n=this;if(e&&e.animate){_.extend(e,{animate:!1});var r=e.animationInterval||0;t.forEach(function(t,i){_.delay(n.link,r,t,e)})}else t.forEach(function(t){n.link(t,e)});return n},text:function(t){return this.shape(_.clone({s:"text"},t))},point:function(t){return this.shape(_.clone({s:"circle",r:6,color:"rgba(0,0,0,0.2)",fill:!0},t))},shape:function(t){var e=this;if(_.isArray(t))return t.map(function(t){return e.shape(t)});if(t=e.shortName(t),t=e["default"](t),"random"===t.color&&(t.color=_.color().rgb()),e.save().set(t),t.animate&&t.easing&&_tween({start:{x:t.x,y:0,a:t.a-180},to:{x:t.x,y:t.y,a:t.a},duration:t.animationInterval||2e3,type:t.easing,callback:function(n){e.clear(),e.shape(_.clone(t,n,{easing:!1}))}}),t.delay)return _.delay(e.shape,t.delay,_.clone(t,{delay:!1}));var n=_.shape(e,t);return t.disappear&&this.disappear(t),e.restore(),n},group:function(t){var e;return t.group?(t.group=this.shortName(t.group),t.group=this["default"](t.group),t.group.animate&&t.group.easing&&"none"!==t.group.easing?_tween({start:{r:t.group.r+100,a:t.group.a-180},to:{r:t.group.r,a:t.group.a},duration:t.group.animationInterval||2e3,type:t.group.easing,callback:function(n){_.extend(t.group,n,{easing:!1}),self.clear(),e=_shapeGroup(self,t)}}):e=_shapeGroup(this,t)):e=this.shape(t.shape),this.canvas.callback&&this.canvas.callback.call(this.context,this.context),e},motion:function(t){var e=this;t.motion=this.shortName(t.motion);var n=function r(){e.mouse={x:e.canvas.width*Math.random(),y:e.canvas.height*Math.random()},e.mouseTimmer=setTimeout(r,t.motion.simulateInterval||1e3)};return e.mouseTimmer&&clearTimeout(e.mouseTimmer),t.motion.simulate&&n(),_motion(this,t)},global:function(t){if(!t||!t.global)return this;t.global.backgroundSize&&this.size({ratio:t.global.backgroundSize});var e=this.context;return this.setGlobalAlpha(e,t.global.alpha),t.global.compositeOperation&&this.setGlobalCompositeOperation(e,t.global.compositeOperation),t.global.showBackground&&t.global.background&&(this.setFillStyle(e,t.global.background),e.fillRect(0,0,this.width,this.height)),"none"!==t.global.movie?(this[t.global.movie](t.group||t.shape),!1):(t.global.showGrid&&("ecgGrid"===t.global.grid?this.ecgGrid(t.global):this.grid(t.global)),this)},setup:function(t){var e=this;return _.isArray(t)?t.map(function(t){return e.setup.call(e,t)}):(this.opt=t,this.global(t)?t.motion?this.motion(t):this.group(t):void 0)},verticesGroup:function(t){var e=this,n=e.vertices(t.group);return n.map(function(n){return e.vertices(_.clone(t.shape,{x:n.x,y:n.y}))})},translate:function(t,e,n){for(var t=this["default"](t),r=[],i=t.interval||10,o=t.step||1,a=t.direction||0,s=(t.x,t.y,_.pointPolar({o:{x:t.x,y:t.y}})),u=0;u<o;u++){var c=s.clone({r:i,a:a});r.push(c)}return r},origin:function(t){var e=this.context;return t?(e.translate(t.x,t.y),this):{x:0,y:0}},_grid:function(t,e){var n=this.context,r=this.width,i=this.height;n.strokeStyle=t,n.strokeWidth=1,n.beginPath();for(var o=.5;o<r;o+=e)n.moveTo(o,0),n.lineTo(o,i);for(var a=.5;a<i;a+=e)n.moveTo(0,a),n.lineTo(r,a);n.stroke()},grid:function(t){t=t||{};var e=t.background||t.color||_.color().rgb();this._grid(e,10)},ecgGrid:function(t){t=t||{};var e=this,n=_.color(),r=t.background||t.color||n.rgb(),i=n.light(r,.5),o=n.light(i,.5);[o,i,r].forEach(function(t,n){e._grid.call(e,t,3*Math.pow(5,n))})},dial:function(t){for(var e=t.r||50,n=[],r=[],i=_.pointPolar({r:e,a:0,o:this.o}),o=15,a=0,s=0;a<360;a+=2.8125,++s)s%4===0?n[n.length]=[i.clone({r:e-o,a:a}),i.clone({r:e,a:a})]:r[r.length]=[i.clone({r:e-o/2,a:a}),i.clone({r:e,a:a})];this.linkGroup(n,t),this.linkGroup(r,t)},reverse:function(){for(var t=this.canvas,e=this.context,n=e.getImageData(0,0,t.width,t.height),r=0;r<n.data.length;r+=4)n.data[r]=255-n.data[r],n.data[r+1]=255-n.data[r+1],n.data[r+2]=255-n.data[r+2],n.data[r+3]=255;e.putImageData(n,0,0)},getPixels:function(t){var e=(this.canvas,this.context),n=this.width,r=this.height,i=e.getImageData(0,0,n,r),o=t?Math.sqrt(t*n/r):100,a=t?Math.sqrt(t*r/n):100,s=i.width/o<<0,u=i.height/a<<0;console.log(i.data.length);for(var c=[],h=0;h<o;h++)for(var l=0;l<a;l++){var f=l*u*i.width+h*s,p=i.data[4*f],d=i.data[4*f+1],v=i.data[4*f+2],y=i.data[4*f+3],g=h*s,m=l*u,w="rgba("+[p,d,v,Math.round(10*y/255)/10]+")";if(y>10){var b=_.point({x:g,y:m,color:w,r:1});c.push(b)}}return c},disappear:function(t){function e(){r.clear(),o.forEach(function(t){r.point(t.move())}),n=setTimeout(e,17)}var n,r=this,i=t.disappear||1e3,o=this.getPixels();setTimeout(function(){e()},i),setTimeout(function(){r.clear(),n&&clearTimeout(n)},i+1e4)},starrySky:function(t){function e(){n.shadow();var t=[],e=l.length;l.forEach(function(r,i){r.move(),n.point({x:r.x,y:r.y,r:r.r,color:r.color});for(var o=i+1;o<e;o++){var a=new p(r,l[o]);a.life&&(t[t.length]=a)}}),t.forEach(function(t){n.setLineWidth(o,2.5*t.alptha),n.setStrokeStyle(o,color.mix(t.a.color,t.b.color)),n.link([t.a,t.b])})}for(var n=this,r=this.width,i=this.height,o=this.context,a=t.num||10,s=t.maxNum||100,u=_.point({x:Math.random()*r,y:Math.random()*i,speed:t.speed||.5,height:i,width:r,color:"rgba(0,0,0,0.2)",r:1}),c=function(){return Math.random()>.9?3+3*Math.random():1+3*Math.random()},h=_.color.circle(a),l=[];a--;)l[l.length]=u.clone({x:Math.random()*r,y:Math.random()*i,r:c(),color:h[a]});var f=t.lineMaxLength||_.min(r/4,200),p=(t.background||_.color.deepdark(),function(t,e){this.a=t,this.b=e,this.len=_.vector({x:t.x-e.x,y:t.y-e.y}).abs(),this.life=this.len<f,this.alptha=1-this.len/f});toucher([{el:n.canvas,callback:function(t,e){var n=_.pos(e);l[l.length]=u.clone({x:n.x,y:n.y,r:c(),color:color.rgb()}),l.length>=s&&l.shift()}},{el:n.canvas,type:"touchmove",callback:function(t,e){var n=_.pos(e),r=l[l.length-1];r.x=n.x,r.y=n.y}}]),_.animate(function(){e(),render()})},firework:function(t){function e(){a.forEach(function(t,e){if(t.move().reborn){for(var n=20;n--;)s[s.length]=new p(t,h[e]);t.reset()}});for(var t=s.length-1;t>=0;t--){var e=s[t];e&&e.move().die&&s.splice(t,1)}}function n(){r.shadow(),r.setGlobalCompositeOperation(i,"screen"),r.setGlobalAlpha(i,1),a.forEach(function(t){r.point({x:t.x,y:t.y,r:t.r,color:t.color})}),s.forEach(function(t){r.setGlobalAlpha(i,t.alpha),r.point({x:t.x,y:t.y,r:t.r,color:t.color})})}t=t||{};var r=this,i=this.context,o=(this.width,this.height),a=[],s=[],u=t.num||5,c=100,h=_.color.circle(u),l=this.o,f=function(){this.x=Math.random()*c/2-c/4+l.x,this.y=Math.random()*c*2+o,this.r=Math.random()+.5,this.color="#fd1",this.vx=Math.random()-.5,this.vy=-(Math.random()+4),this.ax=.02*Math.random()-.01,this.far=Math.random()*c+(l.y-c),this.base={x:this.x,y:this.y,vx:this.vx}};f.prototype.reset=function(){this.y=this.base.y,this.x=this.base.x,this.vx=this.base.vx,this.ax=.02*Math.random()-.01,this.reborn=!1},f.prototype.move=function(){return this.x+=this.vx,this.y+=this.vy,this.vx+=this.ax,this.y<=this.far&&(this.reborn=!0),this};var p=function(t,e){this.x=t.x,this.y=t.y,this.r=Math.random()+1.5,this.color=e,this.vx=5*Math.random()-2.5,this.vy=Math.random()*-5+1.5,this.ay=.05,this.alpha=1,this.life=Math.round(Math.random()*c/2)+c/2,this.base={life:this.life,r:this.r}};p.prototype.move=function(){return this.x+=this.vx,this.y+=this.vy,this.vy+=this.ay,this.alpha=this.life/this.base.life,this.r=this.alpha*this.base.r,this.alpha=this.alpha>.6?1:this.alpha,this.life--,this.life<=0&&(this.die=!0),this};for(var d=0;d<u;d++)a[a.length]=new f;_.animate(function(){e(),n()})},rain:function(t){function e(t,e,n){for(var r=Math.floor(5*Math.random()+5),i=0;i<r;i++)p[p.length]=new c(t,e,n)}function n(){p.forEach(function(t){t.move()});for(var t=p.length-1;t>=0;t--)p[t]&&p[t].die&&p.splice(t,1);l+=(f-l)/50,v.length<=50&&(v[v.length]=new u(2*Math.random()*a-.5*a));var n=s-Math.random()*s/5;v.forEach(function(t){t.y+t.h>n&&Math.random()>.75&&(e(t.x+l*t.h,t.y+t.h,t.color),t.die=!0),t.y>=s?t.die=!0:(t.y+=t.speed,t.x+=t.speed*l)});for(var t=v.length-1;t>=0;t--)v[t]&&v[t].die&&v.splice(t,1)}function r(){i.shadow(),v.forEach(function(t){o.strokeStyle=t.color,o.lineWidth=3,o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(t.x+l*t.h,t.y+t.h),o.stroke()}),p.forEach(function(t){o.lineWidth=1,o.strokeStyle=t.color,o.beginPath(),o.arc(t.x,t.y,t.r,Math.random()*Math.PI*2,1*Math.PI),o.stroke()})}t=t||{};var i=this,o=this.context,a=this.width,s=this.height,u=function(t){var e=.25*(50+100*Math.random());this.speed=2*(6*Math.random()+3),this.die=!1,this.x=t,this.y=-200,this.h=e,this.color=_.color("gray").rgb()},c=function(t,e,n){this.die=!1,this.x=t,this.y=e,this.vx=8*(Math.random()-.5),this.vy=Math.random()*-6-3,this.r=1.5*Math.random()+1,this.color=n},h=.5,l=0,f=0;c.prototype.move=function(){this.vx=this.vx+l/2,this.x=this.x+this.vx,this.vy=this.vy+h,this.y=this.y+this.vy,this.y>s&&(this.die=!0)};var p=[],d=[0,0],v=[];_.animate(function(){n(),r()}),toucher({el:i.canvas,type:"touchmove",callback:function(t){d[0]=t.clientX,d[1]=t.clientY,f=(t.clientX-a/2)/(a/2)}})},vertexTransform:function(t){function e(){var e=_.vertex(t).vs;return e.map(function(t){return _.extend(t,{vx:(2*Math.random()-1)*i,vy:(2*Math.random()-1)*i})})}function n(){r.shadow(),s.forEach(function(t,e){t.x+=t.vx,t.y+=t.vy,t.x<0||t.x>u?t.vx=-t.vx:(t.y<0||t.y>c)&&(t.vy=-t.vy),t1=s[e+1==p?0:e+1];var n=new l(t,t1);f[f.length]=n,f.length>p&&f.shift(),n.alptha<=0&&(t.vx=-t.vx,t.vy=-t.vy)}),o.beginPath(),s.forEach(function(t,e){var n=s[e+1===p?0:e+1],r=d.toV(t),i=d.toV(n),a=r.add(i).toP(d);o.moveTo(t.x,t.y),o.quadraticCurveTo(a.x,a.y,n.x,n.y)}),o.stroke()}t=this["default"](t);var r=this,i=1,o=this.context,a=_.color().rgb();r.setStrokeStyle(o,a);var s=e(),u=this.width,c=this.height,h=t.lineMaxLength||_.min(u/4,200),l=function(t,e){this.a=t,this.b=e,this.len=_.vector({x:t.x-e.x,y:t.y-e.y}).abs(),this.life=this.len<h,this.alptha=1-this.len/h},f=[],p=s.length,d=_.vertex(t).po;_.animate(n)},vertexRotate:function(t){function e(){n.shadow(),i=i.map(function(t,e){return t.rotate(e*o)}),n.link(i)}t=this["default"](t);var n=this,r=this.context,i=_.vertex(t).vs,o=(t.num||10,1),a=_.color().rgb();n.setStrokeStyle(r,a),_.animate(e)},track:function(t){t=t||{};var e=t.times||360,n=_.color.circle(e+1),r=t.strategyName||t.name||"",i=_tarckStrategy(e,n,r),o=_.extend({times:e,delay:10,colors:n,
strategy:i.strategy},t);r&&(o.strategyAutoChange=!1,o.strategyIndex=i.strategyIndex),_track(draw,o).run()},slider:function(t){var e=t.max||50,n=t.strategyName||t.name,r=_.color.circle(e+1),i=_.sliderStrategy(e,r,n),o={max:e,colors:r,progess:1,strategy:i.strategy};n&&(o.strategyAutoChange=!1,o.strategyIndex=i.strategyIndex),_.slider(draw,o).run()},randomPointInCircle:function(t){t=t||{};var e=this,n=t.num||100,r=t.r||100,i=[],o=this.o;_.createClass(_.pointPolar,{bound:function(){return this.toV().abs()>r&&(this.vx*=-1,this.vy*=-1),this}});for(var a=0;a<n;a++){var s=_.pointPolar({r:Math.sqrt(Math.random())*r,a:360*Math.random(),o:o});i[i.length]=s.speed()}var u=function(){e.clear(),e.shape({shape:"circle",r:r}),i=i.map(function(t){return e.point({x:t.x,y:t.y,r:1}),t.move().bound()})};_.animate(u)}})}(),createOptCycle=_.createOptCycle=function(t){var e={data:{},methods:{autoNext:function(t,n){if(inBrowser){var r=t.closest(".tab-body-item").attr("name"),i=t.name,o=t.checked;e.data[r][i].auto=o,console.log(i,o)}}},filters:{toggle:function(t){return t===!0?"":""},color:function(t){return inBrowser?t+'<div class="colorblock" style="background-color:'+t+'"></div>':t}}};for(var n in t){var r=t[n];if(_.isObject(r)){e.data[n]={};for(var i in r){var o=r[i];if("switch"===i)e.data[n][i]=o;else{var a=o.type,s=null;switch(a){case"picker":case"picker_multi":s=_.cycle(o.values,o.index||0);break;case"slider":s=_.sliderCycle(o);break;case"color":case"color_rgba":case"color_rgb":var u=o.length||15,c=["#000","#fff"].concat(_color().circle(u));s=_.cycle(c,0);break;case void 0:_.isBoolean(o)?(s=_.cycle([{key:!0,text:""},{key:!1,text:""}],o?0:1),s.type="toggle",s.value=o):_.isObject(o)?_.isBoolean(o.value)&&(s=_.cycle([{key:!0,text:""},{key:!1,text:""}],o.value?0:1),s.type="toggle",s.value=o.value):_.isString(o)&&(e.data[n][i]=o)}s&&(o.text&&(s.text=o.text),o.auto&&(s.auto=o.auto),o.type&&(s.type=o.type),e.data[n][i]=s)}}}}return e.init=function(){var t={};for(var n in e.data){var r=e.data[n];if(_.isObject(r)){if(~["group","motion"].indexOf(n)&&"off"===r["switch"])continue;t[n]={};for(var i in r){var o=r[i];_.isBoolean(o)?t[n][i]=o:_.isObject(o)?_.isBoolean(o.value)?(t[n][i]=o.value,o.auto&&(o.value=!o.value)):(t[n][i]=_.isObject(o.val())?o.val().key:o.val(),o.auto&&o.next&&o.next()):_.isString(o)&&(t[n][i]=o)}}}return t},e.viewData=function(){var t=e.data,n=[];for(var r in t){var i={key:r,items:[],"switch":"none",active:!1};n[n.length]=i;var o=t[r];if(_.isObject(o))for(var a in o){var s=o[a];if("text"===a)i[a]=s;else if("switch"===a)i[a]=s,i[a+"Method"]=_.camelCase("next",r,a);else if("active"===a)i[a]=s;else{var u={key:a,value:s,text:a,id:r+"_"+a};_.isBoolean(s)?(u.filter="toggle",u.value=e.filters.toggle(s)):_.isNumber(s)?u.filter="string":_.isObject(s)?(u=_.extend(u,s),_.isBoolean(s.value)?u.value=e.filters.toggle(s.value):_.isObject(s.val())?u.value="text"in s.val()?s.val().text:s.val():~["color","lineColor","background","shadowColor"].indexOf(u.key)?u.value=e.filters.color(s.val()):u.value=s.val()):u.filter=a,i.items[i.items.length]=u}}}return{tabs:n}},e.setVal=function(t,n){return _.setVal(e.data,t,n)},e.getVal=function(t){return _.getVal(e.data,t)},e},tasker=_.tasker=function(){function t(e){if(!(this instanceof t))return new t(e);var n=e.file,r=(this.data=e.data,e.callback);"undefined"!=typeof Worker&&("undefined"==typeof this.w&&(this.w=new Worker(n)),this.w.addEventListener("message",function(t){console.log(t.data),r&&r(t.data)}))}return createClass(t,{open:function(t,e){return this.w.postMessage({name:t,act:"open",cfg:_.clone(this.data,e)}),console.log("task open: "+t),this},close:function(t){return this.w.postMessage({name:t,act:"close"}),console.log("task close: "+t),this}})}(),scroller=_.scroller=function(){function t(e){if(!(this instanceof t))return new t(e);var n=this;if(e){var r=function(){toucher({el:n.el,type:"scroll",callback:function(){n.onScroll&&n.onScroll.call(n.el)}})};n.root=document.body,_.isObject(e)?(n.el=e.el?_.query(e.el):n.root,n.onTop=e.onTop,n.onBottom=e.onBottom,n.onScroll=e.onScroll):_.isString(e)?n.el=_.query(e):_.isFunction(e)&&(n.el=n.root,n.onScroll=e),n.onScroll&&r()}else n.el=n.root;n.isRoot=!!~["HTMLHtmlElement","HTMLBodyElement","htmldocument"].map(function(t){return t.toLowerCase()}).indexOf(_.type(n.el)),n.isRoot?n.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0:n.scrollTop=n.el.scrollTop}return createClass(t,{toView:function(t){t=_.query(t)||this.el,t.scrollIntoView()},atTop:function(){return 0===this.el.scrollTop},atBottom:function(){return this.isRoot?this.el.scrollTop+this.el.clientHeight===this.el.offsetHeight:this.el.scrollTop+this.el.clientHeight===this.el.scrollHeight},toTop:function(t){this.el.scrollTop=0,t&&t.call(this.el)},toBottom:function(t){this.el.scrollTop=this.el.scrollHeight,t&&t.call(this.el)},scrollpage:function(t,e){var n=this,r=e||10;switch(n.timer&&clearTimeout(n.timer),n.srollerTimer&&clearTimeout(n.srollerTimer),t){case"up":n.el.scrollTop-=r;break;case"down":n.el.scrollTop+=r}e||(n.timer=setTimeout(function(){n.scrollpage.call(n,t)},17))},to:function(t,e){window.scrollTo(t,e)},up:function(t){this.scrollpage.call(this,"up",t)},down:function(t){this.scrollpage.call(this,"down",t)},stop:function(){this.timer&&clearTimeout(this.timer)}})}(),router=_.router=function(t){function e(t){if(!(this instanceof e))return new e(t);this.pageStack=[],this.configs=[],this.pageAppend=function(){},this.defaultPage=null,this.pageIndex=1,this.routes={},this.defaultAction="home";var n=this;t&&(this.routes=t),addEvent("hashchange",window,function(){var t=n.parseUrl();n._go(t.route)}),history.state&&history.state.pageIndex&&(this.pageIndex=history.state.pageIndex),this.pageIndex--;var r=0===location.hash.indexOf("#")?location.hash:"#",i=n._find("url",r)||n.defaultPage;this._go(i)}return createClass(e,{getAction:function(t){return this.routes[t]?this.routes[t]:this.defaultAction},getSearch:function(){var t=location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(){var t=location.href.match(/#(.*)$/);return t?t[1]:""},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getPath:function(){var t=this.decodeFragment(location.pathname+this.getSearch()).slice(0);return"/"===t.charAt(0)?t.slice(1):t},parseUrl:function(){var t={},e=location.href,n=location.hash,r=n,i=function(){var t=location.href.match(/#(.*)$/);return t?t[1]:""},o=this.getPath();return n=i(),e.replace(/[?&](.+?)=([^&#]*)/g,function(_,e,n){t[e]=decodeURI(n)}),n&&(n=n.length>1?n.replace(/#+/g,"#"):"",r=n.replace(/#/g,"")),{params:t,hash:n,route:r,path:o}},push:function(t){return this.configs.push(t),this},go:function(t){t&&(location.hash=t)},_go:function(t){this.pageIndex++,history.replaceState&&history.replaceState({pageIndex:this.pageIndex},"",location.href);var e=this.getAction(t);_.isFunction(e)?e.call(this):console.log(e),console.log(this.pageIndex)},back:function(){history.back()},_back:function(t){this.pageIndex--;var e=this.pageStack.pop();if(e){var n=0===location.hash.indexOf("#")?location.hash:"#",r=this._findInStack(n);if(!r){var i=_.$(t.template).addClass("js_show").addClass(t.name);i.insertBefore(e.dom),t.isBind||this._bind(t),this.pageStack.push({config:t,dom:i})}return this}},_findInStack:function(t){for(var e=null,n=0,r=this.pageStack.length;n<r;n++){var i=this.pageStack[n];if(i.config.url===t){e=i;break}}return e},_find:function(t,e){for(var n=null,r=0,i=this.configs.length;r<i;r++)if(this.configs[r][t]===e){n=this.configs[r];break}if(!n){var n={template:e,id:e,url:e};n[t]=e,this.push(n)}return n},_bind:function(t){var e=t.events||{};for(var n in e)for(var r in e[n]);t.isBind=!0}})}(),reg_tpl_tag=/{=(.*?)(?:\|(.*?))?}/g,reg_operation_symbol=/[\+|\-|\*|\/|\(|\)]+/g,rootEl,$index=1,$length=1,toucher,customFilters={},customSyntax="",customMethods={},customDirectives={},templateConfig={},SYNTAX="syntax",GROUP="group",LAZY="lazy",MORE="more",DEFAULT="default",DATA="data",PAGESIZE="pagesize",KEYWORD="keyword",TEMPLATE="template",NOLOOP="noloop",LOOP="loop",MODEL="model",TAP="tap",LONGTAP="longtap",DRAG="drag",ON="on",BIND="bind",StandardFilters={string:function(t){return(_.isArray(t)||_.isObject(t))&&(t=_.stringify(t)),t},first:function(t){return _.isArray(t)&&(t=t[0]),t},last:function(t){return _.isArray(t)&&(t=t[t.length-1]),t},pre:function(t){return _.preHtml(t)},"int":function(t){return _.isNumber(+t)?Math.round(+t):t},number:function(t){return+t},wan:function(t){return+t>1e4?(+t/1e4).toFixed(1)+"":t},fixed:function(t){return(+t).toFixed(1)},cent:function(t){return(+t/100).toFixed(2)},percent:function(t){return Math.ceil(100*t)+"%"},yearmonth:function(t){return new Date((+t)).format("YYYYMM")},monthdaytime:function(t){return new Date((+t)).format("MMDD HH:mm")},datetime:function(t){return new Date((+t)).format("YYYY-MM-DD HH:mm")},date:function(t){return new Date((+t)).format("YYYY-MM-DD")},time:function(t){return new Date((+t)).format("HH:mm")},avatar:function(t){return t?' style="background-image: url('+t+');"':""},file:function(t){return"<div data-file='"+t+"'></div>"},text:function(t){return _.escape(t)}};["markdown","escape","unescape"].forEach(function(t){StandardFilters[t]=function(e){return _[t](e)}}),["round","ceil","floor"].forEach(function(t){StandardFilters[t]=function(e){return _.isNumber(+e)?Math[t](+e):e}});var callFilter=function(t,e,n){if(e){var r=this,i=function(t,e,n){var i=customFilters[e];if(_.isUndefined(i))return t;if(_.isFunction(i))t=i.call(r,t,n);else try{var o=new Function("return ("+i+".call(this,arguments[0]));");t=o.call(r,t,n)}catch(a){console.log(a);try{var o=new Function("data","return ("+i+");");t=o.call(r,t,n)}catch(a){console.log(a),t=i}}return t},o=(""+e).split(","),a=o.length;a>0&&"string"!==o[a-1]&&o.push("string"),o.forEach(function(e){t=i.call(r,t,e,n)})}return t},regModel=/<[^>]+?model=\"(.*?)\".*?(>.*?<)\/[^>]+?>/gi,regbind=/<[^>]+?bind=\"(.*?)\".*?(>.*?<)\/[^>]+?>/gi,preModel=function(t){var e=new RegExp([regModel.source,regbind.source].join("|")+"|$","gi");return t.replace(e,function(t,e,n,r,i){return e=e||r,n=n||i,t.replace(n,">{="+e+"}<")})},parseTag=_.parseTag=function(t,e){var n=this;return t.replace(reg_tpl_tag,function(t,r,i){r=r.trim(),i=(i||"string").trim();var o="";try{if(0===i.indexOf("$")&&(i=e[i.substr(1)]),"$index"===r.toLowerCase())return $index++;if("$length"===r.toLowerCase())return $length;o="$this"===r.toLowerCase()?e:reg_operation_symbol.test(r)?e.cmd(r):_.getVal(e,r)}catch(a){console.log(a,e)}return _.isUndefined(o)&&(o=""),o=callFilter.call(n,o,i,e)})},parseTpl=_.parseTpl=function(t){var e=t||this,n=e.tpl||getTpl(e.template),r=e.groupTpl,i=e.lazyTpl,o=e.moreTpl,a=e.defaultTpl,s=e.loop,u=e.syntax,c=e.data;if(_.isEmpty(n)&&_.isEmpty(r))return"";n&&(n=preModel(n)),$index=1;var h="";if(_.isUndefined(c))l=0,h=_.isUndefined(a)?n:a;else if(_.isArray(c)){var l=c.length,f=Number(s)||l;(o||i)&&f>=l&&(f=3);for(var p=[],d="",v="",y=0;y<l;y++){var g=c[y];if(_.isUndefined(r)||(v=parseTag.call(e,r,g),v!==d&&p.push(v),d=v),y>=f){if(!_.isUndefined(o)){p.push(parseTag.call(e,o,g));break}if(_.isUndefined(i))break;p.push(parseTag.call(e,i,g))}else n&&p.push(parseTag.call(e,n,g))}h=p.join("")}else _.isObject(c)?(l=1,n&&(h=parseTag.call(e,n,c))):(l=1,h=n);var u=u||customSyntax,m={markdown:_.markdown,pre:_.preHtml};return u in m?m[u](h):h},getTpl=_.getTpl=function(t){if(t){var e=_.query(t.pound());return e&&e.length>0?_.text(e).trim():null}return null},elTpl=function(t){var e,n;return _.hasAttr.call(this,t)&&(n=this.attr(t),e="this"===n||_.isEmpty(n)?_.html(this).trim():getTpl(n)),e},parseEl=function(){var t,e,n,r=this,i=r.el,o=r.data,a=r.act,s=r.keyword;if(r.tpl=r.template||elTpl.call(i,TEMPLATE),[GROUP,LAZY,MORE,DEFAULT].forEach(function(t){r.templates&&!_.isUndefined(r.templates[t])?r[t+"Tpl"]=r.templates[t]:r[t+"Tpl"]=elTpl.call(i,t)}),r.tpl)n="auto";else if(r.groupTpl);else if(t=i.html(),n="1",!reg_tpl_tag.test(t))return parseDirective.call(r,i,o),!1;if(_.hasAttr.call(i,SYNTAX)&&(e=i.attr(SYNTAX)),_.hasAttr.call(i,NOLOOP)&&(n="1"),_.hasAttr.call(i,LOOP)&&(n=i.attr(LOOP)),_.hasAttr.call(i,PAGESIZE)&&(n=i.attr(PAGESIZE)),_.hasAttr.call(i,DATA)){var u=i.attr(DATA);_.has(o,u)&&(o=o[u])}if(_.isArray(o)&&s&&_.hasAttr.call(i,KEYWORD)){var c=i.attr(KEYWORD);o=_.filter(o,function(t){var e=c.split(",");if(1===e.length)return _.has(_.getVal(t,c),s);var n=!1;return e.forEach(function(e){_.has(_.getVal(t,e),s)&&(n=!0)}),n})}$length=_.isArray(o)?o.length:_.isUndefined(o)?0:(_.isObject(o),1);var h=_.clone(r,{data:o,loop:n,syntax:e}),l=parseTpl.call(h);switch(a){case"append":l=i.html()+l;break;case"before":l+=i.html()}(r.tpl||i.attr(TEMPLATE)||i.attr(GROUP))&&i.html(l),parseDirective.call(r,i,o)},StandardDirectives={},parseDirective=function(t,e){var n=this,r=t.query(MODEL.brackets()),i=function(t,e){if(_.isElement(this)){var r=this.attr(ON),i=n.methods[r];i&&_.isFunction(i)&&i.call(n,this,e)}};StandardDirectives[ON]=i;var o;_.each(StandardDirectives,function(e,r){o=r===DRAG?DRAG:TAP;var i=_.$(r.brackets(t));if(ON!==r){var a=function(t,e){var i=n.methods["_on_"+r];i&&_.isFunction(i)&&i.call(n,t,e)};toucher({el:i,type:o,clear:!0,listener:a})}else toucher({el:i,type:o,clear:!0,listener:e})}),r&&r.length>0&&r.each(function(t,e){var n=this.attr(MODEL),r=_.query(this).val();template.prototype[n]=r;var i=_.clone(template.prototype);Object.defineProperty(template.prototype,n,{set:function(t){var e=i[n];i[n]=t,t!==e&&template.prototype.apply(n,t)},get:function(){return i[n]},enumerable:!0,configurable:!0})}),r&&r.length>0&&r.on("keyup",function(){var e=_.query(this).val(),n=this.attr(MODEL);t.query(MODEL.brackets()).html(e),console.log(e,n),template.prototype[n]=e})},template=_.template=function(){function t(e){if(!(this instanceof t))return new t(e);var n=this,r=arguments.length;switch(n.methods={},r){case 0:if(_.isEmpty(n.el))return;break;case 1:if(_.isArray(e))return e.map(function(t){return template(t)});_.isObject(e)&&_.each(e,function(t,r){switch(r){case"el":if(n.el=e.el,_.isString(n.el)&&(n.el=_.query(n.selector=n.el)),_.isJQuery(n.el)&&(n.el=_.jqToEl(n.el,_.autoid)),!(_.isElement(n.el)||_.isArray(n.el)&&_.size(n.el)>0))return console.log("not query el"+e.el),n.el=document.createElement("div"),n.el.id=e.el.replace("#",""),e.template&&n.el.setAttribute("template",e.template.replace("#","")),e.container?_.query(e.container).appendChild(n.el):document.body.appendChild(n.el),!1;rootEl=n.el;break;case"data":n.data=_.isFunction(e.data)?e.data():e.data,_.isObject(n.data)||_.isArray(n.data)||(n.data={});break;case"syntax":n.syntax=customSyntax=e.syntax;break;case"methods":n.methods=_.clone(customMethods,t);break;default:n[r]=t}});break;default:throw new Error("invalid options ,formate should be likes: {el:el,data:data}")}customFilters=_.clone(StandardFilters,n.filters),_.extend(StandardDirectives,n.directives),_.each(n.directives,function(t,e){n.methods["_on_"+e]=t}),e=_.extend(e,{el:n.el,methods:n.methods}),_.isFunction(n.before)&&n.before.call(n,n.data);var i=n.el;if("cloneBefore"===n.act){var o=_.autoid(n.el.cloneNode(!0),!0);n.el.parentNode.insertBefore(o,n.el),e.act="",i=e.el=o}if("cloneAfter"===n.act){var o=_.autoid(n.el.cloneNode(!0),!0);n.el.parentNode.appendChild(o,n.el),e.act="",i=e.el=o}if(_.isElement(i)?n.parser.call(e,i):_.isArray(i)&&_.size(i)>0&&i.forEach(function(t){n.parser.call(_.clone(e,{el:t}),t)}),_.isFunction(n.callback)&&n.callback.call(e,n.data),n.events)if(_.isFunction(n.events))toucher({el:i,type:"tap",clear:!0,listener:n.events});else if(_.isObject(n.events)){var a=[];for(x in n.events)a.push({el:i,type:x,listener:n.events[x]});toucher(a)}}return createClass(t,{parser:function(t){var e=this;if(e.template||_.hasAttr.call(t,TEMPLATE)||_.hasAttr.call(t,GROUP))parseEl.call(e);else{var n=t.query(TEMPLATE.brackets(),GROUP.brackets());_.size(n)>0&&n.each(function(t,n){parseEl.call(_.clone(e,{el:t}))})}},apply:function(t,e){var n=function(t,e){return t+"='"+e+"'"},r=[];r.push(n(MODEL,t).brackets()),r.push(n(BIND,t).brackets());var i=""+r;rootEl.query(i).each(function(t,n){switch(console.log(this.tagName,t),this.tagName.toLowerCase()){case"div":_.query(this).html(e);break;case"input":_.query(this).val(e)}})}})}();return createClass(template,_),inBrowser&&(window._||(window._=_),window.tpler=_.template,window.toucher=_.toucher,window.walker=_.walker,window.router=_.router),template})}).call(this,require("buffer").Buffer)},{buffer:5}],4:[function(require,module,exports){"use strict";function t(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function e(e){var n=t(e),r=n[0],i=n[1];return 3*(r+i)/4-i}function n(t,e,n){return 3*(e+n)/4-n}function r(e){for(var r,i=t(e),o=i[0],a=i[1],s=new c(n(e,o,a)),h=0,l=a>0?o-4:o,f=0;f<l;f+=4)r=u[e.charCodeAt(f)]<<18|u[e.charCodeAt(f+1)]<<12|u[e.charCodeAt(f+2)]<<6|u[e.charCodeAt(f+3)],s[h++]=r>>16&255,s[h++]=r>>8&255,s[h++]=255&r;return 2===a&&(r=u[e.charCodeAt(f)]<<2|u[e.charCodeAt(f+1)]>>4,s[h++]=255&r),1===a&&(r=u[e.charCodeAt(f)]<<10|u[e.charCodeAt(f+1)]<<4|u[e.charCodeAt(f+2)]>>2,s[h++]=r>>8&255,s[h++]=255&r),s}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,n){for(var r,o=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(i(r));return o.join("")}function a(t){for(var e,n=t.length,r=n%3,i=[],a=16383,u=0,c=n-r;u<c;u+=a)i.push(o(t,u,u+a>c?c:u+a));return 1===r?(e=t[n-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"=")),i.join("")}exports.byteLength=e,exports.toByteArray=r,exports.fromByteArray=a;for(var s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=h.length;l<f;++l)s[l]=h[l],u[h.charCodeAt(l)]=l;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],5:[function(require,module,exports){"use strict";function t(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}function e(t){if(t>H)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=n.prototype,e}function n(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return a(t)}return r(t,e,n)}function r(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return q(t)||t&&q(t.buffer)?c(t,e,n):"string"==typeof t?s(t,e):h(t)}function i(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function o(t,n,r){return i(t),t<=0?e(t):void 0!==n?"string"==typeof r?e(t).fill(n,r):e(t).fill(n):e(t)}function a(t){return i(t),e(t<0?0:0|l(t))}function s(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!n.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i=0|p(t,r),o=e(i),a=o.write(t,r);return a!==i&&(o=o.slice(0,a)),o}function u(t){for(var n=t.length<0?0:0|l(t.length),r=e(n),i=0;i<n;i+=1)r[i]=255&t[i];return r}function c(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),i.__proto__=n.prototype,i}function h(t){if(n.isBuffer(t)){var r=0|l(t.length),i=e(r);return 0===i.length?i:(t.copy(i,0,0,r),i)}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||W(t.length)?e(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function l(t){if(t>=H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+H.toString(16)+" bytes");return 0|t}function f(t){return+t!=t&&(t=0),n.alloc(+t)}function p(t,e){if(n.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(t).length;default:if(i)return Y(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return M(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,W(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=n.from(e,i)),n.isBuffer(e))return 0===e.length?-1:g(t,e,r,i,o);if("number"==typeof e)return e=255&e,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,i,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var h=-1;for(c=n;c<s;c++)if(o(t,c)===o(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===u)return h*a}else h!==-1&&(c-=c-h),h=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var l=!0,f=0;f<u;f++)if(o(t,c+f)!==o(e,f)){l=!1;break}if(l)return c}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(W(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return z(Y(e,t.length-n),t,n,r)}function b(t,e,n,r){return z(X(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function k(t,e,n,r){return z(N(e),t,n,r)}function E(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function M(t,e,n){return 0===e&&n===t.length?G.fromByteArray(t):G.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,h,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(a=l));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:u=t[i+1],c=t[i+2],h=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&h)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&h,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return T(r)}function T(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function S(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,r,i,o,a){if(!n.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||R(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return e=+e,n>>>=0,i||R(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,n,r,52,8),n+8}function B(t){if(t=t.split("=")[0],t=t.trim().replace(Q,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function F(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function N(t){return G.toByteArray(B(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function q(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function W(t){return t!==t}var G=require("base64-js"),V=require("ieee754");exports.Buffer=n,exports.SlowBuffer=f,exports.INSPECT_MAX_BYTES=50;var H=2147483647;exports.kMaxLength=H,n.TYPED_ARRAY_SUPPORT=t(),n.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{get:function(){if(this instanceof n)return this.buffer}}),Object.defineProperty(n.prototype,"offset",{get:function(){if(this instanceof n)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(t,e,n){return r(t,e,n)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(t,e,n){return o(t,e,n)},n.allocUnsafe=function(t){return a(t)},n.allocUnsafeSlow=function(t){return a(t)},n.isBuffer=function(t){return null!=t&&t._isBuffer===!0},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,o=0,a=Math.min(r,i);o<a;++o)if(t[o]!==e[o]){r=t[o],i=e[o];break}return r<i?-1:i<r?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return n.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=n.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(ArrayBuffer.isView(a)&&(a=n.from(a)),!n.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},n.byteLength=p,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},n.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},n.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},n.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):d.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t,e,r,i,o){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=r)return 0;if(i>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=r-e,u=Math.min(a,s),c=this.slice(i,o),h=t.slice(e,r),l=0;l<u;++l)if(c[l]!==h[l]){a=c[l],s=h[l];break}return a<s?-1:s<a?1:0},n.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},n.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},n.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},n.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=n.prototype,i},n.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},n.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},n.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3]);
},n.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},n.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},n.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},n.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},n.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),V.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),V.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),V.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),V.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;I(this,t,e,n,i,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},n.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;I(this,t,e,n,i,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},n.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,255,0),this[e]=255&t,e+1},n.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},n.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},n.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},n.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},n.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},n.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},n.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},n.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},n.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},n.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},n.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},n.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},n.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},n.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},n.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},n.prototype.copy=function(t,e,r,i){if(!n.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var o=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,i);else if(this===t&&r<e&&e<i)for(var a=o-1;a>=0;--a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),e);return o},n.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!n.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=n.isBuffer(t)?t:new n(t,i),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var Q=/[^+\/0-9A-Za-z-_]/g},{"base64-js":4,ieee754:6}],6:[function(require,module,exports){exports.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,p=t[e+l];for(l+=f,o=p&(1<<-h)-1,p>>=-h,h+=s;h>0;o=256*o+t[e+l],l+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=r;h>0;a=256*a+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},exports.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=h?(s=0,a=h):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},{}]},{},[1]);